(this["webpackJsonptrackmania-records"]=this["webpackJsonptrackmania-records"]||[]).push([[0],{179:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a.n(n),i=a(14),o=a.n(i),s=a(142),l=a(11),d=a(52),j=a(51),u=a(263),b=a(126),h=a(262),m=a(101),f=a(102),O=a(141),x=a(238),p=a(237),g=a(30),y=a(269),v=a(182),k=a(240),w=a(233),S=a(180),D=a(236),C=a(273),T=a(239),B=a(69),z=a(129),R=a.n(z),N=function(){var e=c.a.useRef(!1);return c.a.useEffect((function(){return e.current=!0,function(){return e.current=!1}}),[]),e},P=Object(b.a)((function(e){return{root:{paddingBottom:e.spacing(8)},list:{width:e.spacing(25)},menuButton:{marginLeft:-12,marginRight:20},drawer:{width:240,flexShrink:0},appBar:{zIndex:e.zIndex.drawer+1},flex:{flex:1},active:{color:e.palette.primary.main}}})),L=[{title:"404 - Page Not Found",link:null,inDrawer:!1},{title:"trackmania-records",link:"/",inDrawer:!1},{title:"Trackmania",link:"/trackmania",inDrawer:!0,default:!0},{title:"Trackmania 2",link:"/tm2",inDrawer:!0,default:!0},{title:"Trackmania Wii",link:"/tmwii",inDrawer:!0,default:!0},{title:"Nations Forever",link:"/tmnforever",inDrawer:!0},{title:"United",link:"/united",inDrawer:!0},{title:"Nations ESWC",link:"/nations",inDrawer:!0},{title:"Replay Inspection",link:"/replay",inDrawer:!1},{title:"About",link:"/about",inDrawer:!1}],M=Object(j.g)((function(e){var t,a=e.location,n=c.a.useState(!1),i=Object(l.a)(n,2),o=i[0],s=i[1],j=c.a.useMemo((function(){return L.find((function(e){return e.link===a.pathname||null!==e.link&&a.pathname.startsWith(e.link+"/")}))||L[0]}),[a]);t=j.title,c.a.useEffect((function(){document.title=t+" - "+document.location.host}),[t]);var u=function(e){return function(){s(e)}},b=P(),h=Object(r.jsxs)("div",{className:b.list,children:[Object(r.jsx)(w.a,{children:Object(r.jsx)(S.a,{button:!0,component:d.b,to:"/",children:Object(r.jsx)(D.a,{primary:"Trackmania Records"})},0)}),Object(r.jsx)(p.a,{}),Object(r.jsxs)(w.a,{children:[L.filter((function(e){return e.inDrawer})).map((function(e,t){return Object(r.jsx)(S.a,{button:!0,component:d.b,to:e.link,className:e.title===j.title?b.active:void 0,children:Object(r.jsx)(D.a,{primary:e.title})},t)})),Object(r.jsx)(p.a,{}),Object(r.jsxs)(w.a,{children:[Object(r.jsx)(S.a,{button:!0,component:d.b,to:"/replay",children:Object(r.jsx)(D.a,{primary:"Replay Inspection"})},0),Object(r.jsx)(S.a,{button:!0,component:d.b,to:"/about",children:Object(r.jsx)(D.a,{primary:"About"})},1)]})]})]});return Object(r.jsxs)("div",{className:b.root,children:[Object(r.jsx)(x.a,{className:b.appBar,position:"fixed",children:Object(r.jsxs)(T.a,{children:[Object(r.jsx)(y.a,{lgUp:!0,children:Object(r.jsx)(v.a,{className:b.menuButton,onClick:u(!0),color:"inherit",children:Object(r.jsx)(R.a,{})})}),Object(r.jsx)(B.a,{variant:"h6",color:"inherit",children:Object(r.jsx)(k.a,{component:d.b,to:"/",color:"inherit",underline:"none",children:"Trackmania Records"})})]})}),Object(r.jsx)(y.a,{lgUp:!0,implementation:"css",children:Object(r.jsx)(C.a,{open:o,onClose:u(!1),onOpen:u(!0),variant:"temporary",children:Object(r.jsx)("div",{tabIndex:0,role:"button",onClick:u(!1),onKeyDown:u(!1),children:h})})}),Object(r.jsx)(y.a,{mdDown:!0,implementation:"css",children:Object(r.jsx)(g.a,{variant:"permanent",children:Object(r.jsx)("div",{tabIndex:0,role:"button",children:h})})})]})})),q=a(8),U=a(16),E=a.n(U),W=a(244),I=a(251),Y=a(250),F=a(181),_=a(252),A=a(245),H=a(248),G=a(243),X=a(246),Z=a(247),J=a(274),K=a(242),$=function(e){var t=e.children;return Object(r.jsxs)(K.a,{container:!0,children:[Object(r.jsx)(K.a,{item:!0,xs:!1,md:1,lg:2}),Object(r.jsx)(K.a,{item:!0,xs:12,md:10,lg:9,children:t})]})},V=a(91),Q=a(92),ee={darkMode:new(function(){function e(){Object(V.a)(this,e),this.enabled="true"===localStorage.getItem("dark_mode")}return Object(Q.a)(e,[{key:"toggle",value:function(){return this.enabled=!this.enabled,localStorage.setItem("dark_mode",this.enabled.toString()),this}}]),e}())},te=[function(e,t){switch(t.action){case"toggleDarkMode":return Object(q.a)(Object(q.a)({},e),{},{darkMode:e.darkMode.toggle()});default:throw new Error("Unknown action type.")}},ee],ae=c.a.createContext(ee),re=Object(b.a)((function(e){return{aboutBox:{padding:e.spacing(3)}}})),ne=[{repo:"NeKzor/trackmania-records",branch:"master"},{repo:"NeKzBot/tmx-records",branch:"api"},{repo:"NeKzor/trackmania-records",branch:"gh-pages"}],ce={whiteSpace:"nowrap"},ie=function(e){return Object(r.jsx)(G.a,Object(q.a)({size:"small"},e))},oe=function(){return Object(r.jsx)("div",{style:{paddingTop:"50px"}})},se=function(){var e=E.a.utc(),t=E()().utc().endOf("day").add(17,"hours");t.isBefore(e)&&(t=E()().utc().endOf("day").add(1,"day").add(17,"hours"));var a=E.a.duration({from:e,to:t}),r=a.get("hours"),n=a.get("minutes"),c=a.get("seconds"),i=function(e){return 1===e?"":"s"};return"".concat(r," hour").concat(i(r),", ").concat(n," minute").concat(i(n),", ").concat(c," second").concat(i(c))},le=null,de=function(){var e=N(),t=c.a.useContext(ae),a=t.state.darkMode,n=t.dispatch,i=c.a.useState([]),o=Object(l.a)(i,2),s=o[0],d=o[1],j=c.a.useState(se()),u=Object(l.a)(j,2),b=u[0],h=u[1];c.a.useEffect((function(){return le=setInterval((function(){h(se())}),1e3),function(){return clearInterval(le)}}),[]);c.a.useEffect((function(){var t=function(t){console.error(t),e.current&&d(void 0)};Promise.all(ne.map((function(e){var t=e.repo,a=e.branch;return fetch("https://api.github.com/repos/".concat(t,"/commits/").concat(a))}))).then((function(a){Promise.all(a.map((function(e){return e.json()}))).then((function(t){e.current&&d(t.map((function(e){return{sha:e.sha,author:e.author?e.author:e.commit.author,message:e.commit.message,date:e.commit.author.date}})))})).catch(t)})).catch(t)}),[e]);var m=re();return Object(r.jsx)($,{children:Object(r.jsxs)(F.a,{className:m.aboutBox,children:[Object(r.jsx)(B.a,{component:"h2",variant:"h5",children:"Trackmania Campaign Records & Statistics"}),Object(r.jsx)("br",{}),Object(r.jsx)(B.a,{variant:"body1",children:"This web app mirrors campaign world records of many Trackmania games. Data is mainly provided by Trackmania Exchange but also by speedrun.com."}),Object(r.jsx)(B.a,{variant:"body1",children:"Additionally it ranks players based on how many world records they hold and how long their records have been lasting."}),Object(r.jsx)(oe,{}),Object(r.jsx)(B.a,{variant:"h5",children:"Next Update"}),Object(r.jsx)("br",{}),b,Object(r.jsx)(oe,{}),Object(r.jsx)(B.a,{variant:"h5",children:"Changelog"}),Object(r.jsx)("br",{}),void 0===s?Object(r.jsx)(B.a,{variant:"body1",children:"Unable to fetch status from GitHub."}):0===s.length?Object(r.jsx)(W.a,{className:m.progress}):Object(r.jsx)("div",{style:{overflowX:"auto"},children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(X.a,{children:Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(G.a,{padding:"default",children:Object(r.jsx)(B.a,{variant:"body1",children:"Branch"})}),Object(r.jsx)(G.a,{padding:"default",children:Object(r.jsx)(B.a,{variant:"body1",children:"Date"})}),Object(r.jsx)(G.a,{padding:"default",children:Object(r.jsx)(B.a,{variant:"body1",children:"Author"})}),Object(r.jsx)(G.a,{padding:"default",children:Object(r.jsx)(B.a,{variant:"body1",children:"Commit"})})]})}),Object(r.jsx)(H.a,{children:s.map((function(e,t){var a=ne[t],n=a.repo,c=a.branch;return Object(r.jsxs)(Z.a,{tabIndex:-1,style:ce,children:[Object(r.jsx)(ie,{align:"left",children:Object(r.jsx)(k.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(n,"/tree/").concat(c),children:c})}),Object(r.jsx)(ie,{align:"left",style:ce,children:Object(r.jsx)(J.a,{title:E()(e.date).toString(),children:Object(r.jsx)("span",{children:E()(e.date).from()})})}),Object(r.jsx)(ie,{align:"left",children:e.author.html_url?Object(r.jsx)(k.a,{color:"inherit",rel:"noopener",href:e.author.html_url,children:e.author.login}):e.author.name||"n/a"}),Object(r.jsx)(ie,{align:"left",style:ce,children:Object(r.jsx)(J.a,{title:e.message,children:Object(r.jsx)(k.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(n,"/commit/").concat(e.sha),children:e.sha})})})]},t)}))})]})}),Object(r.jsx)(oe,{}),Object(r.jsx)(B.a,{variant:"h5",children:"Theme Settings"}),Object(r.jsx)("br",{}),Object(r.jsx)(Y.a,{row:!0,children:Object(r.jsx)(I.a,{control:Object(r.jsx)(_.a,{checked:a.enabled,onChange:function(){n({action:"toggleDarkMode"})},color:"primary"}),label:"Dark Mode"})}),Object(r.jsx)(oe,{}),Object(r.jsx)(B.a,{variant:"h5",children:"Credits"}),Object(r.jsx)("br",{}),Object(r.jsx)(k.a,{rel:"noopener",href:"http://www.tm-exchange.com",children:"tm-exchange.com"}),Object(r.jsx)("br",{}),Object(r.jsx)(k.a,{rel:"noopener",href:"https://tm.mania-exchange.com",children:"tm.mania-exchange.com"}),Object(r.jsx)("br",{}),Object(r.jsx)(k.a,{rel:"noopener",href:"https://www.speedrun.com/tmwii",children:"speedrun.com/tmwii"}),Object(r.jsx)("br",{}),Object(r.jsx)(k.a,{rel:"noopener",href:"https://github.com/jonese1234/Trackmania-Leaderboard",children:"jonese1234/Trackmania-Leaderboard"})]})})},je=a(68),ue=a.n(je),be=a(58),he=a(95),me=a(100),fe=a(265),Oe=a(256),xe=a(257),pe=a(267),ge=a(275),ye={numeric:!0},ve=function(e,t,a){var r=function(e,t){var r=Se(e,a).toString();return Se(t,a).toString().localeCompare(r,void 0,ye)},n="desc"===t?function(e,t){return r(e,t)}:function(e,t){return-r(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},ke=function(e,t,a,r){if(a===r||void 0===r)return ve(e,t,a);var n=function(e,t){var n=Se(e,a).toString(),c=Se(t,a).toString(),i=c.localeCompare(n,void 0,ye);return 0!==i?i:(n=Se(e,r).toString(),(c=Se(t,r).toString()).localeCompare(n,void 0,ye))},c="desc"===t?function(e,t){return n(e,t)}:function(e,t){return-n(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=c(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},we={},Se=function(e,t){return(-1!==t.indexOf(".")?t.split(".").filter((function(e){return e})).reduce((function(e,t){return e&&e[t]}),e):e[t])||we},De=function(e){return["nations","sunrise","original"].includes(e)?"http":"https"},Ce=function(e){return"tm2"===e?{trackUrl:function(e){return"https://tm.mania-exchange.com/tracks/".concat(e)},imageUrl:function(e){return"https://tm.mania-exchange.com/tracks/screenshot/normal/".concat(e)},replayUrl:function(e){return"https://tm.mania-exchange.com/replays/download/".concat(e)},userUrl:function(e){return"https://tm.mania-exchange.com/user/profile/".concat(e)}}:"tmwii"===e?{trackUrl:function(e){return"https://speedrun.com/tmwii/".concat(e)},imageUrl:function(e){},replayUrl:function(e){},userUrl:function(e){return"https://www.speedrun.com/user/".concat(e)}}:{trackUrl:function(t){return"".concat(De(e),"://").concat(e,".tm-exchange.com/main.aspx?action=trackshow&id=").concat(t)},imageUrl:function(t){return"".concat(De(e),"://").concat(e,".tm-exchange.com/getclean.aspx?action=trackscreenscreens&id=").concat(t)},replayUrl:function(t){return"".concat(De(e),"://").concat(e,".tm-exchange.com/get.aspx?action=recordgbx&id=").concat(t)},userUrl:function(t){return"".concat(De(e),"://").concat(e,".tm-exchange.com/main.aspx?action=usershow&id=").concat(t)}}},Te=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],Be=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return Object(r.jsx)(X.a,{children:Object(r.jsx)(Z.a,{children:Te.map((function(e){return Object(r.jsxs)(G.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(r.jsx)(J.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(r.jsx)(ge.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){n(e,c,i)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var c,i}))})})},ze=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),Re={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Ne={whiteSpace:"nowrap"},Pe={padding:"7px 0px 7px 16px"},Le=function(e){return Object(r.jsx)(G.a,Object(q.a)({style:Pe},e))},Me=function(e){var t=e.data,a=e.game,n=c.a.useState(Re),i=Object(l.a)(n,2),o=i[0],s=o.order,d=o.orderBy,j=o.thenBy,u=o.rowsPerPage,b=o.page,h=i[1],m=ze();return Object(r.jsx)("div",{className:m.root,children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(Be,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;h((function(e){return Object(q.a)(Object(q.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))}}),Object(r.jsx)(H.a,{children:ke(t,s,d,j).slice(b*u,b*u+u).map((function(e){return Object(r.jsxs)(Z.a,{tabIndex:-1,children:[Object(r.jsx)(Le,{align:"left",children:Object(r.jsx)(k.a,{style:Ne,color:"inherit",href:Ce(a).userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(r.jsx)(Le,{align:"left",children:e.wrs}),Object(r.jsxs)(Le,{align:"left",children:[e.duration," day",1===e.duration?"":"s"]})]},e.user.id)}))})]})})},qe=a(25),Ue=a.n(qe),Ee=a(98),We=a.n(Ee),Ie=a(264);function Ye(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0===e||null===e)return e;if("Stunts"===a)return e+" pts.";if("tm2"!==t){var r=(e/=10)%100,n=Math.floor(e/100),c=n%60,i=Math.floor(n/60);return(i>0?i+":":"")+(c<10&&i>0?"0"+c:c)+"."+(r<10?"0"+r:r)}var o=e%1e3,s=Math.floor(e/1e3),l=s%60,d=Math.floor(s/60);return(d>0?d+":":"")+(l<10&&d>0?"0"+l:l)+"."+(o<100?o<10?"00"+o:"0"+o:o)}var Fe=Object(Ie.a)().domain([0,24,336,1440]).range(["#2eb82e","#258e25","#cca300","#e67300"]);function _e(e){var t=E()().diff(E()(e),"hours");return t<=1440?Fe(t):void 0}var Ae=Object(Ie.a)().domain([0,480,960,1440]).range(["#2eb82e","#cca300","#e67300","#e63200"]);for(var He=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],Ge=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return Object(r.jsx)(X.a,{children:Object(r.jsx)(Z.a,{children:He.map((function(e){return Object(r.jsxs)(G.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(r.jsx)(J.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(r.jsx)(ge.a,{active:a===e.id,direction:t,onClick:(c=e.id,function(e){n(e,c)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var c}))})})},Xe=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),Ze={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},Je={whiteSpace:"nowrap"},Ke={padding:"7px 0px 7px 16px"},$e=function(e){return Object(r.jsx)(G.a,Object(q.a)({style:Ke},e))},Ve=function(e){var t=e.data,a=e.game,n=e.stats,i=e.useLiveDuration,o=c.a.useState(Ze),s=Object(l.a)(o,2),d=s[0],j=d.order,u=d.orderBy,b=d.rowsPerPage,h=d.page,m=s[1],f=Ce(a),O=Xe();return Object(r.jsx)("div",{className:O.root,children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(Ge,{order:j,orderBy:u,onRequestSort:function(e,t){var a=t;m((function(e){return Object(q.a)(Object(q.a)({},e),{},{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),Object(r.jsx)(H.a,{children:ve(t,j,u).slice(h*b,h*b+b).map((function(e){var t=Ye(e.score,a,e.track.type);return Object(r.jsxs)(Z.a,{tabIndex:-1,children:[(e.track.isFirst||"track.name"!==u)&&Object(r.jsx)($e,{style:Je,rowSpan:"track.name"!==u?1:e.track.records,align:"left",children:Object(r.jsx)(k.a,{color:"inherit",href:f.trackUrl(e.track.id),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(r.jsxs)($e,{align:"left",children:[Object(r.jsx)(J.a,{title:"Download Replay",placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(k.a,{style:Je,color:"inherit",href:f.replayUrl(e.replay),rel:"noreferrer",target:"_blank",children:t})}),"tm2"===a&&E()(e.date).isBefore("2017-05-09")&&Object(r.jsx)(J.a,{title:"This run was done on an older game version.",placement:"bottom-end",enterDelay:300,children:Object(r.jsx)("span",{children:Object(r.jsx)(v.a,{size:"small",disabled:!0,children:Object(r.jsx)(We.a,{fontSize:"inherit"})})})})]}),Object(r.jsx)($e,{align:"left",children:Object(r.jsx)(k.a,{style:Je,color:"inherit",href:f.userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(r.jsx)($e,{align:"left",children:Object(r.jsx)(J.a,{title:Object(r.jsx)(Ue.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(Ue.a,{style:Object(q.a)({color:_e(e.date)},Je),format:"YYYY-MM-DD",children:e.date})})}),Object(r.jsx)($e,{align:"left",children:Object(r.jsx)(J.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:i?Object(r.jsx)(Ue.a,{style:Je,diff:e.date,unit:"days"}):Object(r.jsx)("span",{children:e.duration})})})]},"".concat(e.track.name,"-").concat(e.user.id))}))}),Object(r.jsxs)(H.a,{children:[n.totalTime>0&&Object(r.jsxs)(Z.a,{children:[Object(r.jsx)($e,{align:"right",children:"Total Time"}),Object(r.jsx)($e,{children:Object(r.jsx)(J.a,{title:E.a.duration(n.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)("span",{children:Ye(n.totalTime,a)})})}),Object(r.jsx)($e,{colSpan:3})]}),n.totalPoints>0&&Object(r.jsxs)(Z.a,{children:[Object(r.jsx)($e,{align:"right",children:"Total Points"}),Object(r.jsx)($e,{children:Object(r.jsx)("span",{children:Ye(n.totalPoints,a,"Stunts")})}),Object(r.jsx)($e,{colSpan:3})]})]})]})})},Qe=a(137),et=a.n(Qe),tt=function(e,t){return"https://speedrun.com/tmwii/".concat(e,"#").concat(t)},at=function(e){return"https://www.speedrun.com/user/".concat(e)},rt=function(e){return"https://www.speedrun.com/tmwii/run/".concat(e)},nt=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"},{id:"replay",sortable:!1,label:"Video",align:"left"}],ct=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return Object(r.jsx)(X.a,{children:Object(r.jsx)(Z.a,{children:nt.map((function(e){return Object(r.jsxs)(G.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(r.jsx)(J.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(r.jsx)(ge.a,{active:a===e.id,direction:t,onClick:(c=e.id,function(e){n(e,c)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var c}))})})},it=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),ot={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},st={whiteSpace:"nowrap"},lt={padding:"7px 0px 7px 16px"},dt=function(e){return Object(r.jsx)(G.a,Object(q.a)({style:lt},e))},jt=function(e){var t=e.data,a=e.game,n=e.stats,i=e.useLiveDuration,o=e.category,s=c.a.useState(ot),d=Object(l.a)(s,2),j=d[0],u=j.order,b=j.orderBy,h=j.rowsPerPage,m=j.page,f=d[1],O=it();return Object(r.jsx)("div",{className:O.root,children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(ct,{order:u,orderBy:b,onRequestSort:function(e,t){var a=t;f((function(e){return Object(q.a)(Object(q.a)({},e),{},{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),Object(r.jsx)(H.a,{children:ve(t,u,b).slice(m*h,m*h+h).map((function(e){return Object(r.jsxs)(Z.a,{tabIndex:-1,children:[(e.track.isFirst||"track.name"!==b)&&Object(r.jsx)(dt,{style:st,rowSpan:"track.name"!==b?1:e.track.records,align:"left",children:Object(r.jsx)(k.a,{color:"inherit",href:tt(e.track.name,o),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(r.jsx)(dt,{align:"left",children:Object(r.jsx)(k.a,{style:st,color:"inherit",href:rt(e.id),rel:"noreferrer",target:"_blank",children:Ye(e.score,a)})}),Object(r.jsx)(dt,{align:"left",children:Object(r.jsx)(k.a,{style:st,color:"inherit",href:at(e.user.name),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(r.jsx)(dt,{align:"left",children:Object(r.jsx)(J.a,{title:Object(r.jsx)(Ue.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(Ue.a,{style:Object(q.a)({color:_e(e.date)},st),format:"YYYY-MM-DD",children:e.date})})}),Object(r.jsx)(dt,{align:"left",children:Object(r.jsx)(J.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:i?Object(r.jsx)(Ue.a,{style:st,diff:e.date,unit:"days"}):Object(r.jsx)("span",{children:e.duration})})}),Object(r.jsx)(dt,{align:"left",children:Object(r.jsx)(J.a,{title:"Watch Run",placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(v.a,{size:"small",href:e.media,target:"_blank",children:Object(r.jsx)(et.a,{fontSize:"inherit"})})})})]},"".concat(e.track.name,"-").concat(e.user.id))}))}),Object(r.jsx)(H.a,{children:n.totalTime>0&&Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(dt,{align:"right",children:"Total Time"}),Object(r.jsx)(dt,{children:Object(r.jsx)(J.a,{title:E.a.duration(n.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)("span",{children:Ye(n.totalTime,a)})})}),Object(r.jsx)(dt,{colSpan:4})]})})]})})},ut=function(e){var t=e.data,a=e.props;return Object(r.jsx)(B.a,Object(q.a)(Object(q.a)({variant:"h5",gutterBottom:!0,style:{padding:"50px 0px 50px 50px"}},a),{},{children:t}))},bt=a(99),ht=a.n(bt),mt=a(253),ft=Object(mt.a)((function(e){var t=e.labels,a=e.series,n=e.title,c=e.theme,i=e.rest,o=void 0===i||i,s="dark"===c.palette.type;if(o&&a.length>30){var l=a.slice(30).reduce((function(e,t){return e+t}),0);a=a.slice(0,30),t=t.slice(0,30),a.push(l),t.push("Rest")}var d=new Array(a.length).fill(0).map((function(){return"#"+(16777215*Math.random()<<0).toString(16).padStart(6,"0")}));return Object(r.jsx)(ht.a,{options:{labels:t,legend:{show:!1},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0},value:{show:!0,color:s?"white":"black"},total:{show:!0,label:n,color:s?"white":"black"}}}}},colors:d},series:a,type:"donut",height:"400"})})),Ot=a(255),xt=a(254),pt=a(138),gt=a.n(pt),yt=Object(b.a)((function(e){return{fab:{margin:0,top:"auto",right:30,bottom:30,left:"auto",position:"fixed"}}})),vt=function(){!function e(){var t=document.documentElement.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/5))}()},kt=function(){var e=function(){var e=c.a.useRef(void 0),t=c.a.useState({x:0,y:0}),a=Object(l.a)(t,2),r=a[0],n=a[1],i=c.a.useCallback((function(){clearTimeout(e.current),e.current=setTimeout((function(){n({x:window.scrollX,y:window.scrollY})}),100)}),[n]);return c.a.useEffect((function(){return window.addEventListener("scroll",i),function(){clearTimeout(e.current),window.removeEventListener("scroll",i)}}),[i]),r}().y,t=yt();return Object(r.jsx)(xt.a,{in:0!==e,timeout:1e3,children:Object(r.jsx)(Ot.a,{title:"Jump to top",color:"primary",className:t.fab,onClick:vt,children:Object(r.jsx)(gt.a,{})})})},wt=new(function(){function e(){Object(V.a)(this,e),this.baseApi="https://raw.githubusercontent.com/NeKzBot/tmx-records/api"}return Object(Q.a)(e,[{key:"request",value:function(){var e=Object(he.a)(ue.a.mark((function e(t,a){var r;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/").concat(t,"/").concat(a||"latest",".json"));case 2:if(r=e.sent,console.log("GET ".concat(r.url," (").concat(r.status,")")),r.ok){e.next=6;break}throw r;case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),St=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"}}})),Dt=Object(me.a)((function(e){var t=e.match,a=N(),n=c.a.useState(void 0),i=Object(l.a)(n,2),o=i[0],s=i[1],d=c.a.useState("tm2"),j=Object(l.a)(d,2),u=j[0],b=j[1],h=c.a.useState(0),m=Object(l.a)(h,2),f=m[0],O=m[1],x=t.params[0],p=t.params.date,g=void 0===p||"latest"===p;c.a.useEffect((function(){O(0),s(void 0)}),[x]),c.a.useEffect((function(){Object(he.a)(ue.a.mark((function e(){var t,r,n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt.request(x,p);case 2:if((t=e.sent)[0]&&t[0].tracks[0].wrs){r=Object(be.a)(t);try{for(c=function(){var e=n.value;void 0===e.stats.totalPoints&&(e.stats.totalTime=e.tracks.filter((function(e){return"Stunts"!==e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0),e.stats.totalPoints=e.tracks.filter((function(e){return"Stunts"===e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0));var t,a=[],r=Object(be.a)(e.tracks);try{for(r.s();!(t=r.n()).done;){var c,i=t.value,o=Object(be.a)(i.wrs);try{for(o.s();!(c=o.n()).done;){var s=c.value,l=g?E()().diff(E()(s.date),"d"):s.duration;a.push(Object(q.a)(Object(q.a)({track:{id:i.id,name:i.name,type:i.type,isFirst:s===i.wrs[0],records:i.wrs.length}},s),{},{duration:l}))}}catch(d){o.e(d)}finally{o.f()}}}catch(d){r.e(d)}finally{r.f()}e.tracks=a,g&&e.leaderboard.forEach((function(t,a){e.leaderboard[a].duration=e.tracks.filter((function(e){return e.user.id===t.user.id})).map((function(e){return e.duration})).reduce((function(e,t){return e+t}),0)}))},r.s();!(n=r.n()).done;)c()}catch(i){r.e(i)}finally{r.f()}}if(a.current){e.next=6;break}return e.abrupt("return");case 6:b(x),s(t);case 8:case"end":return e.stop()}}),e)})))()}),[a,x,p,g]);var y="tmwii"===u?jt:Ve,v=St();return Object(r.jsxs)($,{children:[Object(r.jsx)(F.a,{children:void 0===o?Object(r.jsx)(Oe.a,{}):0===o.length?Object(r.jsx)(ut,{data:"No data."}):Object(r.jsxs)(r.Fragment,{children:[o.length>1&&Object(r.jsx)(pe.a,{value:f,onChange:function(e,t){O(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:o.map((function(e){return Object(r.jsx)(xe.a,{label:e.name},e.name)}))}),Object(r.jsx)(B.a,{component:"div",role:"tabpanel",children:Object(r.jsx)(fe.a,{p:3,children:Object(r.jsxs)(K.a,{container:!0,direction:"column",justify:"center",children:[Object(r.jsx)(K.a,{item:!0,xs:12,children:Object(r.jsx)(y,{data:o[f].tracks,game:u,stats:o[f].stats,useLiveDuration:g,category:o[f].name})}),Object(r.jsx)(K.a,{item:!0,xs:12,className:v.padTop,children:Object(r.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(r.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(Me,{data:o[f].leaderboard,game:x})}),Object(r.jsx)(K.a,{item:!0,xs:12,md:6,className:v.padTop,children:Object(r.jsxs)(K.a,{container:!0,direction:"column",justify:"center",children:[Object(r.jsx)(K.a,{item:!0,xs:12,children:Object(r.jsx)(ft,{title:"WRs",labels:o[f].leaderboard.map((function(e){return e.user.name})),series:o[f].leaderboard.map((function(e){return e.wrs}))})}),Object(r.jsx)(K.a,{item:!0,xs:12,className:v.padTop,children:Object(r.jsx)(ft,{title:"Duration",labels:o[f].leaderboard.map((function(e){return e.user.name})),series:o[f].leaderboard.map((function(e){return e.duration}))})})]})})]})})]})})})]})}),Object(r.jsx)(kt,{})]})})),Ct=a(139),Tt=a.n(Ct),Bt=a(258),zt=a(271),Rt=a(272),Nt=a(268),Pt=a(15),Lt=function(e){return Object(r.jsx)(Nt.a,Object(q.a)({elevation:6,variant:"filled"},e))},Mt={info:"drag & drop replay here :)",magic:"GBX",version:6,settings:"BUCR",classId:50933760,headerSize:331,headerChunks:2,chunkOffset:348},qt=function(){var e=N(),t=Object(Pt.a)(),a=c.a.useState(Mt),n=Object(l.a)(a,2),i=n[0],o=n[1],s=c.a.useState(!0),d=Object(l.a)(s,2),j=d[0],u=d[1],b=c.a.useState(!1),h=Object(l.a)(b,2),m=h[0],f=h[1],O=function(e,t){"clickaway"!==t&&f(!1)},x=c.a.useCallback((function(t){if(t){var a=new FileReader;a.onload=function(t){var a=t.target.result;try{if(!e.current)return;o(Mt),f(!1);var r=window,n=r.Buffer,c=r.Replay,i=window.replay=c.default().read(n.from(a),{parseGhost:j});if(!e.current)return;i.ghost&&delete i.ghost.restData,function e(t){Object.keys(t).forEach((function(a){"_view"===a?delete t._view:"object"===typeof t[a]&&e(t[a])}))}(i),o(i)}catch(s){e.current&&f(s.message)}},a.readAsArrayBuffer(t)}}),[e,j,o,f]),p=c.a.useCallback((function(e){return x(e.target.files[0])}),[x]),g=function(e){e.dataTransfer.items?e.dataTransfer.items.clear():e.dataTransfer.clearData()};c.a.useEffect((function(){return document.querySelector("#file").addEventListener("change",p),function(){return document.querySelector("#file").removeEventListener("change",p)}}),[p]);return Object(r.jsx)($,{children:Object(r.jsxs)(F.a,{style:{padding:"20px 20px 20px 20px"},children:[Object(r.jsx)(Bt.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){document.querySelector("#file").click()},children:"Open file"}),Object(r.jsx)("input",{type:"file",id:"file",style:{display:"none"}}),Object(r.jsx)(I.a,{style:{marginLeft:"20px"},control:Object(r.jsx)(zt.a,{color:"primary",checked:j,onChange:function(e){u(e.target.checked)}}),label:"Parse Ghost"}),Object(r.jsx)("div",{style:{paddingBottom:"20px"}}),Object(r.jsx)("div",{onDrop:function(e){e.preventDefault();var t=[];if(e.dataTransfer.items)for(var a=0;a<e.dataTransfer.items.length;++a)"file"===e.dataTransfer.items[a].kind&&t.push(e.dataTransfer.items[a].getAsFile());x(t[0]),g(e)},onDragOver:function(e){e.preventDefault()},children:Object(r.jsx)(Tt.a,{name:"replay",style:{fontSize:"14px"},src:i,theme:"light"===t.palette.type?"bright:inverted":"solarized",displayDataTypes:!1,displayObjectSize:!1,enableClipboard:!1})}),Object(r.jsx)(Rt.a,{open:!1!==m,autoHideDuration:6e3,onClose:O,children:Object(r.jsx)(Lt,{onClose:O,severity:"error",children:m})})]})})},Ut=function(){return Object(r.jsx)($,{children:Object(r.jsx)(F.a,{children:Object(r.jsx)(ut,{data:"Page not found :("})})})},Et=a(103),Wt=a.n(Et),It=a(276),Yt=a(261),Ft=a(266),_t=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],At=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",sortable:!0,label:"World Records",align:"left"}],Ht=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort,c=e.hasDuration,i=c?_t:At;return Object(r.jsx)(X.a,{children:Object(r.jsx)(Z.a,{children:i.map((function(e){return Object(r.jsxs)(G.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(r.jsx)(J.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(r.jsx)(ge.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){n(e,c,i)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var c,i}))})})},Gt=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),Xt={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Zt={padding:"7px 0px 7px 16px"},Jt=function(e){return Object(r.jsx)(G.a,Object(q.a)({style:Zt},e))},Kt=function(e){var t=e.data,a=e.hasDuration,n=c.a.useState(Xt),i=Object(l.a)(n,2),o=i[0],s=o.order,d=o.orderBy,j=o.thenBy,u=i[1];c.a.useEffect((function(){u((function(e){return Object(q.a)(Object(q.a)({},e),{},{orderBy:"wrs",thenBy:"wrs"})}))}),[t,a]);var b=Gt();return Object(r.jsx)("div",{className:b.root,children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(Ht,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;u((function(e){return Object(q.a)(Object(q.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},hasDuration:a}),Object(r.jsx)(H.a,{children:(a?ke:ve)(t,s,d,j).map((function(e){return Object(r.jsxs)(Z.a,{tabIndex:-1,children:[Object(r.jsx)(Jt,{align:"left",children:e.user.name}),Object(r.jsx)(Jt,{align:"left",children:e.wrs}),a&&Object(r.jsx)(Jt,{align:"left",children:e.duration})]},e.user.name)}))})]})})},$t=a(90),Vt=a(143),Qt=a(259),ea=a(113),ta=a.n(ea),aa=a(140),ra=a.n(aa),na=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"zone",sortable:!0,label:"Zone",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],ca=[{id:"track.monthDay",sortable:!0,label:"Day",align:"left"},{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"zone",sortable:!0,label:"Zone",align:"left"}],ia=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort,c=e.official,i=c?na:ca;return Object(r.jsx)(X.a,{children:Object(r.jsx)(Z.a,{children:i.map((function(e,c){return Object(r.jsxs)(G.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,colSpan:c===i.length-1?2:1,children:[!0===e.sortable&&Object(r.jsx)(J.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(r.jsx)(ge.a,{active:a===e.id,direction:t,onClick:(o=e.id,function(e){n(e,o)}),children:e.label})}),!1===e.sortable&&e.label]},c);var o}))})})},oa=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),sa={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},la={whiteSpace:"nowrap"},da={padding:"7px 0px 7px 16px"},ja=function(e){return Object(r.jsx)(G.a,Object(q.a)({style:da},e))},ua=function(e,t){var a=t?"&authorId=21":"";return"https://trackmania.exchange/mapsearch2?trackname=".concat(encodeURIComponent(e.name)).concat(a)},ba=Object(b.a)({root:{"& > *":{borderBottom:"unset"}}}),ha=function(e){var t,a=e.wr,n=e.official,c=Ye(a.score,"tm2"),i=0!==a.delta?Ye(a.delta,"tm2"):null;return Object(r.jsxs)(Z.a,{tabIndex:-1,children:[n&&Object(r.jsx)(ja,{align:"left",children:Object(r.jsx)(J.a,{title:Object(r.jsx)(Ue.a,{format:"HH:mm",children:a.date}),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(Ue.a,{style:Object(q.a)({color:_e(a.date)},la),format:"YYYY-MM-DD",children:a.date})})}),!n&&Object(r.jsx)(ja,{align:"left",children:Object(r.jsx)(J.a,{title:a.setAfter,placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(Ue.a,{style:Object(q.a)({color:(t=a.pastMinutes,t>=0&&t<=1440?Ae(t):void 0)},la),format:"HH:mm",children:a.date})})}),Object(r.jsxs)(ja,{align:"left",children:[c,a.note&&Object(r.jsx)(J.a,{title:a.note,placement:"bottom-end",enterDelay:300,children:Object(r.jsx)("span",{children:Object(r.jsx)(v.a,{size:"small",disabled:!0,children:Object(r.jsx)(We.a,{fontSize:"inherit"})})})})]}),Object(r.jsx)(ja,{align:"left",children:i?"-"+i:""}),Object(r.jsx)(ja,{align:"left",children:a.user.name}),Object(r.jsx)(ja,{align:"left",children:Object(r.jsx)(J.a,{title:a.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300,children:Object(r.jsx)("span",{children:a.user.zone[2].name})})}),Object(r.jsx)(ja,{align:"left",children:Object(r.jsx)(J.a,{title:"Download Ghost",placement:"bottom",enterDelay:300,children:Object(r.jsx)(v.a,{size:"small",style:la,color:"inherit",href:"https://prod.trackmania.core.nadeo.online/storageObjects/"+a.replay,rel:"noreferrer",target:"_blank",children:Object(r.jsx)(ta.a,{fontSize:"inherit"})})})})]})},ma=function(e){var t=e.wr,a=e.official,n=e.orderBy,c=e.useLiveDuration,i=e.history,o=e.onClickHistory,s=Ye(t.score,"tm2"),l=0!==t.delta?Ye(t.delta,"tm2"):null,d=ba(),j=i===t.track.id,u="track.monthDay"===n||"track.name"===n;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Z.a,{tabIndex:-1,children:[!a&&(t.track.isFirst||!u)&&Object(r.jsx)(ja,{align:"left",rowSpan:u?t.track.records:1,children:t.track.monthDay}),(t.track.isFirst||!u)&&Object(r.jsx)(ja,{style:la,rowSpan:u?t.track.records:1,align:"left",children:Object(r.jsx)(k.a,{color:"inherit",href:ua(t.track,a),rel:"noreferrer",target:"_blank",children:t.track.name})}),Object(r.jsxs)(ja,{align:"left",children:[a&&l&&Object(r.jsx)(J.a,{title:Object(r.jsxs)("span",{children:["-",l," to former record"]}),placement:"bottom",enterDelay:300,children:Object(r.jsx)("span",{children:s})}),a&&!l&&Object(r.jsx)("span",{children:s}),!a&&l&&Object(r.jsx)(J.a,{title:Object(r.jsxs)("span",{children:["-",l," to former record"]}),placement:"bottom",enterDelay:300,children:Object(r.jsx)("span",{children:s})}),!a&&!l&&Object(r.jsx)("span",{children:s})]}),Object(r.jsx)(ja,{style:la,align:"left",children:t.user.name}),Object(r.jsx)(ja,{style:la,align:"left",children:Object(r.jsx)(J.a,{title:t.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300,children:Object(r.jsx)("span",{children:t.user.zone[2].name})})}),a&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ja,{align:"left",children:Object(r.jsx)(J.a,{title:Object(r.jsx)(Ue.a,{fromNow:!0,children:t.date}),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(Ue.a,{style:Object(q.a)({color:_e(t.date)},la),format:"YYYY-MM-DD",children:t.date})})}),Object(r.jsx)(ja,{align:"left",children:Object(r.jsx)(J.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:c?Object(r.jsx)(Ue.a,{style:la,diff:t.date,unit:"days"}):Object(r.jsx)("span",{children:t.duration})})})]}),Object(r.jsxs)(ja,{style:la,align:"left",children:[Object(r.jsx)(J.a,{title:"Download Ghost",placement:"bottom",enterDelay:300,children:Object(r.jsx)(v.a,{size:"small",style:la,color:"inherit",href:"https://prod.trackmania.core.nadeo.online/storageObjects/"+t.replay,rel:"noreferrer",target:"_blank",children:Object(r.jsx)(ta.a,{fontSize:"inherit"})})}),t.track.isLast&&t.track.history&&Object(r.jsx)(v.a,{color:"inherit",size:"small",style:la,onClick:function(){return o(t.track.id)},children:Object(r.jsx)(ra.a,{fontSize:"inherit"})})]})]}),t.track.isLast&&t.track.history&&Object(r.jsx)(Z.a,{className:d.root,children:Object(r.jsx)(ja,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:Object(r.jsx)(Qt.a,{in:j,timeout:"auto",unmountOnExit:!0,children:Object(r.jsxs)(fe.a,{margin:1,children:[Object(r.jsx)(B.a,{variant:"h6",gutterBottom:!0,component:"div",children:"History"}),Object(r.jsxs)(A.a,{size:"small","aria-label":"purchases",children:[Object(r.jsx)(X.a,{children:Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(ja,{children:a?"Date":"Time"}),Object(r.jsx)(ja,{children:"Record"}),Object(r.jsx)(ja,{children:"Timesave"}),Object(r.jsx)(ja,{children:"Player"}),Object(r.jsx)(ja,{colSpan:2,children:"Zone"})]})}),Object(r.jsx)(H.a,{children:t.track.history.map((function(e,t){return Object(r.jsx)(ha,{wr:e,official:a},t)}))})]})]})})})})]})},fa=function(e){var t=e.data,a=e.stats,n=e.official,i=e.useLiveDuration,o=function(e,t){var a=c.a.useState((function(){var a=localStorage.getItem(e);if(a)try{return JSON.parse(a)}catch(r){}return localStorage.setItem(e,JSON.stringify(t)),t})),r=Object(l.a)(a,2),n=r[0],i=r[1];return[n,c.a.useCallback((function(t){i(t),localStorage.setItem(e,JSON.stringify(t))}),[i])]}("tm2020",{official:{order:"asc",orderBy:"track.name"},totd:{order:"asc",orderBy:"track.monthDay"}}),s=Object(l.a)(o,2),d=s[0],j=s[1],u=c.a.useState(sa),b=Object(l.a)(u,2),h=b[0],m=h.order,f=h.rowsPerPage,O=h.page,x=Object(Vt.a)(h,["order","rowsPerPage","page"]),p=b[1],g=c.a.useState(null),y=Object(l.a)(g,2),v=y[0],k=y[1],w=x.orderBy;w=n?d.official.orderBy:d.totd.orderBy,w=n&&"track.monthDay"===w?"track.name":w;c.a.useEffect((function(){var e=d[n?"official":"totd"];p((function(t){return Object(q.a)(Object(q.a)({},t),{},{order:e.order,orderBy:e.orderBy})}))}),[t]);var S=c.a.useCallback((function(e){k(v!==e?e:null)}),[v,k]),D=oa();return Object(r.jsx)("div",{className:D.root,children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(ia,{order:m,orderBy:w,onRequestSort:function(e,t){var a=t;p((function(e){var t=e.orderBy===a&&"desc"===e.order?"asc":"desc";return j(Object(q.a)(Object(q.a)({},d),{},Object($t.a)({},n?"official":"totd",{order:t,orderBy:a}))),Object(q.a)(Object(q.a)({},e),{},{order:t,orderBy:a})}))},official:n}),Object(r.jsx)(H.a,{children:ve(t,m,w).slice(O*f,O*f+f).map((function(e,t){return Object(r.jsx)(ma,{wr:e,official:n,orderBy:w,useLiveDuration:i,history:v,onClickHistory:S},t)}))}),Object(r.jsx)(H.a,{children:a.totalTime>0&&Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(ja,{align:"right",colSpan:n?1:2,children:"Total Time"}),Object(r.jsx)(ja,{children:Object(r.jsx)(J.a,{title:E.a.duration(a.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)("span",{children:Ye(a.totalTime,"tm2")})})}),Object(r.jsx)(ja,{colSpan:n?5:3})]})})]})})},Oa=Object(mt.a)((function(e){var t=e.labels,a=e.series,n=(e.title,"dark"===e.theme.palette.type);return Object(r.jsx)(ht.a,{options:{xaxis:{categories:t},legend:{show:!1},dataLabels:{enabled:!1},chart:{toolbar:{show:!1},foreColor:n?"white":"black"},tooltip:{theme:n?"dark":"light"},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{bar:{horizontal:!0}}},series:a,type:"bar",height:"800"})})),xa=a(260),pa=[],ga=[],ya=E()(),va=E()("2020-07-01"),ka=va.clone(),wa={0:"Winter",1:"Spring",2:"Summer",3:"Fall"};ka.diff(ya)<0;){var Sa=wa[Math.floor(ka.month()/3)],Da=ka.format("YYYY");-1===ga.indexOf(Da)&&ga.push(Da),pa.push(Object(r.jsxs)(xa.a,{value:"campaign/".concat(Sa,"-").concat(Da).toLowerCase(),children:[Sa," ",Da]},pa.length)),ka.add(3,"months")}pa.reverse(),[].reverse(),ga.reverse(),pa.push(Object(r.jsx)(xa.a,{value:"campaign/training",children:"Training"},pa.length)),ga=ga.map((function(e){return Object(r.jsx)(xa.a,{value:e,children:e},e)}));var Ca=function(e){for(var t=[],a=e.toString()===va.year().toString(),n=a?va.clone():E()("".concat(e,"-01-01")),c=a?11:ya.month(),i=n.month();i<=c;++i){var o=n.format("MMMM");t.push(Object(r.jsxs)(xa.a,{value:"totd/".concat(o,"-").concat(e).toLowerCase(),children:[o," ",e]},t.length)),n.add(1,"month")}return t},Ta=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=t&&t.toString()===va.year().toString(),r=(a?va:ya).clone();return(e?"campaign/".concat(wa[Math.floor(ya.month()/3)],"-").concat(ya.year()):"totd/".concat(r.format("MMMM"),"-").concat(t||ya.year())).toLowerCase()},Ba=function(e){return 1===e?"":"s"},za=function(e,t){var a=t.diff(e,"seconds"),r=t.diff(e,"hours");if(a>0){var n=t.diff(e,"minutes")-60*r;return"set after ".concat(r," hour").concat(Ba(r)," and ").concat(n," minute").concat(Ba(n))}var c=-r,i=-t.diff(e,"minutes")-60*c;return"set before ".concat(c," hour").concat(Ba(c)," and ").concat(i," minute").concat(Ba(i))},Ra=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),Na=function(e){var t=e.campaign,a=e.onChangeCampaign,n=e.onChangeYear,i=e.isOfficial,o=e.year,s=N(),d=c.a.useState(void 0),j=Object(l.a)(d,2),u=j[0],b=j[1],h=c.a.useState("leaderboard"),m=Object(l.a)(h,2),f=m[0],O=m[1],x=c.a.useCallback((function(e){O(e.target.value)}),[O]);c.a.useEffect((function(){b(void 0),wt.request("trackmania",t).then((function(e){var t,a=[],r=Object(be.a)(e.tracks);try{for(r.s();!(t=r.n()).done;){var n,c=t.value,i=Object(be.a)(c.wrs);try{var o=function(){var t=n.value,r=Wt()(t.date),i=e.isOfficial?void 0:Wt()().tz("Europe/Paris").set({year:e.year,month:e.month-1,date:c.monthDay,hour:19,minute:0,second:0}).utc(),o=e.isOfficial?void 0:za(i,r),s=t===c.wrs[c.wrs.length-1],l=s&&(c.history||[]).length>1?c.history:void 0;l&&!e.isOfficial&&l.forEach((function(e){var t=Wt()(e.date);e.setAfter=za(i,t),e.pastMinutes=t.diff(i,"minutes")})),a.push(Object(q.a)(Object(q.a)({track:{id:c.id,name:c.name.replace(/(\$[0-9a-fA-F]{3}|\$[WNOITSGZBEMwnoitsgzbem]{1})/g,""),monthDay:c.monthDay,isFirst:t===c.wrs[0],isLast:s,records:c.wrs.length,history:l}},t),{},{zone:(t.user.zone[2]?t.user.zone[2]:t.user.zone[0]).name,setAfter:o}))};for(i.s();!(n=i.n()).done;)o()}catch(l){i.e(l)}finally{i.f()}}}catch(l){r.e(l)}finally{r.f()}e.tracks=a,s.current&&b(e)})).catch((function(e){console.log(e),s.current&&b(null)}))}),[s,t]);var p=f.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard"),g=Ra();return Object(r.jsxs)(r.Fragment,{children:[i?Object(r.jsxs)(Yt.a,{className:g.formControl,children:[Object(r.jsx)(It.a,{children:"Campaign"}),Object(r.jsx)(Ft.a,{value:t,onChange:a,children:pa})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Yt.a,{className:g.formControl,children:[Object(r.jsx)(It.a,{children:"Year"}),Object(r.jsx)(Ft.a,{value:o,onChange:n,children:ga})]}),Object(r.jsxs)(Yt.a,{className:g.formControl,children:[Object(r.jsx)(It.a,{children:"Month"}),Object(r.jsx)(Ft.a,{value:t,onChange:a,children:Ca(o)})]})]}),null===u&&Object(r.jsx)(ut,{data:"No data."}),void 0===u&&Object(r.jsx)(Oe.a,{}),Object(r.jsx)(K.a,{container:!0,direction:"column",justify:"center",children:void 0!==u&&null!==u&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(K.a,{item:!0,xs:12,children:Object(r.jsx)(fa,{data:u.tracks,stats:u.stats,official:u.isOfficial})}),Object(r.jsxs)(K.a,{item:!0,xs:12,className:g.padTop,children:[Object(r.jsxs)(Yt.a,{className:g.formControl,children:[Object(r.jsx)(It.a,{children:"Rankings Type"}),Object(r.jsxs)(Ft.a,{value:f,onChange:x,children:[Object(r.jsx)(xa.a,{value:"leaderboard",children:"Live"}),Object(r.jsx)(xa.a,{value:"uniqueLeaderboard",children:"Unique"}),Object(r.jsx)(xa.a,{value:"historyLeaderboard",children:"Total"})]})]}),Object(r.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(r.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(Kt,{data:u[f],hasDuration:u.isOfficial&&"uniqueLeaderboard"!==f})}),Object(r.jsx)(K.a,{item:!0,xs:12,md:6,className:g.padTop,children:Object(r.jsxs)(K.a,{container:!0,direction:"column",justify:"center",children:[Object(r.jsx)(K.a,{item:!0,xs:12,children:"uniqueLeaderboard"===f?Object(r.jsx)(Oa,{title:"WRs",labels:u[f].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:u[f].slice(0,20).map((function(e){return e.wrs}))}]}):Object(r.jsx)(ft,{title:"WRs",labels:u[f].map((function(e){return e.user.name})),series:u[f].map((function(e){return e.wrs}))})}),Object(r.jsx)(K.a,{item:!0,xs:12,className:g.padTop,children:"uniqueLeaderboard"===f?Object(r.jsx)(Oa,{title:"WRs",labels:u[p].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})).slice(0,20),series:[{name:"Unique WRs by Zone",data:u[p].slice(0,20).map((function(e){return e.wrs}))}]}):Object(r.jsx)(ft,{title:"WRs by Zone",labels:u[p].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:u[p].map((function(e){return e.wrs}))})})]})})]})]})]})})]})},Pa=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),La=function(){var e=N(),t=c.a.useState(void 0),a=Object(l.a)(t,2),n=a[0],i=a[1],o=c.a.useState("rankings/campaign"),s=Object(l.a)(o,2),d=s[0],j=s[1],u=c.a.useState("leaderboard"),b=Object(l.a)(u,2),h=b[0],m=b[1],f=c.a.useCallback((function(e){j(e.target.value)}),[j]),O=c.a.useCallback((function(e){m(e.target.value)}),[m]);c.a.useEffect((function(){i(void 0),wt.request("trackmania",d).then((function(t){e.current&&i(t)})).catch((function(t){console.error(t),e.current&&i(null)}))}),[i,d,e]);var x=h.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard"),p=Pa();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Yt.a,{className:p.formControl,children:[Object(r.jsx)(It.a,{children:"Campaign"}),Object(r.jsxs)(Ft.a,{value:d,onChange:f,children:[Object(r.jsx)(xa.a,{value:"rankings/campaign",children:"Official"}),Object(r.jsx)(xa.a,{value:"rankings/totd",children:"TOTD"}),Object(r.jsx)(xa.a,{value:"rankings/combined",children:"Combined"})]})]}),Object(r.jsxs)(Yt.a,{className:p.formControl,children:[Object(r.jsx)(It.a,{children:"Rankings Type"}),Object(r.jsxs)(Ft.a,{value:h,onChange:O,children:[Object(r.jsx)(xa.a,{value:"leaderboard",children:"Live"}),Object(r.jsx)(xa.a,{value:"uniqueLeaderboard",children:"Unique"}),Object(r.jsx)(xa.a,{value:"historyLeaderboard",children:"Total"})]})]}),null===n&&Object(r.jsx)(ut,{data:"No data."}),void 0===n&&Object(r.jsx)(Oe.a,{}),null!==n&&void 0!==n&&Object(r.jsxs)(K.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(r.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(Kt,{data:n[h],hasDuration:"rankings/campaign"===d&&"uniqueLeaderboard"!==h})}),Object(r.jsx)(K.a,{item:!0,xs:12,md:6,children:Object(r.jsxs)(K.a,{container:!0,direction:"column",justify:"center",children:[Object(r.jsx)(K.a,{item:!0,xs:12,className:p.padTop,children:"uniqueLeaderboard"===h?Object(r.jsx)(Oa,{title:"WRs",labels:n[h].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:n[h].slice(0,20).map((function(e){return e.wrs}))}]}):Object(r.jsx)(ft,{title:"WRs",labels:n[h].map((function(e){return e.user.name})),series:n[h].map((function(e){return e.wrs}))})}),Object(r.jsx)(K.a,{item:!0,xs:12,className:p.padTop,children:"uniqueLeaderboard"===h?Object(r.jsx)(Oa,{title:"WRs",labels:n[x].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})).slice(0,20),series:[{name:"Unique WRs by Zone",data:n[x].slice(0,20).map((function(e){return e.wrs}))}]}):Object(r.jsx)(ft,{title:"WRs by Zone",labels:n[x].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:n[x].map((function(e){return e.wrs}))})})]})})]})]})},Ma=Object(me.a)((function(e){var t=e.match,a=c.a.useState(0),n=Object(l.a)(a,2),i=n[0],o=n[1],s=c.a.useState(Ta(0===i)),d=Object(l.a)(s,2),j=d[0],u=d[1],b=c.a.useState(E()().year()),h=Object(l.a)(b,2),m=h[0],f=h[1],O=t.params[0];c.a.useEffect((function(){o(0)}),[O]);var x=c.a.useCallback((function(e){f(e.target.value),u(Ta(!1,e.target.value))}),[f]),p=c.a.useCallback((function(e){u(e.target.value)}),[u]);return Object(r.jsxs)($,{children:[Object(r.jsxs)(F.a,{children:[Object(r.jsxs)(pe.a,{value:i,onChange:function(e,t){o(t),u(Ta(0===t,m))},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[Object(r.jsx)(xe.a,{label:"Campaign"}),Object(r.jsx)(xe.a,{label:"Track of the Day"}),Object(r.jsx)(xe.a,{label:"Rankings"})]}),Object(r.jsx)(B.a,{component:"div",role:"tabpanel",children:Object(r.jsxs)(fe.a,{p:3,children:[(0===i||1===i)&&Object(r.jsx)(Na,{campaign:j,onChangeCampaign:p,onChangeYear:x,isOfficial:0===i,year:m}),2===i&&Object(r.jsx)(La,{})]})})]}),Object(r.jsx)(kt,{})]})})),qa=Object(b.a)((function(e){return{views:{marginTop:e.spacing(5)}}})),Ua=function(){var e=c.a.useReducer.apply(c.a,Object(s.a)(te)),t=Object(l.a)(e,2),a=t[0],n=t[1],i=c.a.useMemo((function(){return Object(O.a)({palette:{primary:{light:m.a[300],main:m.a[500],dark:m.a[700]},secondary:{light:f.a[300],main:f.a[500],dark:f.a[700]},error:{main:m.a.A400},type:a.darkMode.enabled?"dark":"light"}})}),[a.darkMode.enabled]),o=qa(),b=c.a.useMemo((function(){return{state:a,dispatch:n}}),[a,n]);return Object(r.jsxs)(h.a,{theme:i,children:[Object(r.jsx)(u.a,{}),Object(r.jsx)(ae.Provider,{value:b,children:Object(r.jsxs)(d.a,{basename:"/trackmania-records",children:[Object(r.jsx)(M,{}),Object(r.jsx)("div",{className:o.views,children:Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.a,{exact:!0,from:"/",to:"/trackmania"}),Object(r.jsx)(j.a,{exact:!0,from:"/tm",to:"/trackmania"}),Object(r.jsx)(j.a,{exact:!0,from:"/wii",to:"/tmwii"}),Object(r.jsx)(j.a,{exact:!0,from:"/tmo",to:"/original"}),Object(r.jsx)(j.a,{exact:!0,from:"/tmn",to:"/nations"}),Object(r.jsx)(j.a,{exact:!0,from:"/tms",to:"/sunrise"}),Object(r.jsx)(j.a,{exact:!0,from:"/tmnf",to:"/tmnforever"}),Object(r.jsx)(j.b,{exact:!0,path:"/trackmania",component:Ma}),Object(r.jsx)(j.b,{exact:!0,path:"/(nations|original|sunrise|tm2|tmnforever|tmwii|united)/:date?",component:Dt}),Object(r.jsx)(j.b,{exact:!0,path:"/about",component:de}),Object(r.jsx)(j.b,{exact:!0,path:"/replay",component:qt}),Object(r.jsx)(j.b,{component:Ut})]})})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(r.jsx)(Ua,{}),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[179,1,2]]]);
//# sourceMappingURL=main.ce8f5594.chunk.js.map