(window["webpackJsonptmx-records"]=window["webpackJsonptmx-records"]||[]).push([[0],{120:function(e,t,a){e.exports=a(144)},144:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(11),c=a.n(o),l=a(112),i=a(18),u=a(41),s=a(38),m=a(217),d=a(96),f=a(216),p=a(71),b=a(215),E=a(111),h=a(196),g=a(195),y=a(24),v=a(221),w=a(198),k=a(199),O=a(190),x=a(192),j=a(194),P=a(224),D=a(197),S=a(49),B=a(99),T=a.n(B),N=function(){var e=n.a.useRef(!1);return n.a.useEffect((function(){return e.current=!0,function(){return e.current=!1}}),[]),e},M=Object(d.a)((function(e){return{root:{paddingBottom:e.spacing(8)},list:{width:e.spacing(25)},menuButton:{marginLeft:-12,marginRight:20},drawer:{width:240,flexShrink:0},appBar:{zIndex:e.zIndex.drawer+1},flex:{flex:1},active:{color:e.palette.primary.main}}})),C=[{title:"404 - Page Not Found",link:null,inDrawer:!1},{title:"tmx-records",link:"/",inDrawer:!1},{title:"TrackMania 2",link:"/tm2",inDrawer:!0,default:!0},{title:"Nations Forever",link:"/tmnforever",inDrawer:!0},{title:"United",link:"/united",inDrawer:!0},{title:"Nations ESWC",link:"/nations",inDrawer:!0},{title:"Sunrise",link:"/sunrise",inDrawer:!0},{title:"Original",link:"/original",inDrawer:!0},{title:"Replay Inspection",link:"/replay",inDrawer:!1},{title:"About",link:"/about",inDrawer:!1}],U=Object(s.g)((function(e){var t,a=e.location,r=n.a.useState(!1),o=Object(i.a)(r,2),c=o[0],l=o[1],s=n.a.useMemo((function(){return C.find((function(e){return e.link===a.pathname||null!==e.link&&a.pathname.startsWith(e.link+"/")}))||C[0]}),[a]);t=s.title,n.a.useEffect((function(){document.title=t+" - "+document.location.host}),[t]);var m=function(e){return function(){l(e)}},d=M(),f=n.a.createElement("div",{className:d.list},n.a.createElement(O.a,null,n.a.createElement(x.a,{button:!0,key:0,component:u.b,to:"/"},n.a.createElement(j.a,{primary:"TMX Records"}))),n.a.createElement(g.a,null),n.a.createElement(O.a,null,C.filter((function(e){return e.inDrawer})).map((function(e,t){return n.a.createElement(x.a,{button:!0,key:t,component:u.b,to:e.link,className:e.title===s.title?d.active:void 0},n.a.createElement(j.a,{primary:e.title}))})),n.a.createElement(g.a,null),n.a.createElement(O.a,null,n.a.createElement(x.a,{button:!0,key:0,component:u.b,to:"/about"},n.a.createElement(j.a,{primary:"About"})))));return n.a.createElement("div",{className:d.root},n.a.createElement(h.a,{className:d.appBar,position:"fixed"},n.a.createElement(D.a,null,n.a.createElement(v.a,{lgUp:!0},n.a.createElement(w.a,{className:d.menuButton,onClick:m(!0),color:"inherit"},n.a.createElement(T.a,null))),n.a.createElement(S.a,{variant:"h6",color:"inherit"},n.a.createElement(k.a,{component:u.b,to:"/",color:"inherit",underline:"none"},"TMX Records")))),n.a.createElement(v.a,{lgUp:!0,implementation:"css"},n.a.createElement(P.a,{open:c,onClose:m(!1),onOpen:m(!0),variant:"temporary"},n.a.createElement("div",{tabIndex:0,role:"button",onClick:m(!1),onKeyDown:m(!1)},f))),n.a.createElement(v.a,{mdDown:!0,implementation:"css"},n.a.createElement(y.a,{variant:"permanent"},n.a.createElement("div",{tabIndex:0,role:"button"},f))))})),R=a(23),z=a.n(R),q=a(203),I=a(209),A=a(208),_=a(145),F=a(225),L=a(204),W=a(207),K=a(202),X=a(205),Y=a(206),G=a(222),J=a(201),H=function(e){var t=e.children;return n.a.createElement(J.a,{container:!0},n.a.createElement(J.a,{item:!0,xs:!1,md:1,lg:2}),n.a.createElement(J.a,{item:!0,xs:12,md:10,lg:9},t))},$=a(35),Q=a(65),V=a(66);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var ee={darkMode:new(function(){function e(){Object(Q.a)(this,e),this.enabled="true"===localStorage.getItem("dark_mode")}return Object(V.a)(e,[{key:"toggle",value:function(){return this.enabled=!this.enabled,localStorage.setItem("dark_mode",this.enabled.toString()),this}}]),e}())},te=[function(e,t){switch(t.action){case"toggleDarkMode":return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach((function(t){Object($.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{darkMode:e.darkMode.toggle()});default:throw new Error("Unknown action type.")}},ee],ae=n.a.createContext(ee),re=Object(d.a)((function(e){return{aboutBox:{padding:e.spacing(3)}}})),ne=["master","api","gh-pages"],oe={whiteSpace:"nowrap"},ce=function(e){return n.a.createElement(K.a,Object.assign({size:"small"},e))},le=function(){return n.a.createElement("div",{style:{paddingTop:"50px"}})},ie=function(){var e=N(),t=n.a.useContext(ae),a=t.state.darkMode,r=t.dispatch,o=n.a.useState([]),c=Object(i.a)(o,2),l=c[0],u=c[1];n.a.useEffect((function(){var t=function(t){console.error(t),e.current&&u(void 0)};Promise.all(ne.map((function(e){return fetch("https://api.github.com/repos/NeKzor/tmx-records/commits/"+e)}))).then((function(a){Promise.all(a.map((function(e){return e.json()}))).then((function(t){console.log("fetched"),e.current&&u(t.map((function(e){return{sha:e.sha,author:e.author,message:e.commit.message,date:e.commit.author.date}})))})).catch(t)})).catch(t)}),[e]);var s=re();return n.a.createElement(H,null,n.a.createElement(_.a,{className:s.aboutBox},n.a.createElement(S.a,{component:"h2",variant:"h5"},"TrackMania Exchange Records & Statistics"),n.a.createElement("br",null),n.a.createElement(S.a,{variant:"body1"},"This web app mirrors TrackMania Exchange Nadeo records."),n.a.createElement(S.a,{variant:"body1"},"Additionally it ranks players based on how many world records they hold and how long their records have been lasting."),n.a.createElement(le,null),n.a.createElement(S.a,{variant:"h5"},"Last Update"),n.a.createElement("br",null),void 0===l?n.a.createElement(S.a,{variant:"body1"},"Unable to fetch status from GitHub."):0===l.length?n.a.createElement(q.a,{className:s.progress}):n.a.createElement("div",{style:{overflowX:"auto"}},n.a.createElement(L.a,{size:"small"},n.a.createElement(X.a,null,n.a.createElement(Y.a,null,n.a.createElement(K.a,{padding:"default"},n.a.createElement(S.a,{variant:"body1"},"Branch")),n.a.createElement(K.a,{padding:"default"},n.a.createElement(S.a,{variant:"body1"},"Date")),n.a.createElement(K.a,{padding:"default"},n.a.createElement(S.a,{variant:"body1"},"Author")),n.a.createElement(K.a,{padding:"default"},n.a.createElement(S.a,{variant:"body1"},"Commit")))),n.a.createElement(W.a,null,l.map((function(e,t){var a=ne[t];return n.a.createElement(Y.a,{tabIndex:-1,key:t,style:oe},n.a.createElement(ce,{align:"left"},n.a.createElement(k.a,{color:"inherit",rel:"noopener",href:"https://github.com/NeKzor/tmx-records/tree/"+a},a)),n.a.createElement(ce,{align:"left",style:oe},n.a.createElement(G.a,{title:z()(e.date).toString()},n.a.createElement("span",null,z()(e.date).from()))),n.a.createElement(ce,{align:"left"},e.author?n.a.createElement(k.a,{color:"inherit",rel:"noopener",href:e.author.html_url},e.author.login):"n/a"),n.a.createElement(ce,{align:"left",style:oe},n.a.createElement(G.a,{title:e.message},n.a.createElement(k.a,{color:"inherit",rel:"noopener",href:"https://github.com/NeKzor/tmx-records/commit/"+e.sha},e.sha))))}))))),n.a.createElement(le,null),n.a.createElement(S.a,{variant:"h5"},"Theme Settings"),n.a.createElement("br",null),n.a.createElement(A.a,{row:!0},n.a.createElement(I.a,{control:n.a.createElement(F.a,{checked:a.enabled,onChange:function(){r({action:"toggleDarkMode"})},color:"primary"}),label:"Dark Mode"})),n.a.createElement(le,null),n.a.createElement(S.a,{variant:"h5"},"Credits"),n.a.createElement("br",null),n.a.createElement(k.a,{rel:"noopener",href:"http://www.tm-exchange.com"},"tm-exchange.com"),n.a.createElement("br",null),n.a.createElement(k.a,{rel:"noopener",href:"https://tm.mania-exchange.com"},"tm.mania-exchange.com")))},ue=a(48),se=a.n(ue),me=a(68),de=a(110),fe=a(219),pe=a(214),be=a(211),Ee=a(212),he=a(220),ge=a(213),ye=a(108),ve=a.n(ye),we=a(223),ke=function(e,t){return-1!==t.indexOf(".")?t.split(".").filter((function(e){return e})).reduce((function(e,t){return e&&e[t]}),e):e[t]},Oe=function(e){return["nations","sunrise","original"].includes(e)?"http":"https"},xe=function(e){return"tm2"===e?{trackUrl:function(e){return"https://tm.mania-exchange.com/tracks/".concat(e)},imageUrl:function(e){return"https://tm.mania-exchange.com/tracks/screenshot/normal/".concat(e)},replayUrl:function(e){return"https://tm.mania-exchange.com/replays/download/".concat(e)},userUrl:function(e){return"https://tm.mania-exchange.com/user/profile/".concat(e)}}:{trackUrl:function(t){return"".concat(Oe(e),"://").concat(e,".tm-exchange.com/main.aspx?action=trackshow&id=").concat(t)},imageUrl:function(t){return"".concat(Oe(e),"://").concat(e,".tm-exchange.com/getclean.aspx?action=trackscreenscreens&id=").concat(t)},replayUrl:function(t){return"".concat(Oe(e),"://").concat(e,".tm-exchange.com/get.aspx?action=recordgbx&id=").concat(t)},userUrl:function(t){return"".concat(Oe(e),"://").concat(e,".tm-exchange.com/main.aspx?action=usershow&id=").concat(t)}}};function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Pe=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],De=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return n.a.createElement(X.a,null,n.a.createElement(Y.a,null,Pe.map((function(e){return n.a.createElement(K.a,{key:e.id,align:e.align,padding:"default",sortDirection:a===e.id&&t},!0===e.sortable&&n.a.createElement(G.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},n.a.createElement(we.a,{active:a===e.id,direction:t,onClick:(o=e.id,c=e.id2,function(e){r(e,o,c)})},e.label)),!1===e.sortable&&e.label);var o,c}))))},Se=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Be={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Te={whiteSpace:"nowrap"},Ne={padding:"7px 0px 7px 16px"},Me=function(e){return n.a.createElement(K.a,Object.assign({style:Ne},e))},Ce=function(e){var t=e.data,a=e.game,r=n.a.useState(Be),o=Object(i.a)(r,2),c=o[0],l=c.order,u=c.orderBy,s=c.thenBy,m=c.rowsPerPage,d=c.page,f=o[1],p=Se();return n.a.createElement("div",{className:p.root},n.a.createElement(L.a,{size:"small"},n.a.createElement(De,{order:l,orderBy:u,onRequestSort:function(e,t,a){var r=t,n=a;f((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(a,!0).forEach((function(t){Object($.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))}}),n.a.createElement(W.a,null,function(e,t,a,r){var n=function(e,t){var n=ke(e,a),o=ke(t,a);return o<n?-1:o>n?1:(n=ke(e,r),(o=ke(t,r))<n?-1:o>n?1:0)},o="desc"===t?function(e,t){return n(e,t)}:function(e,t){return-n(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=o(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))}(t,l,u,s).slice(d*m,d*m+m).map((function(e){return n.a.createElement(Y.a,{tabIndex:-1,key:e.user.id},n.a.createElement(Me,{align:"left"},n.a.createElement(k.a,{style:Te,color:"inherit",href:xe(a).userUrl(e.user.id),rel:"noreferrer",target:"_blank"},e.user.name)),n.a.createElement(Me,{align:"left"},e.wrs),n.a.createElement(Me,{align:"left"},e.duration," day",1===e.duration?"":"s"))})))))},Ue=a(72),Re=a.n(Ue),ze=a(218);function qe(e,t){if("Stunts"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0))return e+" pts.";if("tm2"!==t){var a=(e/=10)%100,r=Math.floor(e/100),n=r%60,o=Math.floor(r/60);return(o>0?o+":":"")+(n<10&&o>0?"0"+n:n)+"."+(a<10?"0"+a:a)}var c=e%1e3,l=Math.floor(e/1e3),i=l%60,u=Math.floor(l/60);return(u>0?u+":":"")+(i<10&&u>0?"0"+i:i)+"."+(c<100?c<10?"00"+c:"0"+c:c)}var Ie=Object(ze.a)().domain([0,24,336,1440]).range(["#2eb82e","#258e25","#cca300","#e67300"]);function Ae(e){var t=z()().diff(z()(e),"hours");return t<=1440?Ie(t):void 0}function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(a,!0).forEach((function(t){Object($.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Le=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],We=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return n.a.createElement(X.a,null,n.a.createElement(Y.a,null,Le.map((function(e){return n.a.createElement(K.a,{key:e.id,align:e.align,padding:"default",sortDirection:a===e.id&&t},!0===e.sortable&&n.a.createElement(G.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},n.a.createElement(we.a,{active:a===e.id,direction:t,onClick:(o=e.id,function(e){r(e,o)})},e.label)),!1===e.sortable&&e.label);var o}))))},Ke=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Xe={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},Ye={whiteSpace:"nowrap"},Ge={padding:"7px 0px 7px 16px"},Je=function(e){return n.a.createElement(K.a,Object.assign({style:Ge},e))},He=function(e){var t=e.data,a=e.game,r=e.stats,o=e.useLiveDuration,c=n.a.useState(Xe),l=Object(i.a)(c,2),u=l[0],s=u.order,m=u.orderBy,d=u.rowsPerPage,f=u.page,p=l[1],b=Ke();return n.a.createElement("div",{className:b.root},n.a.createElement(L.a,{size:"small"},n.a.createElement(We,{order:s,orderBy:m,onRequestSort:function(e,t){var a=t;p((function(e){return Fe({},e,{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),n.a.createElement(W.a,null,function(e,t,a){var r=function(e,t){var r=ke(e,a),n=ke(t,a);return n<r?-1:n>r?1:0},n="desc"===t?function(e,t){return r(e,t)}:function(e,t){return-r(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))}(t,s,m).slice(f*d,f*d+d).map((function(e){return n.a.createElement(Y.a,{tabIndex:-1,key:"".concat(e.track.id,"-").concat(e.user.id)},(e.track.isFirst||"track.name"!==m)&&n.a.createElement(Je,{style:Ye,rowSpan:"track.name"!==m?1:e.track.records,align:"left"},n.a.createElement(k.a,{color:"inherit",href:xe(a).trackUrl(e.track.id),rel:"noreferrer",target:"_blank"},e.track.name)),n.a.createElement(Je,{align:"left"},qe(e.score,a,e.track.type)),n.a.createElement(Je,{align:"left"},n.a.createElement(k.a,{style:Ye,color:"inherit",href:xe(a).userUrl(e.user.id),rel:"noreferrer",target:"_blank"},e.user.name)),n.a.createElement(Je,{align:"left"},n.a.createElement(G.a,{title:n.a.createElement(Re.a,{fromNow:!0},e.date),placement:"bottom-end",enterDelay:300},n.a.createElement(Re.a,{style:Fe({color:Ae(e.date)},Ye),format:"YYYY-MM-DD"},e.date))),n.a.createElement(Je,{align:"left"},n.a.createElement(G.a,{title:"in days",placement:"bottom-end",enterDelay:300},o?n.a.createElement(Re.a,{style:Ye,diff:e.date,unit:"days"}):n.a.createElement("span",null,e.duration))))}))),n.a.createElement(W.a,null,r.totalTime>0&&n.a.createElement(Y.a,null,n.a.createElement(Je,{align:"right"},"Total Time"),n.a.createElement(Je,null,n.a.createElement(G.a,{title:z.a.duration(r.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300},n.a.createElement("span",null,qe(r.totalTime,a)))),n.a.createElement(Je,{colSpan:3})),r.totalPoints>0&&n.a.createElement(Y.a,null,n.a.createElement(Je,{align:"right"},"Total Points"),n.a.createElement(Je,null,n.a.createElement("span",null,qe(r.totalPoints,a,"Stunts"))),n.a.createElement(Je,{colSpan:3})))))},$e=function(e){var t=e.data,a=e.props;return n.a.createElement(S.a,Object.assign({variant:"h5",gutterBottom:!0,style:{padding:"50px 0px 50px 50px"}},a),t)},Qe=a(105),Ve=a.n(Qe),Ze=a(210),et=Object(Ze.a)((function(e){var t=e.labels,a=e.series,r=e.title,o="dark"===e.theme.palette.type;return n.a.createElement(Ve.a,{options:{labels:t,legend:{show:!1},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0},value:{show:!0,color:o?"white":"black"},total:{show:!0,label:r,color:o?"white":"black"}}}}}},series:a,type:"donut",height:"400"})})),tt=new(function(){function e(){Object(Q.a)(this,e)}return Object(V.a)(e,[{key:"request",value:function(){var e=Object(me.a)(se.a.mark((function e(t,a){var r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/NeKzor/tmx-records/api/".concat(t,"/").concat(a||"latest",".json"));case 2:if(r=e.sent,console.log("GET ".concat(r.url," (").concat(r.status,")")),!r.ok){e.next=10;break}return e.next=7,r.json();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=[];case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}());function at(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?at(a,!0).forEach((function(t){Object($.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):at(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var nt=Object(d.a)((function(e){return{fab:{margin:0,top:"auto",right:30,bottom:30,left:"auto",position:"fixed"},padTop:{paddingTop:"70px"}}})),ot=Object(de.a)((function(e){var t=e.match,a=N(),r=n.a.useState(void 0),o=Object(i.a)(r,2),c=o[0],l=o[1],u=n.a.useState("tm2"),s=Object(i.a)(u,2),m=s[0],d=s[1],f=n.a.useState(0),p=Object(i.a)(f,2),b=p[0],E=p[1],h=t.params[0],g=t.params.date,y=void 0===g||"latest"===g;n.a.useEffect((function(){E(0),l(void 0)}),[h]),n.a.useEffect((function(){Object(me.a)(se.a.mark((function e(){var t,r,n,o,c,i,u;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt.request(h,g);case 2:if(!(t=e.sent)[0]||!t[0].tracks[0].wrs){e.next=24;break}for(r=!0,n=!1,o=void 0,e.prev=7,c=function(){var e=u.value;void 0===e.stats.totalPoints&&(e.stats.totalTime=e.tracks.filter((function(e){return"Stunts"!==e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0),e.stats.totalPoints=e.tracks.filter((function(e){return"Stunts"===e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0));var t=[],a=!0,r=!1,n=void 0;try{for(var o,c=e.tracks[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value,i=!0,s=!1,m=void 0;try{for(var d,f=l.wrs[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p=d.value,b=y?z()().diff(z()(p.date),"d"):p.duration;t.push(rt({track:{id:l.id,name:l.name,type:l.type,isFirst:p===l.wrs[0],records:l.wrs.length}},p,{duration:b}))}}catch(E){s=!0,m=E}finally{try{i||null==f.return||f.return()}finally{if(s)throw m}}}}catch(E){r=!0,n=E}finally{try{a||null==c.return||c.return()}finally{if(r)throw n}}e.tracks=t,y&&e.leaderboard.forEach((function(t,a){e.leaderboard[a].duration=e.tracks.filter((function(e){return e.user.id===t.user.id})).map((function(e){return e.duration})).reduce((function(e,t){return e+t}),0)}))},i=t[Symbol.iterator]();!(r=(u=i.next()).done);r=!0)c();e.next=16;break;case 12:e.prev=12,e.t0=e.catch(7),n=!0,o=e.t0;case 16:e.prev=16,e.prev=17,r||null==i.return||i.return();case 19:if(e.prev=19,!n){e.next=22;break}throw o;case 22:return e.finish(19);case 23:return e.finish(16);case 24:if(a.current){e.next=26;break}return e.abrupt("return");case 26:d(h),l(t);case 28:case"end":return e.stop()}}),e,null,[[7,12,16,24],[17,,19,23]])})))()}),[a,h,g,y]);var v=nt();return n.a.createElement(H,null,n.a.createElement(_.a,null,void 0===c?n.a.createElement(be.a,null):0===c.length?n.a.createElement($e,{data:"No data."}):n.a.createElement(n.a.Fragment,null,c.length>1&&n.a.createElement(he.a,{value:b,onChange:function(e,t){E(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},c.map((function(e){return n.a.createElement(Ee.a,{label:e.name,key:e.name})}))),n.a.createElement(S.a,{component:"div",role:"tabpanel"},n.a.createElement(fe.a,{p:3},n.a.createElement(J.a,{container:!0,direction:"column",justify:"center"},n.a.createElement(J.a,{item:!0,xs:12},n.a.createElement(He,{data:c[b].tracks,game:m,stats:c[b].stats,useLiveDuration:y})),n.a.createElement(J.a,{item:!0,xs:12,className:v.padTop},n.a.createElement(J.a,{container:!0,direction:"row",justify:"center",alignContent:"center"},n.a.createElement(J.a,{item:!0,xs:12,md:6},n.a.createElement(Ce,{data:c[b].leaderboard,game:h})),n.a.createElement(J.a,{item:!0,xs:12,md:6,className:v.padTop},n.a.createElement(J.a,{container:!0,direction:"column",justify:"center"},n.a.createElement(J.a,{item:!0,xs:12},n.a.createElement(et,{title:"WRs",labels:c[b].leaderboard.map((function(e){return e.user.name})),series:c[b].leaderboard.map((function(e){return e.wrs}))})),n.a.createElement(J.a,{item:!0,xs:12,className:v.padTop},n.a.createElement(et,{title:"Duration",labels:c[b].leaderboard.map((function(e){return e.user.name})),series:c[b].leaderboard.map((function(e){return e.duration}))}))))))))))),n.a.createElement(ge.a,{in:void 0!==c&&0!==c.length,timeout:1e3},n.a.createElement(pe.a,{title:"Jump to top",color:"primary",className:v.fab,onClick:function(){!function e(){var t=document.documentElement.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/5))}()}},n.a.createElement(ve.a,null))))})),ct=a(109),lt=a.n(ct),it=function(){var e=N(),t=n.a.useState({}),a=Object(i.a)(t,2),r=a[0],o=a[1],c=n.a.useCallback((function(t){var a=t.target.files[0];if(a){var r=new FileReader;r.file=a,r.onload=function(t){var a=t.target.result,r=window,n=r.Buffer,c=r.Replay,l=window.replay=c.default().read(n.from(a),{parseGhost:!0});if(e){!function e(t){Object.keys(t).forEach((function(a){"_view"===a?delete t._view:"object"===typeof t[a]&&e(t[a])}))}(l),o(l)}},r.readAsArrayBuffer(a)}}),[e,o]);return n.a.useEffect((function(){return document.querySelector("#fileinput").addEventListener("change",c),function(){return document.querySelector("#fileinput").removeEventListener("change",c)}}),[c]),n.a.createElement(H,null,n.a.createElement(_.a,null,n.a.createElement("input",{type:"file",id:"fileinput"}),n.a.createElement(lt.a,{name:"replay",style:{fontSize:"14px"},src:r,theme:"solarized",displayDataTypes:!1,displayObjectSize:!1,enableClipboard:!1})))},ut=function(){return n.a.createElement(H,null,n.a.createElement(_.a,null,n.a.createElement($e,{data:"Page not found :("})))},st=Object(d.a)((function(e){return{views:{marginTop:e.spacing(5)}}})),mt=function(){var e=n.a.useReducer.apply(n.a,Object(l.a)(te)),t=Object(i.a)(e,2),a=t[0],r=t[1],o=n.a.useMemo((function(){return Object(E.a)({palette:{primary:{light:p.a[300],main:p.a[500],dark:p.a[700]},secondary:{light:b.a[300],main:b.a[500],dark:b.a[700]},error:{main:p.a.A400},type:a.darkMode.enabled?"dark":"light"}})}),[a.darkMode.enabled]),c=st(),d=n.a.useMemo((function(){return{state:a,dispatch:r}}),[a,r]);return n.a.createElement(f.a,{theme:o},n.a.createElement(m.a,null),n.a.createElement(ae.Provider,{value:d},n.a.createElement(u.a,{basename:"/tmx-records"},n.a.createElement(U,null),n.a.createElement("div",{className:c.views},n.a.createElement(s.d,null,n.a.createElement(s.a,{exact:!0,from:"/",to:"/tm2"}),n.a.createElement(s.a,{exact:!0,from:"/tmo",to:"/original"}),n.a.createElement(s.a,{exact:!0,from:"/tmn",to:"/nations"}),n.a.createElement(s.a,{exact:!0,from:"/tms",to:"/sunrise"}),n.a.createElement(s.a,{exact:!0,from:"/tmnf",to:"/tmnforever"}),n.a.createElement(s.b,{exact:!0,path:"/(nations|original|sunrise|tm2|tmnforever|united)/:date?",component:ot}),n.a.createElement(s.b,{exact:!0,path:"/about",component:ie}),n.a.createElement(s.b,{exact:!0,path:"/replay",component:it}),n.a.createElement(s.b,{component:ut}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(mt,null),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[120,1,2]]]);
//# sourceMappingURL=main.8b26144a.chunk.js.map