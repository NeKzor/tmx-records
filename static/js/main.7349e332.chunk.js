(this["webpackJsonptrackmania-records"]=this["webpackJsonptrackmania-records"]||[]).push([[0],{134:function(e,t,a){e.exports=a(155)},155:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(14),o=a.n(l),c=a(25),i=a(9),m=a(47),u=a(46),s=a(233),d=a(109),f=a(232),p=a(85),E=a(86),b=a(123),h=a(210),g=a(209),y=a(29),v=a(238),k=a(157),w=a(212),x=a(205),D=a(241),O=a(208),j=a(242),S=a(211),T=a(58),B=a(111),C=a.n(B),P=function(){var e=n.a.useRef(!1);return n.a.useEffect((function(){return e.current=!0,function(){return e.current=!1}}),[]),e},z=Object(d.a)((function(e){return{root:{paddingBottom:e.spacing(8)},list:{width:e.spacing(25)},menuButton:{marginLeft:-12,marginRight:20},drawer:{width:240,flexShrink:0},appBar:{zIndex:e.zIndex.drawer+1},flex:{flex:1},active:{color:e.palette.primary.main}}})),N=[{title:"404 - Page Not Found",link:null,inDrawer:!1},{title:"trackmania-records",link:"/",inDrawer:!1},{title:"Trackmania",link:"/trackmania",inDrawer:!0,default:!0},{title:"Trackmania 2",link:"/tm2",inDrawer:!0,default:!0},{title:"Trackmania Wii",link:"/tmwii",inDrawer:!0,default:!0},{title:"Nations Forever",link:"/tmnforever",inDrawer:!0},{title:"United",link:"/united",inDrawer:!0},{title:"Nations ESWC",link:"/nations",inDrawer:!0},{title:"Replay Inspection",link:"/replay",inDrawer:!1},{title:"About",link:"/about",inDrawer:!1}],R=Object(u.g)((function(e){var t,a=e.location,r=n.a.useState(!1),l=Object(i.a)(r,2),o=l[0],c=l[1],u=n.a.useMemo((function(){return N.find((function(e){return e.link===a.pathname||null!==e.link&&a.pathname.startsWith(e.link+"/")}))||N[0]}),[a]);t=u.title,n.a.useEffect((function(){document.title=t+" - "+document.location.host}),[t]);var s=function(e){return function(){c(e)}},d=z(),f=n.a.createElement("div",{className:d.list},n.a.createElement(x.a,null,n.a.createElement(D.a,{button:!0,key:0,component:m.b,to:"/"},n.a.createElement(O.a,{primary:"Trackmania Records"}))),n.a.createElement(g.a,null),n.a.createElement(x.a,null,N.filter((function(e){return e.inDrawer})).map((function(e,t){return n.a.createElement(D.a,{button:!0,key:t,component:m.b,to:e.link,className:e.title===u.title?d.active:void 0},n.a.createElement(O.a,{primary:e.title}))})),n.a.createElement(g.a,null),n.a.createElement(x.a,null,n.a.createElement(D.a,{button:!0,key:0,component:m.b,to:"/replay"},n.a.createElement(O.a,{primary:"Replay Inspection"})),n.a.createElement(D.a,{button:!0,key:1,component:m.b,to:"/about"},n.a.createElement(O.a,{primary:"About"})))));return n.a.createElement("div",{className:d.root},n.a.createElement(h.a,{className:d.appBar,position:"fixed"},n.a.createElement(S.a,null,n.a.createElement(v.a,{lgUp:!0},n.a.createElement(k.a,{className:d.menuButton,onClick:s(!0),color:"inherit"},n.a.createElement(C.a,null))),n.a.createElement(T.a,{variant:"h6",color:"inherit"},n.a.createElement(w.a,{component:m.b,to:"/",color:"inherit",underline:"none"},"Trackmania Records")))),n.a.createElement(v.a,{lgUp:!0,implementation:"css"},n.a.createElement(j.a,{open:o,onClose:s(!1),onOpen:s(!0),variant:"temporary"},n.a.createElement("div",{tabIndex:0,role:"button",onClick:s(!1),onKeyDown:s(!1)},f))),n.a.createElement(v.a,{mdDown:!0,implementation:"css"},n.a.createElement(y.a,{variant:"permanent"},n.a.createElement("div",{tabIndex:0,role:"button"},f))))})),M=a(15),U=a.n(M),I=a(216),L=a(223),_=a(222),q=a(156),Y=a(224),F=a(217),A=a(220),W=a(215),G=a(218),X=a(219),H=a(243),K=a(214),Z=function(e){var t=e.children;return n.a.createElement(K.a,{container:!0},n.a.createElement(K.a,{item:!0,xs:!1,md:1,lg:2}),n.a.createElement(K.a,{item:!0,xs:12,md:10,lg:9},t))},J=a(18),$=a(55),V=a(33),Q={darkMode:new(function(){function e(){Object($.a)(this,e),this.enabled="true"===localStorage.getItem("dark_mode")}return Object(V.a)(e,[{key:"toggle",value:function(){return this.enabled=!this.enabled,localStorage.setItem("dark_mode",this.enabled.toString()),this}}]),e}())},ee=[function(e,t){switch(t.action){case"toggleDarkMode":return Object(J.a)({},e,{darkMode:e.darkMode.toggle()});default:throw new Error("Unknown action type.")}},Q],te=n.a.createContext(Q),ae=Object(d.a)((function(e){return{aboutBox:{padding:e.spacing(3)}}})),re=[{repo:"NeKzor/trackmania-records",branch:"master"},{repo:"NeKzBot/tmx-records",branch:"api"},{repo:"NeKzor/trackmania-records",branch:"gh-pages"}],ne={whiteSpace:"nowrap"},le=function(e){return n.a.createElement(W.a,Object.assign({size:"small"},e))},oe=function(){return n.a.createElement("div",{style:{paddingTop:"50px"}})},ce=function(){var e=U.a.utc(),t=U()().utc().endOf("day").add(17,"hours");t.isBefore(e)&&(t=U()().utc().endOf("day").add(1,"day").add(17,"hours"));var a=U.a.duration({from:e,to:t}),r=a.get("hours"),n=a.get("minutes"),l=a.get("seconds"),o=function(e){return 1===e?"":"s"};return"".concat(r," hour").concat(o(r),", ").concat(n," minute").concat(o(n),", ").concat(l," second").concat(o(l))},ie=null,me=function(){var e=P(),t=n.a.useContext(te),a=t.state.darkMode,r=t.dispatch,l=n.a.useState([]),o=Object(i.a)(l,2),c=o[0],m=o[1],u=n.a.useState(ce()),s=Object(i.a)(u,2),d=s[0],f=s[1];n.a.useEffect((function(){return ie=setInterval((function(){f(ce())}),1e3),function(){return clearInterval(ie)}}),[]);n.a.useEffect((function(){var t=function(t){console.error(t),e.current&&m(void 0)};Promise.all(re.map((function(e){var t=e.repo,a=e.branch;return fetch("https://api.github.com/repos/".concat(t,"/commits/").concat(a))}))).then((function(a){Promise.all(a.map((function(e){return e.json()}))).then((function(t){e.current&&m(t.map((function(e){return{sha:e.sha,author:e.author?e.author:e.commit.author,message:e.commit.message,date:e.commit.author.date}})))})).catch(t)})).catch(t)}),[e]);var p=ae();return n.a.createElement(Z,null,n.a.createElement(q.a,{className:p.aboutBox},n.a.createElement(T.a,{component:"h2",variant:"h5"},"Trackmania Campaign Records & Statistics"),n.a.createElement("br",null),n.a.createElement(T.a,{variant:"body1"},"This web app mirrors campaign world records of many Trackmania games. Data is mainly provided by Trackmania Exchange but also by speedrun.com."),n.a.createElement(T.a,{variant:"body1"},"Additionally it ranks players based on how many world records they hold and how long their records have been lasting."),n.a.createElement(oe,null),n.a.createElement(T.a,{variant:"h5"},"Next Update"),n.a.createElement("br",null),d,n.a.createElement(oe,null),n.a.createElement(T.a,{variant:"h5"},"Changelog"),n.a.createElement("br",null),void 0===c?n.a.createElement(T.a,{variant:"body1"},"Unable to fetch status from GitHub."):0===c.length?n.a.createElement(I.a,{className:p.progress}):n.a.createElement("div",{style:{overflowX:"auto"}},n.a.createElement(F.a,{size:"small"},n.a.createElement(G.a,null,n.a.createElement(X.a,null,n.a.createElement(W.a,{padding:"default"},n.a.createElement(T.a,{variant:"body1"},"Branch")),n.a.createElement(W.a,{padding:"default"},n.a.createElement(T.a,{variant:"body1"},"Date")),n.a.createElement(W.a,{padding:"default"},n.a.createElement(T.a,{variant:"body1"},"Author")),n.a.createElement(W.a,{padding:"default"},n.a.createElement(T.a,{variant:"body1"},"Commit")))),n.a.createElement(A.a,null,c.map((function(e,t){var a=re[t],r=a.repo,l=a.branch;return n.a.createElement(X.a,{tabIndex:-1,key:t,style:ne},n.a.createElement(le,{align:"left"},n.a.createElement(w.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(r,"/tree/").concat(l)},l)),n.a.createElement(le,{align:"left",style:ne},n.a.createElement(H.a,{title:U()(e.date).toString()},n.a.createElement("span",null,U()(e.date).from()))),n.a.createElement(le,{align:"left"},e.author.html_url?n.a.createElement(w.a,{color:"inherit",rel:"noopener",href:e.author.html_url},e.author.login):e.author.name||"n/a"),n.a.createElement(le,{align:"left",style:ne},n.a.createElement(H.a,{title:e.message},n.a.createElement(w.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(r,"/commit/").concat(e.sha)},e.sha))))}))))),n.a.createElement(oe,null),n.a.createElement(T.a,{variant:"h5"},"Theme Settings"),n.a.createElement("br",null),n.a.createElement(_.a,{row:!0},n.a.createElement(L.a,{control:n.a.createElement(Y.a,{checked:a.enabled,onChange:function(){r({action:"toggleDarkMode"})},color:"primary"}),label:"Dark Mode"})),n.a.createElement(oe,null),n.a.createElement(T.a,{variant:"h5"},"Credits"),n.a.createElement("br",null),n.a.createElement(w.a,{rel:"noopener",href:"http://www.tm-exchange.com"},"tm-exchange.com"),n.a.createElement("br",null),n.a.createElement(w.a,{rel:"noopener",href:"https://tm.mania-exchange.com"},"tm.mania-exchange.com"),n.a.createElement("br",null),n.a.createElement(w.a,{rel:"noopener",href:"https://www.speedrun.com/tmwii"},"speedrun.com/tmwii"),n.a.createElement("br",null),n.a.createElement(w.a,{rel:"noopener",href:"https://github.com/jonese1234/Trackmania-Leaderboard"},"jonese1234/Trackmania-Leaderboard")))},ue=a(38),se=a.n(ue),de=a(56),fe=a(84),pe=a(235),Ee=a(228),be=a(229),he=a(236),ge=a(244),ye={numeric:!0},ve=function(e,t,a){var r=function(e,t){var r=we(e,a).toString();return we(t,a).toString().localeCompare(r,void 0,ye)},n="desc"===t?function(e,t){return r(e,t)}:function(e,t){return-r(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},ke=function(e,t,a,r){if(a===r)return ve(e,t,a);var n=function(e,t){var n=we(e,a).toString(),l=we(t,a).toString(),o=l.localeCompare(n,void 0,ye);return 0!==o?o:(n=we(e,r).toString(),(l=we(t,r).toString()).localeCompare(n,void 0,ye))},l="desc"===t?function(e,t){return n(e,t)}:function(e,t){return-n(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=l(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},we=function(e,t){return-1!==t.indexOf(".")?t.split(".").filter((function(e){return e})).reduce((function(e,t){return e&&e[t]}),e):e[t]},xe=function(e){return["nations","sunrise","original"].includes(e)?"http":"https"},De=function(e){return"tm2"===e?{trackUrl:function(e){return"https://tm.mania-exchange.com/tracks/".concat(e)},imageUrl:function(e){return"https://tm.mania-exchange.com/tracks/screenshot/normal/".concat(e)},replayUrl:function(e){return"https://tm.mania-exchange.com/replays/download/".concat(e)},userUrl:function(e){return"https://tm.mania-exchange.com/user/profile/".concat(e)}}:"tmwii"===e?{trackUrl:function(e){return"https://speedrun.com/tmwii/".concat(e)},imageUrl:function(e){},replayUrl:function(e){},userUrl:function(e){return"https://www.speedrun.com/user/".concat(e)}}:{trackUrl:function(t){return"".concat(xe(e),"://").concat(e,".tm-exchange.com/main.aspx?action=trackshow&id=").concat(t)},imageUrl:function(t){return"".concat(xe(e),"://").concat(e,".tm-exchange.com/getclean.aspx?action=trackscreenscreens&id=").concat(t)},replayUrl:function(t){return"".concat(xe(e),"://").concat(e,".tm-exchange.com/get.aspx?action=recordgbx&id=").concat(t)},userUrl:function(t){return"".concat(xe(e),"://").concat(e,".tm-exchange.com/main.aspx?action=usershow&id=").concat(t)}}},Oe=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],je=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return n.a.createElement(G.a,null,n.a.createElement(X.a,null,Oe.map((function(e){return n.a.createElement(W.a,{key:e.id,align:e.align,padding:"default",sortDirection:a===e.id&&t},!0===e.sortable&&n.a.createElement(H.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},n.a.createElement(ge.a,{active:a===e.id,direction:t,onClick:(l=e.id,o=e.id2,function(e){r(e,l,o)})},e.label)),!1===e.sortable&&e.label);var l,o}))))},Se=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Te={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Be={whiteSpace:"nowrap"},Ce={padding:"7px 0px 7px 16px"},Pe=function(e){return n.a.createElement(W.a,Object.assign({style:Ce},e))},ze=function(e){var t=e.data,a=e.game,r=n.a.useState(Te),l=Object(i.a)(r,2),o=l[0],c=o.order,m=o.orderBy,u=o.thenBy,s=o.rowsPerPage,d=o.page,f=l[1],p=Se();return n.a.createElement("div",{className:p.root},n.a.createElement(F.a,{size:"small"},n.a.createElement(je,{order:c,orderBy:m,onRequestSort:function(e,t,a){var r=t,n=a;f((function(e){return Object(J.a)({},e,{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))}}),n.a.createElement(A.a,null,ke(t,c,m,u).slice(d*s,d*s+s).map((function(e){return n.a.createElement(X.a,{tabIndex:-1,key:e.user.id},n.a.createElement(Pe,{align:"left"},n.a.createElement(w.a,{style:Be,color:"inherit",href:De(a).userUrl(e.user.id),rel:"noreferrer",target:"_blank"},e.user.name)),n.a.createElement(Pe,{align:"left"},e.wrs),n.a.createElement(Pe,{align:"left"},e.duration," day",1===e.duration?"":"s"))})))))},Ne=a(24),Re=a.n(Ne),Me=a(117),Ue=a.n(Me),Ie=a(234);function Le(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0===e||null===e)return e;if("Stunts"===a)return e+" pts.";if("tm2"!==t){var r=(e/=10)%100,n=Math.floor(e/100),l=n%60,o=Math.floor(n/60);return(o>0?o+":":"")+(l<10&&o>0?"0"+l:l)+"."+(r<10?"0"+r:r)}var c=e%1e3,i=Math.floor(e/1e3),m=i%60,u=Math.floor(i/60);return(u>0?u+":":"")+(m<10&&u>0?"0"+m:m)+"."+(c<100?c<10?"00"+c:"0"+c:c)}var _e=Object(Ie.a)().domain([0,24,336,1440]).range(["#2eb82e","#258e25","#cca300","#e67300"]);function qe(e){var t=U()().diff(U()(e),"hours");return t<=1440?_e(t):void 0}var Ye=Object(Ie.a)().domain([0,480,960,1440]).range(["#2eb82e","#cca300","#e67300","#e63200"]);var Fe=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],Ae=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return n.a.createElement(G.a,null,n.a.createElement(X.a,null,Fe.map((function(e){return n.a.createElement(W.a,{key:e.id,align:e.align,padding:"default",sortDirection:a===e.id&&t},!0===e.sortable&&n.a.createElement(H.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},n.a.createElement(ge.a,{active:a===e.id,direction:t,onClick:(l=e.id,function(e){r(e,l)})},e.label)),!1===e.sortable&&e.label);var l}))))},We=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Ge={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},Xe={whiteSpace:"nowrap"},He={padding:"7px 0px 7px 16px"},Ke=function(e){return n.a.createElement(W.a,Object.assign({style:He},e))},Ze=function(e){var t=e.data,a=e.game,r=e.stats,l=e.useLiveDuration,o=n.a.useState(Ge),c=Object(i.a)(o,2),m=c[0],u=m.order,s=m.orderBy,d=m.rowsPerPage,f=m.page,p=c[1],E=De(a),b=We();return n.a.createElement("div",{className:b.root},n.a.createElement(F.a,{size:"small"},n.a.createElement(Ae,{order:u,orderBy:s,onRequestSort:function(e,t){var a=t;p((function(e){return Object(J.a)({},e,{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),n.a.createElement(A.a,null,ve(t,u,s).slice(f*d,f*d+d).map((function(e){var t=Le(e.score,a,e.track.type);return n.a.createElement(X.a,{tabIndex:-1,key:"".concat(e.track.name,"-").concat(e.user.id)},(e.track.isFirst||"track.name"!==s)&&n.a.createElement(Ke,{style:Xe,rowSpan:"track.name"!==s?1:e.track.records,align:"left"},n.a.createElement(w.a,{color:"inherit",href:E.trackUrl(e.track.id),rel:"noreferrer",target:"_blank"},e.track.name)),n.a.createElement(Ke,{align:"left"},n.a.createElement(H.a,{title:"Download Replay",placement:"bottom-end",enterDelay:300},n.a.createElement(w.a,{style:Xe,color:"inherit",href:E.replayUrl(e.replay),rel:"noreferrer",target:"_blank"},t)),"tm2"===a&&U()(e.date).isBefore("2017-05-09")&&n.a.createElement(H.a,{title:"This run was done on an older game version.",placement:"bottom-end",enterDelay:300},n.a.createElement("span",null,n.a.createElement(k.a,{size:"small",disabled:!0},n.a.createElement(Ue.a,{fontSize:"inherit"}))))),n.a.createElement(Ke,{align:"left"},n.a.createElement(w.a,{style:Xe,color:"inherit",href:E.userUrl(e.user.id),rel:"noreferrer",target:"_blank"},e.user.name)),n.a.createElement(Ke,{align:"left"},n.a.createElement(H.a,{title:n.a.createElement(Re.a,{fromNow:!0},e.date),placement:"bottom-end",enterDelay:300},n.a.createElement(Re.a,{style:Object(J.a)({color:qe(e.date)},Xe),format:"YYYY-MM-DD"},e.date))),n.a.createElement(Ke,{align:"left"},n.a.createElement(H.a,{title:"in days",placement:"bottom-end",enterDelay:300},l?n.a.createElement(Re.a,{style:Xe,diff:e.date,unit:"days"}):n.a.createElement("span",null,e.duration))))}))),n.a.createElement(A.a,null,r.totalTime>0&&n.a.createElement(X.a,null,n.a.createElement(Ke,{align:"right"},"Total Time"),n.a.createElement(Ke,null,n.a.createElement(H.a,{title:U.a.duration(r.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300},n.a.createElement("span",null,Le(r.totalTime,a)))),n.a.createElement(Ke,{colSpan:3})),r.totalPoints>0&&n.a.createElement(X.a,null,n.a.createElement(Ke,{align:"right"},"Total Points"),n.a.createElement(Ke,null,n.a.createElement("span",null,Le(r.totalPoints,a,"Stunts"))),n.a.createElement(Ke,{colSpan:3})))))},Je=a(118),$e=a.n(Je),Ve=function(e,t){return"https://speedrun.com/tmwii/".concat(e,"#").concat(t)},Qe=function(e){return"https://www.speedrun.com/user/".concat(e)},et=function(e){return"https://www.speedrun.com/tmwii/run/".concat(e)},tt=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"},{id:"replay",sortable:!1,label:"Video",align:"left"}],at=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort;return n.a.createElement(G.a,null,n.a.createElement(X.a,null,tt.map((function(e){return n.a.createElement(W.a,{key:e.id,align:e.align,padding:"default",sortDirection:a===e.id&&t},!0===e.sortable&&n.a.createElement(H.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},n.a.createElement(ge.a,{active:a===e.id,direction:t,onClick:(l=e.id,function(e){r(e,l)})},e.label)),!1===e.sortable&&e.label);var l}))))},rt=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),nt={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},lt={whiteSpace:"nowrap"},ot={padding:"7px 0px 7px 16px"},ct=function(e){return n.a.createElement(W.a,Object.assign({style:ot},e))},it=function(e){var t=e.data,a=e.game,r=e.stats,l=e.useLiveDuration,o=e.category,c=n.a.useState(nt),m=Object(i.a)(c,2),u=m[0],s=u.order,d=u.orderBy,f=u.rowsPerPage,p=u.page,E=m[1],b=rt();return n.a.createElement("div",{className:b.root},n.a.createElement(F.a,{size:"small"},n.a.createElement(at,{order:s,orderBy:d,onRequestSort:function(e,t){var a=t;E((function(e){return Object(J.a)({},e,{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),n.a.createElement(A.a,null,ve(t,s,d).slice(p*f,p*f+f).map((function(e){return n.a.createElement(X.a,{tabIndex:-1,key:"".concat(e.track.name,"-").concat(e.user.id)},(e.track.isFirst||"track.name"!==d)&&n.a.createElement(ct,{style:lt,rowSpan:"track.name"!==d?1:e.track.records,align:"left"},n.a.createElement(w.a,{color:"inherit",href:Ve(e.track.name,o),rel:"noreferrer",target:"_blank"},e.track.name)),n.a.createElement(ct,{align:"left"},n.a.createElement(w.a,{style:lt,color:"inherit",href:et(e.id),rel:"noreferrer",target:"_blank"},Le(e.score,a))),n.a.createElement(ct,{align:"left"},n.a.createElement(w.a,{style:lt,color:"inherit",href:Qe(e.user.name),rel:"noreferrer",target:"_blank"},e.user.name)),n.a.createElement(ct,{align:"left"},n.a.createElement(H.a,{title:n.a.createElement(Re.a,{fromNow:!0},e.date),placement:"bottom-end",enterDelay:300},n.a.createElement(Re.a,{style:Object(J.a)({color:qe(e.date)},lt),format:"YYYY-MM-DD"},e.date))),n.a.createElement(ct,{align:"left"},n.a.createElement(H.a,{title:"in days",placement:"bottom-end",enterDelay:300},l?n.a.createElement(Re.a,{style:lt,diff:e.date,unit:"days"}):n.a.createElement("span",null,e.duration))),n.a.createElement(ct,{align:"left"},n.a.createElement(H.a,{title:"Watch Run",placement:"bottom-end",enterDelay:300},n.a.createElement(k.a,{size:"small",href:e.media,target:"_blank"},n.a.createElement($e.a,{fontSize:"inherit"})))))}))),n.a.createElement(A.a,null,r.totalTime>0&&n.a.createElement(X.a,null,n.a.createElement(ct,{align:"right"},"Total Time"),n.a.createElement(ct,null,n.a.createElement(H.a,{title:U.a.duration(r.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300},n.a.createElement("span",null,Le(r.totalTime,a)))),n.a.createElement(ct,{colSpan:4})))))},mt=function(e){var t=e.data,a=e.props;return n.a.createElement(T.a,Object.assign({variant:"h5",gutterBottom:!0,style:{padding:"50px 0px 50px 50px"}},a),t)},ut=a(119),st=a.n(ut),dt=a(225),ft=Object(dt.a)((function(e){var t=e.labels,a=e.series,r=e.title,l="dark"===e.theme.palette.type;return n.a.createElement(st.a,{options:{labels:t,legend:{show:!1},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0},value:{show:!0,color:l?"white":"black"},total:{show:!0,label:r,color:l?"white":"black"}}}}}},series:a,type:"donut",height:"400"})})),pt=a(227),Et=a(226),bt=a(120),ht=a.n(bt),gt=Object(d.a)((function(e){return{fab:{margin:0,top:"auto",right:30,bottom:30,left:"auto",position:"fixed"}}})),yt=function(){!function e(){var t=document.documentElement.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/5))}()},vt=function(){var e=function(){var e=n.a.useRef(void 0),t=n.a.useState({x:0,y:0}),a=Object(i.a)(t,2),r=a[0],l=a[1],o=n.a.useCallback((function(){clearTimeout(e.current),e.current=setTimeout((function(){l({x:window.scrollX,y:window.scrollY})}),100)}),[l]);return n.a.useEffect((function(){return window.addEventListener("scroll",o),function(){clearTimeout(e.current),window.removeEventListener("scroll",o)}}),[o]),r}().y,t=gt();return n.a.createElement(Et.a,{in:0!==e,timeout:1e3},n.a.createElement(pt.a,{title:"Jump to top",color:"primary",className:t.fab,onClick:yt},n.a.createElement(ht.a,null)))},kt=new(function(){function e(){Object($.a)(this,e),this.baseApi="https://raw.githubusercontent.com/NeKzBot/tmx-records/api"}return Object(V.a)(e,[{key:"request",value:function(){var e=Object(de.a)(se.a.mark((function e(t,a){var r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/").concat(t,"/").concat(a||"latest",".json"));case 2:if(r=e.sent,console.log("GET ".concat(r.url," (").concat(r.status,")")),!r.ok){e.next=10;break}return e.next=7,r.json();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=[];case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),wt=Object(d.a)((function(e){return{padTop:{paddingTop:"70px"}}})),xt=Object(fe.a)((function(e){var t=e.match,a=P(),r=n.a.useState(void 0),l=Object(i.a)(r,2),o=l[0],c=l[1],m=n.a.useState("tm2"),u=Object(i.a)(m,2),s=u[0],d=u[1],f=n.a.useState(0),p=Object(i.a)(f,2),E=p[0],b=p[1],h=t.params[0],g=t.params.date,y=void 0===g||"latest"===g;n.a.useEffect((function(){b(0),c(void 0)}),[h]),n.a.useEffect((function(){Object(de.a)(se.a.mark((function e(){var t,r,n,l,o,i,m;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt.request(h,g);case 2:if(!(t=e.sent)[0]||!t[0].tracks[0].wrs){e.next=24;break}for(r=!0,n=!1,l=void 0,e.prev=7,o=function(){var e=m.value;void 0===e.stats.totalPoints&&(e.stats.totalTime=e.tracks.filter((function(e){return"Stunts"!==e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0),e.stats.totalPoints=e.tracks.filter((function(e){return"Stunts"===e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0));var t=[],a=!0,r=!1,n=void 0;try{for(var l,o=e.tracks[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var c=l.value,i=!0,u=!1,s=void 0;try{for(var d,f=c.wrs[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p=d.value,E=y?U()().diff(U()(p.date),"d"):p.duration;t.push(Object(J.a)({track:{id:c.id,name:c.name,type:c.type,isFirst:p===c.wrs[0],records:c.wrs.length}},p,{duration:E}))}}catch(b){u=!0,s=b}finally{try{i||null==f.return||f.return()}finally{if(u)throw s}}}}catch(b){r=!0,n=b}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}e.tracks=t,y&&e.leaderboard.forEach((function(t,a){e.leaderboard[a].duration=e.tracks.filter((function(e){return e.user.id===t.user.id})).map((function(e){return e.duration})).reduce((function(e,t){return e+t}),0)}))},i=t[Symbol.iterator]();!(r=(m=i.next()).done);r=!0)o();e.next=16;break;case 12:e.prev=12,e.t0=e.catch(7),n=!0,l=e.t0;case 16:e.prev=16,e.prev=17,r||null==i.return||i.return();case 19:if(e.prev=19,!n){e.next=22;break}throw l;case 22:return e.finish(19);case 23:return e.finish(16);case 24:if(a.current){e.next=26;break}return e.abrupt("return");case 26:d(h),c(t);case 28:case"end":return e.stop()}}),e,null,[[7,12,16,24],[17,,19,23]])})))()}),[a,h,g,y]);var v="tmwii"===s?it:Ze,k=wt();return n.a.createElement(Z,null,n.a.createElement(q.a,null,void 0===o?n.a.createElement(Ee.a,null):0===o.length?n.a.createElement(mt,{data:"No data."}):n.a.createElement(n.a.Fragment,null,o.length>1&&n.a.createElement(he.a,{value:E,onChange:function(e,t){b(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},o.map((function(e){return n.a.createElement(be.a,{label:e.name,key:e.name})}))),n.a.createElement(T.a,{component:"div",role:"tabpanel"},n.a.createElement(pe.a,{p:3},n.a.createElement(K.a,{container:!0,direction:"column",justify:"center"},n.a.createElement(K.a,{item:!0,xs:12},n.a.createElement(v,{data:o[E].tracks,game:s,stats:o[E].stats,useLiveDuration:y,category:o[E].name})),n.a.createElement(K.a,{item:!0,xs:12,className:k.padTop},n.a.createElement(K.a,{container:!0,direction:"row",justify:"center",alignContent:"center"},n.a.createElement(K.a,{item:!0,xs:12,md:6},n.a.createElement(ze,{data:o[E].leaderboard,game:h})),n.a.createElement(K.a,{item:!0,xs:12,md:6,className:k.padTop},n.a.createElement(K.a,{container:!0,direction:"column",justify:"center"},n.a.createElement(K.a,{item:!0,xs:12},n.a.createElement(ft,{title:"WRs",labels:o[E].leaderboard.map((function(e){return e.user.name})),series:o[E].leaderboard.map((function(e){return e.wrs}))})),n.a.createElement(K.a,{item:!0,xs:12,className:k.padTop},n.a.createElement(ft,{title:"Duration",labels:o[E].leaderboard.map((function(e){return e.user.name})),series:o[E].leaderboard.map((function(e){return e.duration}))}))))))))))),n.a.createElement(vt,null))})),Dt=a(121),Ot=a.n(Dt),jt=a(230),St=a(239),Tt=a(240),Bt=a(237),Ct=a(13),Pt=function(e){return n.a.createElement(Bt.a,Object.assign({elevation:6,variant:"filled"},e))},zt={info:"drag & drop replay here :)",magic:"GBX",version:6,settings:"BUCR",classId:50933760,headerSize:331,headerChunks:2,chunkOffset:348},Nt=function(){var e=P(),t=Object(Ct.a)(),a=n.a.useState(zt),r=Object(i.a)(a,2),l=r[0],o=r[1],c=n.a.useState(!0),m=Object(i.a)(c,2),u=m[0],s=m[1],d=n.a.useState(!1),f=Object(i.a)(d,2),p=f[0],E=f[1],b=function(e,t){"clickaway"!==t&&E(!1)},h=n.a.useCallback((function(t){if(t){var a=new FileReader;a.onload=function(t){var a=t.target.result;try{if(!e.current)return;o(zt),E(!1);var r=window,n=r.Buffer,l=r.Replay,c=window.replay=l.default().read(n.from(a),{parseGhost:u});if(!e.current)return;c.ghost&&delete c.ghost.restData,function e(t){Object.keys(t).forEach((function(a){"_view"===a?delete t._view:"object"===typeof t[a]&&e(t[a])}))}(c),o(c)}catch(i){e.current&&E(i.message)}},a.readAsArrayBuffer(t)}}),[e,u,o,E]),g=n.a.useCallback((function(e){return h(e.target.files[0])}),[h]),y=function(e){e.dataTransfer.items?e.dataTransfer.items.clear():e.dataTransfer.clearData()};n.a.useEffect((function(){return document.querySelector("#file").addEventListener("change",g),function(){return document.querySelector("#file").removeEventListener("change",g)}}),[g]);return n.a.createElement(Z,null,n.a.createElement(q.a,{style:{padding:"20px 20px 20px 20px"}},n.a.createElement(jt.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){document.querySelector("#file").click()}},"Open file"),n.a.createElement("input",{type:"file",id:"file",style:{display:"none"}}),n.a.createElement(L.a,{style:{marginLeft:"20px"},control:n.a.createElement(St.a,{color:"primary",checked:u,onChange:function(e){s(e.target.checked)}}),label:"Parse Ghost"}),n.a.createElement("div",{style:{paddingBottom:"20px"}}),n.a.createElement("div",{onDrop:function(e){e.preventDefault();var t=[];if(e.dataTransfer.items)for(var a=0;a<e.dataTransfer.items.length;++a)"file"===e.dataTransfer.items[a].kind&&t.push(e.dataTransfer.items[a].getAsFile());h(t[0]),y(e)},onDragOver:function(e){e.preventDefault()}},n.a.createElement(Ot.a,{name:"replay",style:{fontSize:"14px"},src:l,theme:"light"===t.palette.type?"bright:inverted":"solarized",displayDataTypes:!1,displayObjectSize:!1,enableClipboard:!1})),n.a.createElement(Tt.a,{open:!1!==p,autoHideDuration:6e3,onClose:b},n.a.createElement(Pt,{onClose:b,severity:"error"},p))))},Rt=function(){return n.a.createElement(Z,null,n.a.createElement(q.a,null,n.a.createElement(mt,{data:"Page not found :("})))},Mt=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],Ut=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",sortable:!0,label:"World Records",align:"left"}],It=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,l=e.official,o=l?Mt:Ut;return n.a.createElement(G.a,null,n.a.createElement(X.a,null,o.map((function(e){return n.a.createElement(W.a,{key:e.id,align:e.align,padding:"default",sortDirection:a===e.id&&t},!0===e.sortable&&n.a.createElement(H.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},n.a.createElement(ge.a,{active:a===e.id,direction:t,onClick:(l=e.id,o=e.id2,function(e){r(e,l,o)})},e.label)),!1===e.sortable&&e.label);var l,o}))))},Lt=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),_t={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},qt={padding:"7px 0px 7px 16px"},Yt=function(e){return n.a.createElement(W.a,Object.assign({style:qt},e))},Ft=function(e){var t=e.data,a=e.official,r=n.a.useState(_t),l=Object(i.a)(r,2),o=l[0],c=o.order,m=o.orderBy,u=o.thenBy,s=o.rowsPerPage,d=o.page,f=l[1],p=Lt();return n.a.createElement("div",{className:p.root},n.a.createElement(F.a,{size:"small"},n.a.createElement(It,{order:c,orderBy:m,onRequestSort:function(e,t,a){var r=t,n=a;f((function(e){return Object(J.a)({},e,{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},official:a}),n.a.createElement(A.a,null,ke(t,c,m,u).slice(d*s,d*s+s).map((function(e){return n.a.createElement(X.a,{tabIndex:-1,key:e.user.name},n.a.createElement(Yt,{align:"left"},e.user.name),n.a.createElement(Yt,{align:"left"},e.wrs),a&&n.a.createElement(Yt,{align:"left"},e.duration))})))))},At=a(3),Wt=a(231),Gt=a(97),Xt=a.n(Gt),Ht=a(122),Kt=a.n(Ht),Zt=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"user.zone",sortable:!0,label:"Zone",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],Jt=[{id:"track.monthDay",sortable:!0,label:"Day",align:"left"},{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"user.zone",sortable:!0,label:"Zone",align:"left"}],$t=function(e){var t=e.order,a=e.orderBy,r=e.onRequestSort,l=e.official,o=l?Zt:Jt;return n.a.createElement(G.a,null,n.a.createElement(X.a,null,o.map((function(e,l){return n.a.createElement(W.a,{key:l,align:e.align,padding:"default",sortDirection:a===e.id&&t,colSpan:l===o.length-1?2:1},!0===e.sortable&&n.a.createElement(H.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},n.a.createElement(ge.a,{active:a===e.id,direction:t,onClick:(c=e.id,function(e){r(e,c)})},e.label)),!1===e.sortable&&e.label);var c}))))},Vt=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Qt={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},ea={whiteSpace:"nowrap"},ta={padding:"7px 0px 7px 16px"},aa=function(e){return n.a.createElement(W.a,Object.assign({style:ta},e))},ra=function(e,t){var a=t?"&authorId=21":"";return"https://trackmania.exchange/mapsearch2?trackname=".concat(encodeURIComponent(e.name)).concat(a)},na=function(e){var t=e.name.split(" - "),a=Object(i.a)(t,2),r=a[0],n=a[1];return"https://nekz.me/trackmania/#/".concat(r.replace(" ","").toLowerCase(),"/").concat(parseInt(n,10))},la=Object(d.a)({root:{"& > *":{borderBottom:"unset"}}}),oa=function(e){var t,a=e.wr,r=e.official,l=Le(a.score,"tm2"),o=0!==a.delta?Le(a.delta,"tm2"):null;return n.a.createElement(X.a,{tabIndex:-1},r&&n.a.createElement(aa,{align:"left"},n.a.createElement(H.a,{title:n.a.createElement(Re.a,{fromNow:!0},a.date),placement:"bottom-end",enterDelay:300},n.a.createElement(Re.a,{style:Object(J.a)({color:qe(a.date)},ea),format:"YYYY-MM-DD"},a.date))),!r&&n.a.createElement(aa,{align:"left"},n.a.createElement(H.a,{title:a.setAfter,placement:"bottom-end",enterDelay:300},n.a.createElement(Re.a,{style:Object(J.a)({color:(t=a.pastMinutes,t>=0&&t<=1440?Ye(t):void 0)},ea),format:"HH:mm"},a.date))),n.a.createElement(aa,{align:"left"},l),n.a.createElement(aa,{align:"left"},o?"-"+o:""),n.a.createElement(aa,{align:"left"},a.user.name),n.a.createElement(aa,{align:"left"},n.a.createElement(H.a,{title:a.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300},n.a.createElement("span",null,a.user.zone[2].name))),n.a.createElement(aa,{align:"left"},n.a.createElement(H.a,{title:"Download Ghost",placement:"bottom",enterDelay:300},n.a.createElement(k.a,{size:"small",style:ea,color:"inherit",href:"https://prod.trackmania.core.nadeo.online/storageObjects/"+a.replay,rel:"noreferrer",target:"_blank"},n.a.createElement(Xt.a,{fontSize:"inherit"})))))},ca=function(e){var t=e.wr,a=e.official,r=e.orderBy,l=e.useLiveDuration,o=e.history,c=e.onClickHistory,i=Le(t.score,"tm2"),m=0!==t.delta?Le(t.delta,"tm2"):null,u=la(),s=o===t.track.id;return n.a.createElement(n.a.Fragment,null,n.a.createElement(X.a,{tabIndex:-1},!a&&(t.track.isFirst||"track.monthDay"!==r)&&n.a.createElement(aa,{align:"left",rowSpan:"track.monthDay"!==r?1:t.track.records},t.track.monthDay),(t.track.isFirst||"track.monthDay"!==r)&&n.a.createElement(aa,{style:ea,rowSpan:"track.monthDay"!==r?1:t.track.records,align:"left"},n.a.createElement(w.a,{color:"inherit",href:ra(t.track,a),rel:"noreferrer",target:"_blank"},t.track.name)),n.a.createElement(aa,{align:"left"},a&&m&&n.a.createElement(H.a,{title:n.a.createElement("span",null,"-",m," to former record"),placement:"bottom",enterDelay:300},n.a.createElement(w.a,{color:"inherit",href:na(t.track),rel:"noreferrer",target:"_blank"},n.a.createElement("span",null,i))),a&&!m&&n.a.createElement(w.a,{color:"inherit",href:na(t.track),rel:"noreferrer",target:"_blank"},n.a.createElement("span",null,i)),!a&&m&&n.a.createElement(H.a,{title:n.a.createElement("span",null,"-",m," to former record"),placement:"bottom",enterDelay:300},n.a.createElement("span",null,i)),!a&&!m&&n.a.createElement("span",null,i)),n.a.createElement(aa,{align:"left"},t.user.name),n.a.createElement(aa,{align:"left"},n.a.createElement(H.a,{title:t.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300},n.a.createElement("span",null,t.user.zone[2].name))),a&&n.a.createElement(n.a.Fragment,null,n.a.createElement(aa,{align:"left"},n.a.createElement(H.a,{title:n.a.createElement(Re.a,{fromNow:!0},t.date),placement:"bottom-end",enterDelay:300},n.a.createElement(Re.a,{style:Object(J.a)({color:qe(t.date)},ea),format:"YYYY-MM-DD"},t.date))),n.a.createElement(aa,{align:"left"},n.a.createElement(H.a,{title:"in days",placement:"bottom-end",enterDelay:300},l?n.a.createElement(Re.a,{style:ea,diff:t.date,unit:"days"}):n.a.createElement("span",null,t.duration)))),n.a.createElement(aa,{align:"left"},n.a.createElement(H.a,{title:"Download Ghost",placement:"bottom",enterDelay:300},n.a.createElement(k.a,{size:"small",style:ea,color:"inherit",href:"https://prod.trackmania.core.nadeo.online/storageObjects/"+t.replay,rel:"noreferrer",target:"_blank"},n.a.createElement(Xt.a,{fontSize:"inherit"}))),t.track.isLast&&t.track.history&&n.a.createElement(k.a,{color:"inherit",size:"small",style:ea,onClick:function(){return c(t.track.id)}},n.a.createElement(Kt.a,{fontSize:"inherit"})))),t.track.isLast&&t.track.history&&n.a.createElement(X.a,{className:u.root},n.a.createElement(aa,{style:{paddingBottom:0,paddingTop:0},colSpan:7},n.a.createElement(Wt.a,{in:s,timeout:"auto",unmountOnExit:!0},n.a.createElement(pe.a,{margin:1},n.a.createElement(T.a,{variant:"h6",gutterBottom:!0,component:"div"},"History"),n.a.createElement(F.a,{size:"small","aria-label":"purchases"},n.a.createElement(G.a,null,n.a.createElement(X.a,null,n.a.createElement(aa,null,a?"Date":"Time"),n.a.createElement(aa,null,"Record"),n.a.createElement(aa,null,"Timesave"),n.a.createElement(aa,null,"Player"),n.a.createElement(aa,{colSpan:2},"Zone"))),n.a.createElement(A.a,null,t.track.history.map((function(e,t){return n.a.createElement(oa,{wr:e,official:a,key:t})})))))))))},ia=function(e){var t=e.data,a=e.stats,r=e.official,l=e.useLiveDuration,o=n.a.useState(Qt),c=Object(i.a)(o,2),m=c[0],u=m.order,s=m.rowsPerPage,d=m.page,f=Object(At.a)(m,["order","rowsPerPage","page"]),p=c[1],E=n.a.useState(null),b=Object(i.a)(E,2),h=b[0],g=b[1],y=f.orderBy;y=r&&"track.monthDay"===y?"track.name":y;n.a.useEffect((function(){p((function(e){return Object(J.a)({},e,{orderBy:r?"track.name":"track.monthDay"})}))}),[t,r]);var v=n.a.useCallback((function(e){g(h!==e?e:null)}),[h,g]),k=Vt();return n.a.createElement("div",{className:k.root},n.a.createElement(F.a,{size:"small"},n.a.createElement($t,{order:u,orderBy:y,onRequestSort:function(e,t){var a=t;p((function(e){return Object(J.a)({},e,{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))},official:r}),n.a.createElement(A.a,null,ve(t,u,y).slice(d*s,d*s+s).map((function(e,t){return n.a.createElement(ca,{wr:e,official:r,orderBy:y,useLiveDuration:l,history:h,onClickHistory:v,key:t})}))),n.a.createElement(A.a,null,a.totalTime>0&&n.a.createElement(X.a,null,n.a.createElement(aa,{align:"right",colSpan:r?1:2},"Total Time"),n.a.createElement(aa,null,n.a.createElement(H.a,{title:U.a.duration(a.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300},n.a.createElement("span",null,Le(a.totalTime,"tm2")))),n.a.createElement(aa,{colSpan:r?5:3})))))},ma=Object(d.a)((function(e){return{padTop:{paddingTop:"70px"}}})),ua=function(e){return 1===e?"":"s"},sa=function(e,t){var a=t.diff(e,"seconds"),r=t.diff(e,"hours");if(a>0){var n=t.diff(e,"minutes")-60*r;return"set after ".concat(r," hour").concat(ua(r)," and ").concat(n," minute").concat(ua(n))}var l=-r,o=-t.diff(e,"minutes")-60*l;return"set before ".concat(l," hour").concat(ua(l)," and ").concat(o," minute").concat(ua(o))},da=Object(fe.a)((function(e){var t=e.match,a=P(),r=n.a.useState(void 0),l=Object(i.a)(r,2),o=l[0],c=l[1],m=n.a.useState(0),u=Object(i.a)(m,2),s=u[0],d=u[1],f=t.params[0],p=t.params.date,E=void 0===p||"latest"===p;n.a.useEffect((function(){d(0),c(void 0)}),[f]),n.a.useEffect((function(){Object(de.a)(se.a.mark((function e(){var t,r,n,l,o,i,m;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt.request("trackmania",p);case 2:if(!(t=e.sent)[0]||!t[0].tracks[0].wrs){e.next=24;break}for(r=!0,n=!1,l=void 0,e.prev=7,o=function(){var e=m.value;void 0===e.stats.totalPoints&&(e.stats.totalTime=e.tracks.map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0));var t=[],a=!0,r=!1,n=void 0;try{for(var l,o=e.tracks[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var c=l.value,i=!0,u=!1,s=void 0;try{for(var d,f=function(){var a=d.value,r=U()(a.date),n=E?U()().diff(r,"d"):a.duration,l=e.isOfficial?void 0:U()([e.year,e.month]).utc().set({date:c.monthDay,hour:17,minute:0,second:0}),o=e.isOfficial?void 0:sa(l,r),i=a===c.wrs[c.wrs.length-1],m=i&&(c.history||[]).length>1?c.history:void 0;m&&!e.isOfficial&&m.forEach((function(e){var t=U()(e.date);e.setAfter=sa(l,t),e.pastMinutes=t.diff(l,"minutes")})),t.push(Object(J.a)({track:{id:c.id,name:c.name.replace(/(\$[0-9a-fA-F]{3}|\$[WNOITSGZBEMwnoitsgzbem]{1})/g,""),monthDay:c.monthDay,isFirst:a===c.wrs[0],isLast:i,records:c.wrs.length,history:m}},a,{duration:n,setAfter:o}))},p=c.wrs[Symbol.iterator]();!(i=(d=p.next()).done);i=!0)f()}catch(b){u=!0,s=b}finally{try{i||null==p.return||p.return()}finally{if(u)throw s}}}}catch(b){r=!0,n=b}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}e.tracks=t,E&&e.leaderboard.forEach((function(t,a){e.leaderboard[a].duration=e.tracks.filter((function(e){return e.user.id===t.user.id})).map((function(e){return e.duration})).reduce((function(e,t){return e+t}),0)}))},i=t[Symbol.iterator]();!(r=(m=i.next()).done);r=!0)o();e.next=16;break;case 12:e.prev=12,e.t0=e.catch(7),n=!0,l=e.t0;case 16:e.prev=16,e.prev=17,r||null==i.return||i.return();case 19:if(e.prev=19,!n){e.next=22;break}throw l;case 22:return e.finish(19);case 23:return e.finish(16);case 24:if(a.current){e.next=26;break}return e.abrupt("return");case 26:c(t);case 27:case"end":return e.stop()}}),e,null,[[7,12,16,24],[17,,19,23]])})))()}),[a,f,p,E]);var b=ma();return n.a.createElement(Z,null,n.a.createElement(q.a,null,void 0===o?n.a.createElement(Ee.a,null):0===o.length?n.a.createElement(mt,{data:"No data."}):n.a.createElement(n.a.Fragment,null,o.length>1&&n.a.createElement(he.a,{value:s,onChange:function(e,t){d(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},o.map((function(e){return n.a.createElement(be.a,{label:e.name,key:e.name})}))),n.a.createElement(T.a,{component:"div",role:"tabpanel"},n.a.createElement(pe.a,{p:3},n.a.createElement(K.a,{container:!0,direction:"column",justify:"center"},n.a.createElement(K.a,{item:!0,xs:12},n.a.createElement(ia,{data:o[s].tracks,stats:o[s].stats,official:o[s].isOfficial,useLiveDuration:E})),n.a.createElement(K.a,{item:!0,xs:12,className:b.padTop},n.a.createElement(K.a,{container:!0,direction:"row",justify:"center",alignContent:"center"},n.a.createElement(K.a,{item:!0,xs:12,md:6},n.a.createElement(Ft,{data:o[s].leaderboard,official:o[s].isOfficial})),n.a.createElement(K.a,{item:!0,xs:12,md:6,className:b.padTop},n.a.createElement(K.a,{container:!0,direction:"column",justify:"center"},n.a.createElement(K.a,{item:!0,xs:12},n.a.createElement(ft,{title:"WRs",labels:o[s].leaderboard.map((function(e){return e.user.name})),series:o[s].leaderboard.map((function(e){return e.wrs}))})),n.a.createElement(K.a,{item:!0,xs:12,className:b.padTop},n.a.createElement(ft,{title:"WRs by Zone",labels:o[s].countryLeaderboard.map((function(e){return e.zone[2].name})),series:o[s].countryLeaderboard.map((function(e){return e.wrs}))}))))))))))),n.a.createElement(vt,null))})),fa=Object(d.a)((function(e){return{views:{marginTop:e.spacing(5)}}})),pa=function(){var e=n.a.useReducer.apply(n.a,Object(c.a)(ee)),t=Object(i.a)(e,2),a=t[0],r=t[1],l=n.a.useMemo((function(){return Object(b.a)({palette:{primary:{light:p.a[300],main:p.a[500],dark:p.a[700]},secondary:{light:E.a[300],main:E.a[500],dark:E.a[700]},error:{main:p.a.A400},type:a.darkMode.enabled?"dark":"light"}})}),[a.darkMode.enabled]),o=fa(),d=n.a.useMemo((function(){return{state:a,dispatch:r}}),[a,r]);return n.a.createElement(f.a,{theme:l},n.a.createElement(s.a,null),n.a.createElement(te.Provider,{value:d},n.a.createElement(m.a,{basename:"/trackmania-records"},n.a.createElement(R,null),n.a.createElement("div",{className:o.views},n.a.createElement(u.d,null,n.a.createElement(u.a,{exact:!0,from:"/",to:"/trackmania"}),n.a.createElement(u.a,{exact:!0,from:"/tm",to:"/trackmania"}),n.a.createElement(u.a,{exact:!0,from:"/wii",to:"/tmwii"}),n.a.createElement(u.a,{exact:!0,from:"/tmo",to:"/original"}),n.a.createElement(u.a,{exact:!0,from:"/tmn",to:"/nations"}),n.a.createElement(u.a,{exact:!0,from:"/tms",to:"/sunrise"}),n.a.createElement(u.a,{exact:!0,from:"/tmnf",to:"/tmnforever"}),n.a.createElement(u.b,{exact:!0,path:"/trackmania/:date?",component:da}),n.a.createElement(u.b,{exact:!0,path:"/(nations|original|sunrise|tm2|tmnforever|tmwii|united)/:date?",component:xt}),n.a.createElement(u.b,{exact:!0,path:"/about",component:me}),n.a.createElement(u.b,{exact:!0,path:"/replay",component:Nt}),n.a.createElement(u.b,{component:Rt}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(pa,null),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[134,1,2]]]);
//# sourceMappingURL=main.7349e332.chunk.js.map