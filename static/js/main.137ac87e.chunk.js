(this["webpackJsonptrackmania-records"]=this["webpackJsonptrackmania-records"]||[]).push([[0],{175:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a.n(n),i=a(14),o=a.n(i),s=a(140),l=a(11),d=a(52),j=a(51),u=a(259),b=a(124),h=a(258),m=a(100),f=a(101),x=a(139),O=a(234),p=a(233),g=a(30),y=a(265),v=a(178),k=a(236),w=a(229),D=a(176),S=a(232),T=a(269),C=a(235),B=a(69),z=a(127),R=a.n(z),N=function(){var e=c.a.useRef(!1);return c.a.useEffect((function(){return e.current=!0,function(){return e.current=!1}}),[]),e},P=Object(b.a)((function(e){return{root:{paddingBottom:e.spacing(8)},list:{width:e.spacing(25)},menuButton:{marginLeft:-12,marginRight:20},drawer:{width:240,flexShrink:0},appBar:{zIndex:e.zIndex.drawer+1},flex:{flex:1},active:{color:e.palette.primary.main}}})),L=[{title:"404 - Page Not Found",link:null,inDrawer:!1},{title:"trackmania-records",link:"/",inDrawer:!1},{title:"Trackmania",link:"/trackmania",inDrawer:!0,default:!0},{title:"Trackmania 2",link:"/tm2",inDrawer:!0,default:!0},{title:"Trackmania Wii",link:"/tmwii",inDrawer:!0,default:!0},{title:"Nations Forever",link:"/tmnforever",inDrawer:!0},{title:"United",link:"/united",inDrawer:!0},{title:"Nations ESWC",link:"/nations",inDrawer:!0},{title:"Replay Inspection",link:"/replay",inDrawer:!1},{title:"About",link:"/about",inDrawer:!1}],q=Object(j.g)((function(e){var t,a=e.location,n=c.a.useState(!1),i=Object(l.a)(n,2),o=i[0],s=i[1],j=c.a.useMemo((function(){return L.find((function(e){return e.link===a.pathname||null!==e.link&&a.pathname.startsWith(e.link+"/")}))||L[0]}),[a]);t=j.title,c.a.useEffect((function(){document.title=t+" - "+document.location.host}),[t]);var u=function(e){return function(){s(e)}},b=P(),h=Object(r.jsxs)("div",{className:b.list,children:[Object(r.jsx)(w.a,{children:Object(r.jsx)(D.a,{button:!0,component:d.b,to:"/",children:Object(r.jsx)(S.a,{primary:"Trackmania Records"})},0)}),Object(r.jsx)(p.a,{}),Object(r.jsxs)(w.a,{children:[L.filter((function(e){return e.inDrawer})).map((function(e,t){return Object(r.jsx)(D.a,{button:!0,component:d.b,to:e.link,className:e.title===j.title?b.active:void 0,children:Object(r.jsx)(S.a,{primary:e.title})},t)})),Object(r.jsx)(p.a,{}),Object(r.jsxs)(w.a,{children:[Object(r.jsx)(D.a,{button:!0,component:d.b,to:"/replay",children:Object(r.jsx)(S.a,{primary:"Replay Inspection"})},0),Object(r.jsx)(D.a,{button:!0,component:d.b,to:"/about",children:Object(r.jsx)(S.a,{primary:"About"})},1)]})]})]});return Object(r.jsxs)("div",{className:b.root,children:[Object(r.jsx)(O.a,{className:b.appBar,position:"fixed",children:Object(r.jsxs)(C.a,{children:[Object(r.jsx)(y.a,{lgUp:!0,children:Object(r.jsx)(v.a,{className:b.menuButton,onClick:u(!0),color:"inherit",children:Object(r.jsx)(R.a,{})})}),Object(r.jsx)(B.a,{variant:"h6",color:"inherit",children:Object(r.jsx)(k.a,{component:d.b,to:"/",color:"inherit",underline:"none",children:"Trackmania Records"})})]})}),Object(r.jsx)(y.a,{lgUp:!0,implementation:"css",children:Object(r.jsx)(T.a,{open:o,onClose:u(!1),onOpen:u(!0),variant:"temporary",children:Object(r.jsx)("div",{tabIndex:0,role:"button",onClick:u(!1),onKeyDown:u(!1),children:h})})}),Object(r.jsx)(y.a,{mdDown:!0,implementation:"css",children:Object(r.jsx)(g.a,{variant:"permanent",children:Object(r.jsx)("div",{tabIndex:0,role:"button",children:h})})})]})})),M=a(10),U=a(16),E=a.n(U),W=a(240),I=a(247),Y=a(246),F=a(177),_=a(248),A=a(241),H=a(244),G=a(239),X=a(242),Z=a(243),K=a(270),J=a(238),$=function(e){var t=e.children;return Object(r.jsxs)(J.a,{container:!0,children:[Object(r.jsx)(J.a,{item:!0,xs:!1,md:1,lg:2}),Object(r.jsx)(J.a,{item:!0,xs:12,md:10,lg:9,children:t})]})},V=a(90),Q=a(91),ee={darkMode:new(function(){function e(){Object(V.a)(this,e),this.enabled="true"===localStorage.getItem("dark_mode")}return Object(Q.a)(e,[{key:"toggle",value:function(){return this.enabled=!this.enabled,localStorage.setItem("dark_mode",this.enabled.toString()),this}}]),e}())},te=[function(e,t){switch(t.action){case"toggleDarkMode":return Object(M.a)(Object(M.a)({},e),{},{darkMode:e.darkMode.toggle()});default:throw new Error("Unknown action type.")}},ee],ae=c.a.createContext(ee),re=Object(b.a)((function(e){return{aboutBox:{padding:e.spacing(3)}}})),ne=[{repo:"NeKzor/trackmania-records",branch:"master"},{repo:"NeKzBot/tmx-records",branch:"api"},{repo:"NeKzor/trackmania-records",branch:"gh-pages"}],ce={whiteSpace:"nowrap"},ie=function(e){return Object(r.jsx)(G.a,Object(M.a)({size:"small"},e))},oe=function(){return Object(r.jsx)("div",{style:{paddingTop:"50px"}})},se=function(){var e=E.a.utc(),t=E()().utc().endOf("day").add(17,"hours");t.isBefore(e)&&(t=E()().utc().endOf("day").add(1,"day").add(17,"hours"));var a=E.a.duration({from:e,to:t}),r=a.get("hours"),n=a.get("minutes"),c=a.get("seconds"),i=function(e){return 1===e?"":"s"};return"".concat(r," hour").concat(i(r),", ").concat(n," minute").concat(i(n),", ").concat(c," second").concat(i(c))},le=null,de=function(){var e=N(),t=c.a.useContext(ae),a=t.state.darkMode,n=t.dispatch,i=c.a.useState([]),o=Object(l.a)(i,2),s=o[0],d=o[1],j=c.a.useState(se()),u=Object(l.a)(j,2),b=u[0],h=u[1];c.a.useEffect((function(){return le=setInterval((function(){h(se())}),1e3),function(){return clearInterval(le)}}),[]);c.a.useEffect((function(){var t=function(t){console.error(t),e.current&&d(void 0)};Promise.all(ne.map((function(e){var t=e.repo,a=e.branch;return fetch("https://api.github.com/repos/".concat(t,"/commits/").concat(a))}))).then((function(a){Promise.all(a.map((function(e){return e.json()}))).then((function(t){e.current&&d(t.map((function(e){return{sha:e.sha,author:e.author?e.author:e.commit.author,message:e.commit.message,date:e.commit.author.date}})))})).catch(t)})).catch(t)}),[e]);var m=re();return Object(r.jsx)($,{children:Object(r.jsxs)(F.a,{className:m.aboutBox,children:[Object(r.jsx)(B.a,{component:"h2",variant:"h5",children:"Trackmania Campaign Records & Statistics"}),Object(r.jsx)("br",{}),Object(r.jsx)(B.a,{variant:"body1",children:"This web app mirrors campaign world records of many Trackmania games. Data is mainly provided by Trackmania Exchange but also by speedrun.com."}),Object(r.jsx)(B.a,{variant:"body1",children:"Additionally it ranks players based on how many world records they hold and how long their records have been lasting."}),Object(r.jsx)(oe,{}),Object(r.jsx)(B.a,{variant:"h5",children:"Next Update"}),Object(r.jsx)("br",{}),b,Object(r.jsx)(oe,{}),Object(r.jsx)(B.a,{variant:"h5",children:"Changelog"}),Object(r.jsx)("br",{}),void 0===s?Object(r.jsx)(B.a,{variant:"body1",children:"Unable to fetch status from GitHub."}):0===s.length?Object(r.jsx)(W.a,{className:m.progress}):Object(r.jsx)("div",{style:{overflowX:"auto"},children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(X.a,{children:Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(G.a,{padding:"default",children:Object(r.jsx)(B.a,{variant:"body1",children:"Branch"})}),Object(r.jsx)(G.a,{padding:"default",children:Object(r.jsx)(B.a,{variant:"body1",children:"Date"})}),Object(r.jsx)(G.a,{padding:"default",children:Object(r.jsx)(B.a,{variant:"body1",children:"Author"})}),Object(r.jsx)(G.a,{padding:"default",children:Object(r.jsx)(B.a,{variant:"body1",children:"Commit"})})]})}),Object(r.jsx)(H.a,{children:s.map((function(e,t){var a=ne[t],n=a.repo,c=a.branch;return Object(r.jsxs)(Z.a,{tabIndex:-1,style:ce,children:[Object(r.jsx)(ie,{align:"left",children:Object(r.jsx)(k.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(n,"/tree/").concat(c),children:c})}),Object(r.jsx)(ie,{align:"left",style:ce,children:Object(r.jsx)(K.a,{title:E()(e.date).toString(),children:Object(r.jsx)("span",{children:E()(e.date).from()})})}),Object(r.jsx)(ie,{align:"left",children:e.author.html_url?Object(r.jsx)(k.a,{color:"inherit",rel:"noopener",href:e.author.html_url,children:e.author.login}):e.author.name||"n/a"}),Object(r.jsx)(ie,{align:"left",style:ce,children:Object(r.jsx)(K.a,{title:e.message,children:Object(r.jsx)(k.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(n,"/commit/").concat(e.sha),children:e.sha})})})]},t)}))})]})}),Object(r.jsx)(oe,{}),Object(r.jsx)(B.a,{variant:"h5",children:"Theme Settings"}),Object(r.jsx)("br",{}),Object(r.jsx)(Y.a,{row:!0,children:Object(r.jsx)(I.a,{control:Object(r.jsx)(_.a,{checked:a.enabled,onChange:function(){n({action:"toggleDarkMode"})},color:"primary"}),label:"Dark Mode"})}),Object(r.jsx)(oe,{}),Object(r.jsx)(B.a,{variant:"h5",children:"Credits"}),Object(r.jsx)("br",{}),Object(r.jsx)(k.a,{rel:"noopener",href:"http://www.tm-exchange.com",children:"tm-exchange.com"}),Object(r.jsx)("br",{}),Object(r.jsx)(k.a,{rel:"noopener",href:"https://tm.mania-exchange.com",children:"tm.mania-exchange.com"}),Object(r.jsx)("br",{}),Object(r.jsx)(k.a,{rel:"noopener",href:"https://www.speedrun.com/tmwii",children:"speedrun.com/tmwii"}),Object(r.jsx)("br",{}),Object(r.jsx)(k.a,{rel:"noopener",href:"https://github.com/jonese1234/Trackmania-Leaderboard",children:"jonese1234/Trackmania-Leaderboard"})]})})},je=a(68),ue=a.n(je),be=a(58),he=a(94),me=a(99),fe=a(261),xe=a(252),Oe=a(253),pe=a(263),ge=a(271),ye={numeric:!0},ve=function(e,t,a){var r=function(e,t){var r=we(e,a).toString();return we(t,a).toString().localeCompare(r,void 0,ye)},n="desc"===t?function(e,t){return r(e,t)}:function(e,t){return-r(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},ke=function(e,t,a,r){if(a===r)return ve(e,t,a);var n=function(e,t){var n=we(e,a).toString(),c=we(t,a).toString(),i=c.localeCompare(n,void 0,ye);return 0!==i?i:(n=we(e,r).toString(),(c=we(t,r).toString()).localeCompare(n,void 0,ye))},c="desc"===t?function(e,t){return n(e,t)}:function(e,t){return-n(e,t)};return e.map((function(e,t){return[e,t]})).sort((function(e,t){var a=c(e[0],t[0]);return 0!==a?a:e[1]-t[1]})).map((function(e){return e[0]}))},we=function(e,t){return-1!==t.indexOf(".")?t.split(".").filter((function(e){return e})).reduce((function(e,t){return e&&e[t]}),e):e[t]},De=function(e){return["nations","sunrise","original"].includes(e)?"http":"https"},Se=function(e){return"tm2"===e?{trackUrl:function(e){return"https://tm.mania-exchange.com/tracks/".concat(e)},imageUrl:function(e){return"https://tm.mania-exchange.com/tracks/screenshot/normal/".concat(e)},replayUrl:function(e){return"https://tm.mania-exchange.com/replays/download/".concat(e)},userUrl:function(e){return"https://tm.mania-exchange.com/user/profile/".concat(e)}}:"tmwii"===e?{trackUrl:function(e){return"https://speedrun.com/tmwii/".concat(e)},imageUrl:function(e){},replayUrl:function(e){},userUrl:function(e){return"https://www.speedrun.com/user/".concat(e)}}:{trackUrl:function(t){return"".concat(De(e),"://").concat(e,".tm-exchange.com/main.aspx?action=trackshow&id=").concat(t)},imageUrl:function(t){return"".concat(De(e),"://").concat(e,".tm-exchange.com/getclean.aspx?action=trackscreenscreens&id=").concat(t)},replayUrl:function(t){return"".concat(De(e),"://").concat(e,".tm-exchange.com/get.aspx?action=recordgbx&id=").concat(t)},userUrl:function(t){return"".concat(De(e),"://").concat(e,".tm-exchange.com/main.aspx?action=usershow&id=").concat(t)}}},Te=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],Ce=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return Object(r.jsx)(X.a,{children:Object(r.jsx)(Z.a,{children:Te.map((function(e){return Object(r.jsxs)(G.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(r.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(r.jsx)(ge.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){n(e,c,i)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var c,i}))})})},Be=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),ze={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Re={whiteSpace:"nowrap"},Ne={padding:"7px 0px 7px 16px"},Pe=function(e){return Object(r.jsx)(G.a,Object(M.a)({style:Ne},e))},Le=function(e){var t=e.data,a=e.game,n=c.a.useState(ze),i=Object(l.a)(n,2),o=i[0],s=o.order,d=o.orderBy,j=o.thenBy,u=o.rowsPerPage,b=o.page,h=i[1],m=Be();return Object(r.jsx)("div",{className:m.root,children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(Ce,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;h((function(e){return Object(M.a)(Object(M.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))}}),Object(r.jsx)(H.a,{children:ke(t,s,d,j).slice(b*u,b*u+u).map((function(e){return Object(r.jsxs)(Z.a,{tabIndex:-1,children:[Object(r.jsx)(Pe,{align:"left",children:Object(r.jsx)(k.a,{style:Re,color:"inherit",href:Se(a).userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(r.jsx)(Pe,{align:"left",children:e.wrs}),Object(r.jsxs)(Pe,{align:"left",children:[e.duration," day",1===e.duration?"":"s"]})]},e.user.id)}))})]})})},qe=a(25),Me=a.n(qe),Ue=a(97),Ee=a.n(Ue),We=a(260);function Ie(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0===e||null===e)return e;if("Stunts"===a)return e+" pts.";if("tm2"!==t){var r=(e/=10)%100,n=Math.floor(e/100),c=n%60,i=Math.floor(n/60);return(i>0?i+":":"")+(c<10&&i>0?"0"+c:c)+"."+(r<10?"0"+r:r)}var o=e%1e3,s=Math.floor(e/1e3),l=s%60,d=Math.floor(s/60);return(d>0?d+":":"")+(l<10&&d>0?"0"+l:l)+"."+(o<100?o<10?"00"+o:"0"+o:o)}var Ye=Object(We.a)().domain([0,24,336,1440]).range(["#2eb82e","#258e25","#cca300","#e67300"]);function Fe(e){var t=E()().diff(E()(e),"hours");return t<=1440?Ye(t):void 0}var _e=Object(We.a)().domain([0,480,960,1440]).range(["#2eb82e","#cca300","#e67300","#e63200"]);for(var Ae=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],He=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return Object(r.jsx)(X.a,{children:Object(r.jsx)(Z.a,{children:Ae.map((function(e){return Object(r.jsxs)(G.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(r.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(r.jsx)(ge.a,{active:a===e.id,direction:t,onClick:(c=e.id,function(e){n(e,c)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var c}))})})},Ge=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),Xe={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},Ze={whiteSpace:"nowrap"},Ke={padding:"7px 0px 7px 16px"},Je=function(e){return Object(r.jsx)(G.a,Object(M.a)({style:Ke},e))},$e=function(e){var t=e.data,a=e.game,n=e.stats,i=e.useLiveDuration,o=c.a.useState(Xe),s=Object(l.a)(o,2),d=s[0],j=d.order,u=d.orderBy,b=d.rowsPerPage,h=d.page,m=s[1],f=Se(a),x=Ge();return Object(r.jsx)("div",{className:x.root,children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(He,{order:j,orderBy:u,onRequestSort:function(e,t){var a=t;m((function(e){return Object(M.a)(Object(M.a)({},e),{},{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),Object(r.jsx)(H.a,{children:ve(t,j,u).slice(h*b,h*b+b).map((function(e){var t=Ie(e.score,a,e.track.type);return Object(r.jsxs)(Z.a,{tabIndex:-1,children:[(e.track.isFirst||"track.name"!==u)&&Object(r.jsx)(Je,{style:Ze,rowSpan:"track.name"!==u?1:e.track.records,align:"left",children:Object(r.jsx)(k.a,{color:"inherit",href:f.trackUrl(e.track.id),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(r.jsxs)(Je,{align:"left",children:[Object(r.jsx)(K.a,{title:"Download Replay",placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(k.a,{style:Ze,color:"inherit",href:f.replayUrl(e.replay),rel:"noreferrer",target:"_blank",children:t})}),"tm2"===a&&E()(e.date).isBefore("2017-05-09")&&Object(r.jsx)(K.a,{title:"This run was done on an older game version.",placement:"bottom-end",enterDelay:300,children:Object(r.jsx)("span",{children:Object(r.jsx)(v.a,{size:"small",disabled:!0,children:Object(r.jsx)(Ee.a,{fontSize:"inherit"})})})})]}),Object(r.jsx)(Je,{align:"left",children:Object(r.jsx)(k.a,{style:Ze,color:"inherit",href:f.userUrl(e.user.id),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(r.jsx)(Je,{align:"left",children:Object(r.jsx)(K.a,{title:Object(r.jsx)(Me.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(Me.a,{style:Object(M.a)({color:Fe(e.date)},Ze),format:"YYYY-MM-DD",children:e.date})})}),Object(r.jsx)(Je,{align:"left",children:Object(r.jsx)(K.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:i?Object(r.jsx)(Me.a,{style:Ze,diff:e.date,unit:"days"}):Object(r.jsx)("span",{children:e.duration})})})]},"".concat(e.track.name,"-").concat(e.user.id))}))}),Object(r.jsxs)(H.a,{children:[n.totalTime>0&&Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(Je,{align:"right",children:"Total Time"}),Object(r.jsx)(Je,{children:Object(r.jsx)(K.a,{title:E.a.duration(n.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)("span",{children:Ie(n.totalTime,a)})})}),Object(r.jsx)(Je,{colSpan:3})]}),n.totalPoints>0&&Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(Je,{align:"right",children:"Total Points"}),Object(r.jsx)(Je,{children:Object(r.jsx)("span",{children:Ie(n.totalPoints,a,"Stunts")})}),Object(r.jsx)(Je,{colSpan:3})]})]})]})})},Ve=a(135),Qe=a.n(Ve),et=function(e,t){return"https://speedrun.com/tmwii/".concat(e,"#").concat(t)},tt=function(e){return"https://www.speedrun.com/user/".concat(e)},at=function(e){return"https://www.speedrun.com/tmwii/run/".concat(e)},rt=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"},{id:"replay",sortable:!1,label:"Video",align:"left"}],nt=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return Object(r.jsx)(X.a,{children:Object(r.jsx)(Z.a,{children:rt.map((function(e){return Object(r.jsxs)(G.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(r.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(r.jsx)(ge.a,{active:a===e.id,direction:t,onClick:(c=e.id,function(e){n(e,c)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var c}))})})},ct=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),it={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},ot={whiteSpace:"nowrap"},st={padding:"7px 0px 7px 16px"},lt=function(e){return Object(r.jsx)(G.a,Object(M.a)({style:st},e))},dt=function(e){var t=e.data,a=e.game,n=e.stats,i=e.useLiveDuration,o=e.category,s=c.a.useState(it),d=Object(l.a)(s,2),j=d[0],u=j.order,b=j.orderBy,h=j.rowsPerPage,m=j.page,f=d[1],x=ct();return Object(r.jsx)("div",{className:x.root,children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(nt,{order:u,orderBy:b,onRequestSort:function(e,t){var a=t;f((function(e){return Object(M.a)(Object(M.a)({},e),{},{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))}}),Object(r.jsx)(H.a,{children:ve(t,u,b).slice(m*h,m*h+h).map((function(e){return Object(r.jsxs)(Z.a,{tabIndex:-1,children:[(e.track.isFirst||"track.name"!==b)&&Object(r.jsx)(lt,{style:ot,rowSpan:"track.name"!==b?1:e.track.records,align:"left",children:Object(r.jsx)(k.a,{color:"inherit",href:et(e.track.name,o),rel:"noreferrer",target:"_blank",children:e.track.name})}),Object(r.jsx)(lt,{align:"left",children:Object(r.jsx)(k.a,{style:ot,color:"inherit",href:at(e.id),rel:"noreferrer",target:"_blank",children:Ie(e.score,a)})}),Object(r.jsx)(lt,{align:"left",children:Object(r.jsx)(k.a,{style:ot,color:"inherit",href:tt(e.user.name),rel:"noreferrer",target:"_blank",children:e.user.name})}),Object(r.jsx)(lt,{align:"left",children:Object(r.jsx)(K.a,{title:Object(r.jsx)(Me.a,{fromNow:!0,children:e.date}),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(Me.a,{style:Object(M.a)({color:Fe(e.date)},ot),format:"YYYY-MM-DD",children:e.date})})}),Object(r.jsx)(lt,{align:"left",children:Object(r.jsx)(K.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:i?Object(r.jsx)(Me.a,{style:ot,diff:e.date,unit:"days"}):Object(r.jsx)("span",{children:e.duration})})}),Object(r.jsx)(lt,{align:"left",children:Object(r.jsx)(K.a,{title:"Watch Run",placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(v.a,{size:"small",href:e.media,target:"_blank",children:Object(r.jsx)(Qe.a,{fontSize:"inherit"})})})})]},"".concat(e.track.name,"-").concat(e.user.id))}))}),Object(r.jsx)(H.a,{children:n.totalTime>0&&Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(lt,{align:"right",children:"Total Time"}),Object(r.jsx)(lt,{children:Object(r.jsx)(K.a,{title:E.a.duration(n.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)("span",{children:Ie(n.totalTime,a)})})}),Object(r.jsx)(lt,{colSpan:4})]})})]})})},jt=function(e){var t=e.data,a=e.props;return Object(r.jsx)(B.a,Object(M.a)(Object(M.a)({variant:"h5",gutterBottom:!0,style:{padding:"50px 0px 50px 50px"}},a),{},{children:t}))},ut=a(98),bt=a.n(ut),ht=a(249),mt=Object(ht.a)((function(e){var t=e.labels,a=e.series,n=e.title,c=e.theme,i=e.rest,o=void 0===i||i,s="dark"===c.palette.type;if(o){var l=a.slice(30).reduce((function(e,t){return e+t}),0);a=a.slice(0,30),t=t.slice(0,30),a.push(l),t.push("Rest")}var d=new Array(a.length).fill(0).map((function(){return"#"+(16777215*Math.random()<<0).toString(16).padStart(6,"0")}));return Object(r.jsx)(bt.a,{options:{labels:t,legend:{show:!1},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0},value:{show:!0,color:s?"white":"black"},total:{show:!0,label:n,color:s?"white":"black"}}}}},colors:d},series:a,type:"donut",height:"400"})})),ft=a(251),xt=a(250),Ot=a(136),pt=a.n(Ot),gt=Object(b.a)((function(e){return{fab:{margin:0,top:"auto",right:30,bottom:30,left:"auto",position:"fixed"}}})),yt=function(){!function e(){var t=document.documentElement.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/5))}()},vt=function(){var e=function(){var e=c.a.useRef(void 0),t=c.a.useState({x:0,y:0}),a=Object(l.a)(t,2),r=a[0],n=a[1],i=c.a.useCallback((function(){clearTimeout(e.current),e.current=setTimeout((function(){n({x:window.scrollX,y:window.scrollY})}),100)}),[n]);return c.a.useEffect((function(){return window.addEventListener("scroll",i),function(){clearTimeout(e.current),window.removeEventListener("scroll",i)}}),[i]),r}().y,t=gt();return Object(r.jsx)(xt.a,{in:0!==e,timeout:1e3,children:Object(r.jsx)(ft.a,{title:"Jump to top",color:"primary",className:t.fab,onClick:yt,children:Object(r.jsx)(pt.a,{})})})},kt=new(function(){function e(){Object(V.a)(this,e),this.baseApi="https://raw.githubusercontent.com/NeKzBot/tmx-records/api"}return Object(Q.a)(e,[{key:"request",value:function(){var e=Object(he.a)(ue.a.mark((function e(t,a){var r;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/").concat(t,"/").concat(a||"latest",".json"));case 2:if(r=e.sent,console.log("GET ".concat(r.url," (").concat(r.status,")")),r.ok){e.next=6;break}throw r;case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),wt=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"}}})),Dt=Object(me.a)((function(e){var t=e.match,a=N(),n=c.a.useState(void 0),i=Object(l.a)(n,2),o=i[0],s=i[1],d=c.a.useState("tm2"),j=Object(l.a)(d,2),u=j[0],b=j[1],h=c.a.useState(0),m=Object(l.a)(h,2),f=m[0],x=m[1],O=t.params[0],p=t.params.date,g=void 0===p||"latest"===p;c.a.useEffect((function(){x(0),s(void 0)}),[O]),c.a.useEffect((function(){Object(he.a)(ue.a.mark((function e(){var t,r,n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt.request(O,p);case 2:if((t=e.sent)[0]&&t[0].tracks[0].wrs){r=Object(be.a)(t);try{for(c=function(){var e=n.value;void 0===e.stats.totalPoints&&(e.stats.totalTime=e.tracks.filter((function(e){return"Stunts"!==e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0),e.stats.totalPoints=e.tracks.filter((function(e){return"Stunts"===e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,t){return e+t}),0));var t,a=[],r=Object(be.a)(e.tracks);try{for(r.s();!(t=r.n()).done;){var c,i=t.value,o=Object(be.a)(i.wrs);try{for(o.s();!(c=o.n()).done;){var s=c.value,l=g?E()().diff(E()(s.date),"d"):s.duration;a.push(Object(M.a)(Object(M.a)({track:{id:i.id,name:i.name,type:i.type,isFirst:s===i.wrs[0],records:i.wrs.length}},s),{},{duration:l}))}}catch(d){o.e(d)}finally{o.f()}}}catch(d){r.e(d)}finally{r.f()}e.tracks=a,g&&e.leaderboard.forEach((function(t,a){e.leaderboard[a].duration=e.tracks.filter((function(e){return e.user.id===t.user.id})).map((function(e){return e.duration})).reduce((function(e,t){return e+t}),0)}))},r.s();!(n=r.n()).done;)c()}catch(i){r.e(i)}finally{r.f()}}if(a.current){e.next=6;break}return e.abrupt("return");case 6:b(O),s(t);case 8:case"end":return e.stop()}}),e)})))()}),[a,O,p,g]);var y="tmwii"===u?dt:$e,v=wt();return Object(r.jsxs)($,{children:[Object(r.jsx)(F.a,{children:void 0===o?Object(r.jsx)(xe.a,{}):0===o.length?Object(r.jsx)(jt,{data:"No data."}):Object(r.jsxs)(r.Fragment,{children:[o.length>1&&Object(r.jsx)(pe.a,{value:f,onChange:function(e,t){x(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:o.map((function(e){return Object(r.jsx)(Oe.a,{label:e.name},e.name)}))}),Object(r.jsx)(B.a,{component:"div",role:"tabpanel",children:Object(r.jsx)(fe.a,{p:3,children:Object(r.jsxs)(J.a,{container:!0,direction:"column",justify:"center",children:[Object(r.jsx)(J.a,{item:!0,xs:12,children:Object(r.jsx)(y,{data:o[f].tracks,game:u,stats:o[f].stats,useLiveDuration:g,category:o[f].name})}),Object(r.jsx)(J.a,{item:!0,xs:12,className:v.padTop,children:Object(r.jsxs)(J.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(r.jsx)(J.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(Le,{data:o[f].leaderboard,game:O})}),Object(r.jsx)(J.a,{item:!0,xs:12,md:6,className:v.padTop,children:Object(r.jsxs)(J.a,{container:!0,direction:"column",justify:"center",children:[Object(r.jsx)(J.a,{item:!0,xs:12,children:Object(r.jsx)(mt,{title:"WRs",labels:o[f].leaderboard.map((function(e){return e.user.name})),series:o[f].leaderboard.map((function(e){return e.wrs}))})}),Object(r.jsx)(J.a,{item:!0,xs:12,className:v.padTop,children:Object(r.jsx)(mt,{title:"Duration",labels:o[f].leaderboard.map((function(e){return e.user.name})),series:o[f].leaderboard.map((function(e){return e.duration}))})})]})})]})})]})})})]})}),Object(r.jsx)(vt,{})]})})),St=a(137),Tt=a.n(St),Ct=a(254),Bt=a(267),zt=a(268),Rt=a(264),Nt=a(15),Pt=function(e){return Object(r.jsx)(Rt.a,Object(M.a)({elevation:6,variant:"filled"},e))},Lt={info:"drag & drop replay here :)",magic:"GBX",version:6,settings:"BUCR",classId:50933760,headerSize:331,headerChunks:2,chunkOffset:348},qt=function(){var e=N(),t=Object(Nt.a)(),a=c.a.useState(Lt),n=Object(l.a)(a,2),i=n[0],o=n[1],s=c.a.useState(!0),d=Object(l.a)(s,2),j=d[0],u=d[1],b=c.a.useState(!1),h=Object(l.a)(b,2),m=h[0],f=h[1],x=function(e,t){"clickaway"!==t&&f(!1)},O=c.a.useCallback((function(t){if(t){var a=new FileReader;a.onload=function(t){var a=t.target.result;try{if(!e.current)return;o(Lt),f(!1);var r=window,n=r.Buffer,c=r.Replay,i=window.replay=c.default().read(n.from(a),{parseGhost:j});if(!e.current)return;i.ghost&&delete i.ghost.restData,function e(t){Object.keys(t).forEach((function(a){"_view"===a?delete t._view:"object"===typeof t[a]&&e(t[a])}))}(i),o(i)}catch(s){e.current&&f(s.message)}},a.readAsArrayBuffer(t)}}),[e,j,o,f]),p=c.a.useCallback((function(e){return O(e.target.files[0])}),[O]),g=function(e){e.dataTransfer.items?e.dataTransfer.items.clear():e.dataTransfer.clearData()};c.a.useEffect((function(){return document.querySelector("#file").addEventListener("change",p),function(){return document.querySelector("#file").removeEventListener("change",p)}}),[p]);return Object(r.jsx)($,{children:Object(r.jsxs)(F.a,{style:{padding:"20px 20px 20px 20px"},children:[Object(r.jsx)(Ct.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){document.querySelector("#file").click()},children:"Open file"}),Object(r.jsx)("input",{type:"file",id:"file",style:{display:"none"}}),Object(r.jsx)(I.a,{style:{marginLeft:"20px"},control:Object(r.jsx)(Bt.a,{color:"primary",checked:j,onChange:function(e){u(e.target.checked)}}),label:"Parse Ghost"}),Object(r.jsx)("div",{style:{paddingBottom:"20px"}}),Object(r.jsx)("div",{onDrop:function(e){e.preventDefault();var t=[];if(e.dataTransfer.items)for(var a=0;a<e.dataTransfer.items.length;++a)"file"===e.dataTransfer.items[a].kind&&t.push(e.dataTransfer.items[a].getAsFile());O(t[0]),g(e)},onDragOver:function(e){e.preventDefault()},children:Object(r.jsx)(Tt.a,{name:"replay",style:{fontSize:"14px"},src:i,theme:"light"===t.palette.type?"bright:inverted":"solarized",displayDataTypes:!1,displayObjectSize:!1,enableClipboard:!1})}),Object(r.jsx)(zt.a,{open:!1!==m,autoHideDuration:6e3,onClose:x,children:Object(r.jsx)(Pt,{onClose:x,severity:"error",children:m})})]})})},Mt=function(){return Object(r.jsx)($,{children:Object(r.jsx)(F.a,{children:Object(r.jsx)(jt,{data:"Page not found :("})})})},Ut=a(272),Et=a(257),Wt=a(262),It=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],Yt=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",sortable:!0,label:"World Records",align:"left"}],Ft=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort,c=e.hasDuration,i=c?It:Yt;return Object(r.jsx)(X.a,{children:Object(r.jsx)(Z.a,{children:i.map((function(e){return Object(r.jsxs)(G.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,children:[!0===e.sortable&&Object(r.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(r.jsx)(ge.a,{active:a===e.id,direction:t,onClick:(c=e.id,i=e.id2,function(e){n(e,c,i)}),children:e.label})}),!1===e.sortable&&e.label]},e.id);var c,i}))})})},_t=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),At={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Ht={padding:"7px 0px 7px 16px"},Gt=function(e){return Object(r.jsx)(G.a,Object(M.a)({style:Ht},e))},Xt=function(e){var t=e.data,a=e.hasDuration,n=c.a.useState(At),i=Object(l.a)(n,2),o=i[0],s=o.order,d=o.orderBy,j=o.thenBy,u=i[1],b=_t();return Object(r.jsx)("div",{className:b.root,children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(Ft,{order:s,orderBy:d,onRequestSort:function(e,t,a){var r=t,n=a;u((function(e){return Object(M.a)(Object(M.a)({},e),{},{order:e.orderBy===r&&"desc"===e.order?"asc":"desc",orderBy:r,thenBy:n})}))},hasDuration:a}),Object(r.jsx)(H.a,{children:(a?ke:ve)(t,s,d,j).map((function(e){return Object(r.jsxs)(Z.a,{tabIndex:-1,children:[Object(r.jsx)(Gt,{align:"left",children:e.user.name}),Object(r.jsx)(Gt,{align:"left",children:e.wrs}),a&&Object(r.jsx)(Gt,{align:"left",children:e.duration})]},e.user.name)}))})]})})},Zt=a(141),Kt=a(255),Jt=a(111),$t=a.n(Jt),Vt=a(138),Qt=a.n(Vt),ea=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"zone",sortable:!0,label:"Zone",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],ta=[{id:"track.monthDay",sortable:!0,label:"Day",align:"left"},{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"zone",sortable:!0,label:"Zone",align:"left"}],aa=function(e){var t=e.order,a=e.orderBy,n=e.onRequestSort,c=e.official,i=c?ea:ta;return Object(r.jsx)(X.a,{children:Object(r.jsx)(Z.a,{children:i.map((function(e,c){return Object(r.jsxs)(G.a,{align:e.align,padding:"default",sortDirection:a===e.id&&t,colSpan:c===i.length-1?2:1,children:[!0===e.sortable&&Object(r.jsx)(K.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300,children:Object(r.jsx)(ge.a,{active:a===e.id,direction:t,onClick:(o=e.id,function(e){n(e,o)}),children:e.label})}),!1===e.sortable&&e.label]},c);var o}))})})},ra=Object(b.a)((function(e){return{root:{overflowX:"auto"}}})),na={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},ca={whiteSpace:"nowrap"},ia={padding:"7px 0px 7px 16px"},oa=function(e){return Object(r.jsx)(G.a,Object(M.a)({style:ia},e))},sa=function(e,t){var a=t?"&authorId=21":"";return"https://trackmania.exchange/mapsearch2?trackname=".concat(encodeURIComponent(e.name)).concat(a)},la=Object(b.a)({root:{"& > *":{borderBottom:"unset"}}}),da=function(e){var t,a=e.wr,n=e.official,c=Ie(a.score,"tm2"),i=0!==a.delta?Ie(a.delta,"tm2"):null;return Object(r.jsxs)(Z.a,{tabIndex:-1,children:[n&&Object(r.jsx)(oa,{align:"left",children:Object(r.jsx)(K.a,{title:Object(r.jsx)(Me.a,{format:"HH:mm",children:a.date}),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(Me.a,{style:Object(M.a)({color:Fe(a.date)},ca),format:"YYYY-MM-DD",children:a.date})})}),!n&&Object(r.jsx)(oa,{align:"left",children:Object(r.jsx)(K.a,{title:a.setAfter,placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(Me.a,{style:Object(M.a)({color:(t=a.pastMinutes,t>=0&&t<=1440?_e(t):void 0)},ca),format:"HH:mm",children:a.date})})}),Object(r.jsxs)(oa,{align:"left",children:[c,a.note&&Object(r.jsx)(K.a,{title:a.note,placement:"bottom-end",enterDelay:300,children:Object(r.jsx)("span",{children:Object(r.jsx)(v.a,{size:"small",disabled:!0,children:Object(r.jsx)(Ee.a,{fontSize:"inherit"})})})})]}),Object(r.jsx)(oa,{align:"left",children:i?"-"+i:""}),Object(r.jsx)(oa,{align:"left",children:a.user.name}),Object(r.jsx)(oa,{align:"left",children:Object(r.jsx)(K.a,{title:a.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300,children:Object(r.jsx)("span",{children:a.user.zone[2].name})})}),Object(r.jsx)(oa,{align:"left",children:Object(r.jsx)(K.a,{title:"Download Ghost",placement:"bottom",enterDelay:300,children:Object(r.jsx)(v.a,{size:"small",style:ca,color:"inherit",href:"https://prod.trackmania.core.nadeo.online/storageObjects/"+a.replay,rel:"noreferrer",target:"_blank",children:Object(r.jsx)($t.a,{fontSize:"inherit"})})})})]})},ja=function(e){var t=e.wr,a=e.official,n=e.orderBy,c=e.useLiveDuration,i=e.history,o=e.onClickHistory,s=Ie(t.score,"tm2"),l=0!==t.delta?Ie(t.delta,"tm2"):null,d=la(),j=i===t.track.id,u="track.monthDay"===n||"track.name"===n;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Z.a,{tabIndex:-1,children:[!a&&(t.track.isFirst||!u)&&Object(r.jsx)(oa,{align:"left",rowSpan:u?t.track.records:1,children:t.track.monthDay}),(t.track.isFirst||!u)&&Object(r.jsx)(oa,{style:ca,rowSpan:u?t.track.records:1,align:"left",children:Object(r.jsx)(k.a,{color:"inherit",href:sa(t.track,a),rel:"noreferrer",target:"_blank",children:t.track.name})}),Object(r.jsxs)(oa,{align:"left",children:[a&&l&&Object(r.jsx)(K.a,{title:Object(r.jsxs)("span",{children:["-",l," to former record"]}),placement:"bottom",enterDelay:300,children:Object(r.jsx)("span",{children:s})}),a&&!l&&Object(r.jsx)("span",{children:s}),!a&&l&&Object(r.jsx)(K.a,{title:Object(r.jsxs)("span",{children:["-",l," to former record"]}),placement:"bottom",enterDelay:300,children:Object(r.jsx)("span",{children:s})}),!a&&!l&&Object(r.jsx)("span",{children:s})]}),Object(r.jsx)(oa,{align:"left",children:t.user.name}),Object(r.jsx)(oa,{align:"left",children:Object(r.jsx)(K.a,{title:t.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300,children:Object(r.jsx)("span",{children:t.user.zone[2].name})})}),a&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(oa,{align:"left",children:Object(r.jsx)(K.a,{title:Object(r.jsx)(Me.a,{fromNow:!0,children:t.date}),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)(Me.a,{style:Object(M.a)({color:Fe(t.date)},ca),format:"YYYY-MM-DD",children:t.date})})}),Object(r.jsx)(oa,{align:"left",children:Object(r.jsx)(K.a,{title:"in days",placement:"bottom-end",enterDelay:300,children:c?Object(r.jsx)(Me.a,{style:ca,diff:t.date,unit:"days"}):Object(r.jsx)("span",{children:t.duration})})})]}),Object(r.jsxs)(oa,{align:"left",children:[Object(r.jsx)(K.a,{title:"Download Ghost",placement:"bottom",enterDelay:300,children:Object(r.jsx)(v.a,{size:"small",style:ca,color:"inherit",href:"https://prod.trackmania.core.nadeo.online/storageObjects/"+t.replay,rel:"noreferrer",target:"_blank",children:Object(r.jsx)($t.a,{fontSize:"inherit"})})}),t.track.isLast&&t.track.history&&Object(r.jsx)(v.a,{color:"inherit",size:"small",style:ca,onClick:function(){return o(t.track.id)},children:Object(r.jsx)(Qt.a,{fontSize:"inherit"})})]})]}),t.track.isLast&&t.track.history&&Object(r.jsx)(Z.a,{className:d.root,children:Object(r.jsx)(oa,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:Object(r.jsx)(Kt.a,{in:j,timeout:"auto",unmountOnExit:!0,children:Object(r.jsxs)(fe.a,{margin:1,children:[Object(r.jsx)(B.a,{variant:"h6",gutterBottom:!0,component:"div",children:"History"}),Object(r.jsxs)(A.a,{size:"small","aria-label":"purchases",children:[Object(r.jsx)(X.a,{children:Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(oa,{children:a?"Date":"Time"}),Object(r.jsx)(oa,{children:"Record"}),Object(r.jsx)(oa,{children:"Timesave"}),Object(r.jsx)(oa,{children:"Player"}),Object(r.jsx)(oa,{colSpan:2,children:"Zone"})]})}),Object(r.jsx)(H.a,{children:t.track.history.map((function(e,t){return Object(r.jsx)(da,{wr:e,official:a},t)}))})]})]})})})})]})},ua=function(e){var t=e.data,a=e.stats,n=e.official,i=e.useLiveDuration,o=c.a.useState(na),s=Object(l.a)(o,2),d=s[0],j=d.order,u=d.rowsPerPage,b=d.page,h=Object(Zt.a)(d,["order","rowsPerPage","page"]),m=s[1],f=c.a.useState(null),x=Object(l.a)(f,2),O=x[0],p=x[1],g=h.orderBy;g=n&&"track.monthDay"===g?"track.name":g;c.a.useEffect((function(){m((function(e){return Object(M.a)(Object(M.a)({},e),{},{orderBy:n?"track.name":"track.monthDay"})}))}),[t,n]);var y=c.a.useCallback((function(e){p(O!==e?e:null)}),[O,p]),v=ra();return Object(r.jsx)("div",{className:v.root,children:Object(r.jsxs)(A.a,{size:"small",children:[Object(r.jsx)(aa,{order:j,orderBy:g,onRequestSort:function(e,t){var a=t;m((function(e){return Object(M.a)(Object(M.a)({},e),{},{order:e.orderBy===a&&"desc"===e.order?"asc":"desc",orderBy:a})}))},official:n}),Object(r.jsx)(H.a,{children:ve(t,j,g).slice(b*u,b*u+u).map((function(e,t){return Object(r.jsx)(ja,{wr:e,official:n,orderBy:g,useLiveDuration:i,history:O,onClickHistory:y},t)}))}),Object(r.jsx)(H.a,{children:a.totalTime>0&&Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(oa,{align:"right",colSpan:n?1:2,children:"Total Time"}),Object(r.jsx)(oa,{children:Object(r.jsx)(K.a,{title:E.a.duration(a.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300,children:Object(r.jsx)("span",{children:Ie(a.totalTime,"tm2")})})}),Object(r.jsx)(oa,{colSpan:n?5:3})]})})]})})},ba=Object(ht.a)((function(e){var t=e.labels,a=e.series,n=(e.title,"dark"===e.theme.palette.type);return Object(r.jsx)(bt.a,{options:{xaxis:{categories:t},legend:{show:!1},dataLabels:{enabled:!1},chart:{toolbar:{show:!1},foreColor:n?"white":"black"},tooltip:{theme:n?"dark":"light"},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{bar:{horizontal:!0}}},series:a,type:"bar",height:"800"})})),ha=a(256),ma=[],fa=[],xa=E()(),Oa=E()("2020-07-01"),pa={7:"Summer",10:"Fall",1:"Winter",4:"Spring"};Oa.diff(xa)<0;){var ga=pa[Oa.month()+1],ya=Oa.format("YYYY");ma.push(Object(r.jsxs)(ha.a,{value:"campaign/".concat(ga,"-").concat(ya).toLowerCase(),children:[ga," ",ya]},ma.length));for(var va=Oa.clone(),ka=0;ka<3&&va.month()<=xa.month();++ka){var wa=va.format("MMMM");fa.push(Object(r.jsxs)(ha.a,{value:"totd/".concat(wa,"-").concat(ya).toLowerCase(),children:[wa," ",ya]},fa.length)),va.add(1,"month")}Oa.add(3,"months")}ma.reverse(),fa.reverse(),ma.push(Object(r.jsx)(ha.a,{value:"campaign/training",children:"Training"},ma.length));var Da=function(e){return 1===e?"":"s"},Sa=function(e,t){var a=t.diff(e,"seconds"),r=t.diff(e,"hours");if(a>0){var n=t.diff(e,"minutes")-60*r;return"set after ".concat(r," hour").concat(Da(r)," and ").concat(n," minute").concat(Da(n))}var c=-r,i=-t.diff(e,"minutes")-60*c;return"set before ".concat(c," hour").concat(Da(c)," and ").concat(i," minute").concat(Da(i))},Ta=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),Ca=function(e){var t=e.campaign,a=e.onChangeCampaign,n=e.isOfficial,i=N(),o=c.a.useState(void 0),s=Object(l.a)(o,2),d=s[0],j=s[1],u=c.a.useState("leaderboard"),b=Object(l.a)(u,2),h=b[0],m=b[1],f=c.a.useCallback((function(e){m(e.target.value)}),[m]);c.a.useEffect((function(){j(void 0),kt.request("trackmania",t).then((function(e){var t,a=[],r=Object(be.a)(e.tracks);try{for(r.s();!(t=r.n()).done;){var n,c=t.value,o=Object(be.a)(c.wrs);try{var s=function(){var t=n.value,r=E()(t.date),i=e.isOfficial?void 0:E()([e.year,e.month]).utc().set({date:c.monthDay,hour:17,minute:0,second:0}),o=e.isOfficial?void 0:Sa(i,r),s=t===c.wrs[c.wrs.length-1],l=s&&(c.history||[]).length>1?c.history:void 0;l&&!e.isOfficial&&l.forEach((function(e){var t=E()(e.date);e.setAfter=Sa(i,t),e.pastMinutes=t.diff(i,"minutes")})),a.push(Object(M.a)(Object(M.a)({track:{id:c.id,name:c.name.replace(/(\$[0-9a-fA-F]{3}|\$[WNOITSGZBEMwnoitsgzbem]{1})/g,""),monthDay:c.monthDay,isFirst:t===c.wrs[0],isLast:s,records:c.wrs.length,history:l}},t),{},{zone:(t.user.zone[2]?t.user.zone[2]:t.user.zone[0]).name,setAfter:o}))};for(o.s();!(n=o.n()).done;)s()}catch(l){o.e(l)}finally{o.f()}}}catch(l){r.e(l)}finally{r.f()}e.tracks=a,i.current&&j(e)})).catch((function(e){console.log(e),i.current&&j(null)}))}),[i,t]);var x=h.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard"),O=Ta();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Et.a,{className:O.formControl,children:[Object(r.jsx)(Ut.a,{children:"Campaign"}),Object(r.jsx)(Wt.a,{value:t,onChange:a,children:n?ma:fa})]}),null===d&&Object(r.jsx)(jt,{data:"No data."}),void 0===d&&Object(r.jsx)(xe.a,{}),Object(r.jsx)(J.a,{container:!0,direction:"column",justify:"center",children:void 0!==d&&null!==d&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(J.a,{item:!0,xs:12,children:Object(r.jsx)(ua,{data:d.tracks,stats:d.stats,official:d.isOfficial})}),Object(r.jsxs)(J.a,{item:!0,xs:12,className:O.padTop,children:[Object(r.jsxs)(Et.a,{className:O.formControl,children:[Object(r.jsx)(Ut.a,{children:"Rankings Type"}),Object(r.jsxs)(Wt.a,{value:h,onChange:f,children:[Object(r.jsx)(ha.a,{value:"leaderboard",children:"Live"}),Object(r.jsx)(ha.a,{value:"uniqueLeaderboard",children:"Unique"}),Object(r.jsx)(ha.a,{value:"historyLeaderboard",children:"Total"})]})]}),Object(r.jsxs)(J.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(r.jsx)(J.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(Xt,{data:d[h],hasDuration:d.isOfficial&&"uniqueLeaderboard"!==h})}),Object(r.jsx)(J.a,{item:!0,xs:12,md:6,className:O.padTop,children:Object(r.jsxs)(J.a,{container:!0,direction:"column",justify:"center",children:[Object(r.jsx)(J.a,{item:!0,xs:12,children:"uniqueLeaderboard"===h?Object(r.jsx)(ba,{title:"WRs",labels:d[h].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:d[h].slice(0,20).map((function(e){return e.wrs}))}]}):Object(r.jsx)(mt,{title:"WRs",labels:d[h].map((function(e){return e.user.name})),series:d[h].map((function(e){return e.wrs}))})}),Object(r.jsx)(J.a,{item:!0,xs:12,className:O.padTop,children:"uniqueLeaderboard"===h?Object(r.jsx)(ba,{title:"WRs",labels:d[x].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})).slice(0,20),series:[{name:"Unique WRs by Zone",data:d[x].slice(0,20).map((function(e){return e.wrs}))}]}):Object(r.jsx)(mt,{title:"WRs by Zone",labels:d[x].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:d[x].map((function(e){return e.wrs}))})})]})})]})]})]})})]})},Ba=Object(b.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),za=function(){var e=N(),t=c.a.useState(void 0),a=Object(l.a)(t,2),n=a[0],i=a[1],o=c.a.useState("rankings/campaign"),s=Object(l.a)(o,2),d=s[0],j=s[1],u=c.a.useState("leaderboard"),b=Object(l.a)(u,2),h=b[0],m=b[1],f=c.a.useCallback((function(e){j(e.target.value)}),[j]),x=c.a.useCallback((function(e){m(e.target.value)}),[m]);c.a.useEffect((function(){i(void 0),kt.request("trackmania",d).then((function(t){e.current&&i(t)})).catch((function(t){console.error(t),e.current&&i(null)}))}),[i,d,e]);var O=h.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard"),p=Ba();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Et.a,{className:p.formControl,children:[Object(r.jsx)(Ut.a,{children:"Campaign"}),Object(r.jsxs)(Wt.a,{value:d,onChange:f,children:[Object(r.jsx)(ha.a,{value:"rankings/campaign",children:"Official"}),Object(r.jsx)(ha.a,{value:"rankings/totd",children:"TOTD"}),Object(r.jsx)(ha.a,{value:"rankings/combined",children:"Combined"})]})]}),Object(r.jsxs)(Et.a,{className:p.formControl,children:[Object(r.jsx)(Ut.a,{children:"Rankings Type"}),Object(r.jsxs)(Wt.a,{value:h,onChange:x,children:[Object(r.jsx)(ha.a,{value:"leaderboard",children:"Live"}),Object(r.jsx)(ha.a,{value:"uniqueLeaderboard",children:"Unique"}),Object(r.jsx)(ha.a,{value:"historyLeaderboard",children:"Total"})]})]}),null===n&&Object(r.jsx)(jt,{data:"No data."}),void 0===n&&Object(r.jsx)(xe.a,{}),null!==n&&void 0!==n&&Object(r.jsxs)(J.a,{container:!0,direction:"row",justify:"center",alignContent:"center",children:[Object(r.jsx)(J.a,{item:!0,xs:12,md:6,children:Object(r.jsx)(Xt,{data:n[h],hasDuration:"rankings/campaign"===d&&"uniqueLeaderboard"!==h})}),Object(r.jsx)(J.a,{item:!0,xs:12,md:6,children:Object(r.jsxs)(J.a,{container:!0,direction:"column",justify:"center",children:[Object(r.jsx)(J.a,{item:!0,xs:12,className:p.padTop,children:"uniqueLeaderboard"===h?Object(r.jsx)(ba,{title:"WRs",labels:n[h].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:n[h].slice(0,20).map((function(e){return e.wrs}))}]}):Object(r.jsx)(mt,{title:"WRs",labels:n[h].map((function(e){return e.user.name})),series:n[h].map((function(e){return e.wrs}))})}),Object(r.jsx)(J.a,{item:!0,xs:12,className:p.padTop,children:"uniqueLeaderboard"===h?Object(r.jsx)(ba,{title:"WRs",labels:n[O].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})).slice(0,20),series:[{name:"Unique WRs by Zone",data:n[O].slice(0,20).map((function(e){return e.wrs}))}]}):Object(r.jsx)(mt,{title:"WRs by Zone",labels:n[O].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:n[O].map((function(e){return e.wrs}))})})]})})]})]})},Ra=Object(me.a)((function(e){var t=e.match,a=c.a.useState(0),n=Object(l.a)(a,2),i=n[0],o=n[1],s=c.a.useState((0===i?ma:fa)[0].props.value),d=Object(l.a)(s,2),j=d[0],u=d[1],b=t.params[0];c.a.useEffect((function(){o(0)}),[b]);var h=c.a.useCallback((function(e){u(e.target.value)}),[u]);return Object(r.jsxs)($,{children:[Object(r.jsxs)(F.a,{children:[Object(r.jsxs)(pe.a,{value:i,onChange:function(e,t){o(t),u((0===t?ma:fa)[0].props.value)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[Object(r.jsx)(Oe.a,{label:"Campaign"}),Object(r.jsx)(Oe.a,{label:"Track of the Day"}),Object(r.jsx)(Oe.a,{label:"Rankings"})]}),Object(r.jsx)(B.a,{component:"div",role:"tabpanel",children:Object(r.jsxs)(fe.a,{p:3,children:[(0===i||1===i)&&Object(r.jsx)(Ca,{campaign:j,onChangeCampaign:h,isOfficial:0===i}),2===i&&Object(r.jsx)(za,{})]})})]}),Object(r.jsx)(vt,{})]})})),Na=Object(b.a)((function(e){return{views:{marginTop:e.spacing(5)}}})),Pa=function(){var e=c.a.useReducer.apply(c.a,Object(s.a)(te)),t=Object(l.a)(e,2),a=t[0],n=t[1],i=c.a.useMemo((function(){return Object(x.a)({palette:{primary:{light:m.a[300],main:m.a[500],dark:m.a[700]},secondary:{light:f.a[300],main:f.a[500],dark:f.a[700]},error:{main:m.a.A400},type:a.darkMode.enabled?"dark":"light"}})}),[a.darkMode.enabled]),o=Na(),b=c.a.useMemo((function(){return{state:a,dispatch:n}}),[a,n]);return Object(r.jsxs)(h.a,{theme:i,children:[Object(r.jsx)(u.a,{}),Object(r.jsx)(ae.Provider,{value:b,children:Object(r.jsxs)(d.a,{basename:"/trackmania-records",children:[Object(r.jsx)(q,{}),Object(r.jsx)("div",{className:o.views,children:Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.a,{exact:!0,from:"/",to:"/trackmania"}),Object(r.jsx)(j.a,{exact:!0,from:"/tm",to:"/trackmania"}),Object(r.jsx)(j.a,{exact:!0,from:"/wii",to:"/tmwii"}),Object(r.jsx)(j.a,{exact:!0,from:"/tmo",to:"/original"}),Object(r.jsx)(j.a,{exact:!0,from:"/tmn",to:"/nations"}),Object(r.jsx)(j.a,{exact:!0,from:"/tms",to:"/sunrise"}),Object(r.jsx)(j.a,{exact:!0,from:"/tmnf",to:"/tmnforever"}),Object(r.jsx)(j.b,{exact:!0,path:"/trackmania",component:Ra}),Object(r.jsx)(j.b,{exact:!0,path:"/(nations|original|sunrise|tm2|tmnforever|tmwii|united)/:date?",component:Dt}),Object(r.jsx)(j.b,{exact:!0,path:"/about",component:de}),Object(r.jsx)(j.b,{exact:!0,path:"/replay",component:qt}),Object(r.jsx)(j.b,{component:Mt})]})})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(r.jsx)(Pa,{}),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[175,1,2]]]);
//# sourceMappingURL=main.137ac87e.chunk.js.map