(this["webpackJsonptrackmania-records"]=this["webpackJsonptrackmania-records"]||[]).push([[0],{148:function(e,a,t){e.exports=t(169)},169:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(12),o=t.n(l),c=t(23),i=t(7),m=t(51),u=t(50),s=t(253),d=t(121),f=t(252),p=t(94),E=t(95),b=t(133),h=t(228),g=t(227),y=t(29),v=t(259),k=t(172),w=t(230),x=t(223),D=t(170),O=t(226),j=t(263),S=t(229),T=t(66),C=t(123),B=t.n(C),z=function(){var e=r.a.useRef(!1);return r.a.useEffect((function(){return e.current=!0,function(){return e.current=!1}}),[]),e},R=Object(d.a)((function(e){return{root:{paddingBottom:e.spacing(8)},list:{width:e.spacing(25)},menuButton:{marginLeft:-12,marginRight:20},drawer:{width:240,flexShrink:0},appBar:{zIndex:e.zIndex.drawer+1},flex:{flex:1},active:{color:e.palette.primary.main}}})),N=[{title:"404 - Page Not Found",link:null,inDrawer:!1},{title:"trackmania-records",link:"/",inDrawer:!1},{title:"Trackmania",link:"/trackmania",inDrawer:!0,default:!0},{title:"Trackmania 2",link:"/tm2",inDrawer:!0,default:!0},{title:"Trackmania Wii",link:"/tmwii",inDrawer:!0,default:!0},{title:"Nations Forever",link:"/tmnforever",inDrawer:!0},{title:"United",link:"/united",inDrawer:!0},{title:"Nations ESWC",link:"/nations",inDrawer:!0},{title:"Replay Inspection",link:"/replay",inDrawer:!1},{title:"About",link:"/about",inDrawer:!1}],L=Object(u.g)((function(e){var a,t=e.location,n=r.a.useState(!1),l=Object(i.a)(n,2),o=l[0],c=l[1],u=r.a.useMemo((function(){return N.find((function(e){return e.link===t.pathname||null!==e.link&&t.pathname.startsWith(e.link+"/")}))||N[0]}),[t]);a=u.title,r.a.useEffect((function(){document.title=a+" - "+document.location.host}),[a]);var s=function(e){return function(){c(e)}},d=R(),f=r.a.createElement("div",{className:d.list},r.a.createElement(x.a,null,r.a.createElement(D.a,{button:!0,key:0,component:m.b,to:"/"},r.a.createElement(O.a,{primary:"Trackmania Records"}))),r.a.createElement(g.a,null),r.a.createElement(x.a,null,N.filter((function(e){return e.inDrawer})).map((function(e,a){return r.a.createElement(D.a,{button:!0,key:a,component:m.b,to:e.link,className:e.title===u.title?d.active:void 0},r.a.createElement(O.a,{primary:e.title}))})),r.a.createElement(g.a,null),r.a.createElement(x.a,null,r.a.createElement(D.a,{button:!0,key:0,component:m.b,to:"/replay"},r.a.createElement(O.a,{primary:"Replay Inspection"})),r.a.createElement(D.a,{button:!0,key:1,component:m.b,to:"/about"},r.a.createElement(O.a,{primary:"About"})))));return r.a.createElement("div",{className:d.root},r.a.createElement(h.a,{className:d.appBar,position:"fixed"},r.a.createElement(S.a,null,r.a.createElement(v.a,{lgUp:!0},r.a.createElement(k.a,{className:d.menuButton,onClick:s(!0),color:"inherit"},r.a.createElement(B.a,null))),r.a.createElement(T.a,{variant:"h6",color:"inherit"},r.a.createElement(w.a,{component:m.b,to:"/",color:"inherit",underline:"none"},"Trackmania Records")))),r.a.createElement(v.a,{lgUp:!0,implementation:"css"},r.a.createElement(j.a,{open:o,onClose:s(!1),onOpen:s(!0),variant:"temporary"},r.a.createElement("div",{tabIndex:0,role:"button",onClick:s(!1),onKeyDown:s(!1)},f))),r.a.createElement(v.a,{mdDown:!0,implementation:"css"},r.a.createElement(y.a,{variant:"permanent"},r.a.createElement("div",{tabIndex:0,role:"button"},f))))})),P=t(14),q=t.n(P),M=t(234),U=t(241),W=t(240),I=t(171),Y=t(242),F=t(235),_=t(238),A=t(233),G=t(236),X=t(237),Z=t(264),H=t(232),K=function(e){var a=e.children;return r.a.createElement(H.a,{container:!0},r.a.createElement(H.a,{item:!0,xs:!1,md:1,lg:2}),r.a.createElement(H.a,{item:!0,xs:12,md:10,lg:9},a))},J=t(18),$=t(61),V=t(39),Q={darkMode:new(function(){function e(){Object($.a)(this,e),this.enabled="true"===localStorage.getItem("dark_mode")}return Object(V.a)(e,[{key:"toggle",value:function(){return this.enabled=!this.enabled,localStorage.setItem("dark_mode",this.enabled.toString()),this}}]),e}())},ee=[function(e,a){switch(a.action){case"toggleDarkMode":return Object(J.a)({},e,{darkMode:e.darkMode.toggle()});default:throw new Error("Unknown action type.")}},Q],ae=r.a.createContext(Q),te=Object(d.a)((function(e){return{aboutBox:{padding:e.spacing(3)}}})),ne=[{repo:"NeKzor/trackmania-records",branch:"master"},{repo:"NeKzBot/tmx-records",branch:"api"},{repo:"NeKzor/trackmania-records",branch:"gh-pages"}],re={whiteSpace:"nowrap"},le=function(e){return r.a.createElement(A.a,Object.assign({size:"small"},e))},oe=function(){return r.a.createElement("div",{style:{paddingTop:"50px"}})},ce=function(){var e=q.a.utc(),a=q()().utc().endOf("day").add(17,"hours");a.isBefore(e)&&(a=q()().utc().endOf("day").add(1,"day").add(17,"hours"));var t=q.a.duration({from:e,to:a}),n=t.get("hours"),r=t.get("minutes"),l=t.get("seconds"),o=function(e){return 1===e?"":"s"};return"".concat(n," hour").concat(o(n),", ").concat(r," minute").concat(o(r),", ").concat(l," second").concat(o(l))},ie=null,me=function(){var e=z(),a=r.a.useContext(ae),t=a.state.darkMode,n=a.dispatch,l=r.a.useState([]),o=Object(i.a)(l,2),c=o[0],m=o[1],u=r.a.useState(ce()),s=Object(i.a)(u,2),d=s[0],f=s[1];r.a.useEffect((function(){return ie=setInterval((function(){f(ce())}),1e3),function(){return clearInterval(ie)}}),[]);r.a.useEffect((function(){var a=function(a){console.error(a),e.current&&m(void 0)};Promise.all(ne.map((function(e){var a=e.repo,t=e.branch;return fetch("https://api.github.com/repos/".concat(a,"/commits/").concat(t))}))).then((function(t){Promise.all(t.map((function(e){return e.json()}))).then((function(a){e.current&&m(a.map((function(e){return{sha:e.sha,author:e.author?e.author:e.commit.author,message:e.commit.message,date:e.commit.author.date}})))})).catch(a)})).catch(a)}),[e]);var p=te();return r.a.createElement(K,null,r.a.createElement(I.a,{className:p.aboutBox},r.a.createElement(T.a,{component:"h2",variant:"h5"},"Trackmania Campaign Records & Statistics"),r.a.createElement("br",null),r.a.createElement(T.a,{variant:"body1"},"This web app mirrors campaign world records of many Trackmania games. Data is mainly provided by Trackmania Exchange but also by speedrun.com."),r.a.createElement(T.a,{variant:"body1"},"Additionally it ranks players based on how many world records they hold and how long their records have been lasting."),r.a.createElement(oe,null),r.a.createElement(T.a,{variant:"h5"},"Next Update"),r.a.createElement("br",null),d,r.a.createElement(oe,null),r.a.createElement(T.a,{variant:"h5"},"Changelog"),r.a.createElement("br",null),void 0===c?r.a.createElement(T.a,{variant:"body1"},"Unable to fetch status from GitHub."):0===c.length?r.a.createElement(M.a,{className:p.progress}):r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement(F.a,{size:"small"},r.a.createElement(G.a,null,r.a.createElement(X.a,null,r.a.createElement(A.a,{padding:"default"},r.a.createElement(T.a,{variant:"body1"},"Branch")),r.a.createElement(A.a,{padding:"default"},r.a.createElement(T.a,{variant:"body1"},"Date")),r.a.createElement(A.a,{padding:"default"},r.a.createElement(T.a,{variant:"body1"},"Author")),r.a.createElement(A.a,{padding:"default"},r.a.createElement(T.a,{variant:"body1"},"Commit")))),r.a.createElement(_.a,null,c.map((function(e,a){var t=ne[a],n=t.repo,l=t.branch;return r.a.createElement(X.a,{tabIndex:-1,key:a,style:re},r.a.createElement(le,{align:"left"},r.a.createElement(w.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(n,"/tree/").concat(l)},l)),r.a.createElement(le,{align:"left",style:re},r.a.createElement(Z.a,{title:q()(e.date).toString()},r.a.createElement("span",null,q()(e.date).from()))),r.a.createElement(le,{align:"left"},e.author.html_url?r.a.createElement(w.a,{color:"inherit",rel:"noopener",href:e.author.html_url},e.author.login):e.author.name||"n/a"),r.a.createElement(le,{align:"left",style:re},r.a.createElement(Z.a,{title:e.message},r.a.createElement(w.a,{color:"inherit",rel:"noopener",href:"https://github.com/".concat(n,"/commit/").concat(e.sha)},e.sha))))}))))),r.a.createElement(oe,null),r.a.createElement(T.a,{variant:"h5"},"Theme Settings"),r.a.createElement("br",null),r.a.createElement(W.a,{row:!0},r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:t.enabled,onChange:function(){n({action:"toggleDarkMode"})},color:"primary"}),label:"Dark Mode"})),r.a.createElement(oe,null),r.a.createElement(T.a,{variant:"h5"},"Credits"),r.a.createElement("br",null),r.a.createElement(w.a,{rel:"noopener",href:"http://www.tm-exchange.com"},"tm-exchange.com"),r.a.createElement("br",null),r.a.createElement(w.a,{rel:"noopener",href:"https://tm.mania-exchange.com"},"tm.mania-exchange.com"),r.a.createElement("br",null),r.a.createElement(w.a,{rel:"noopener",href:"https://www.speedrun.com/tmwii"},"speedrun.com/tmwii"),r.a.createElement("br",null),r.a.createElement(w.a,{rel:"noopener",href:"https://github.com/jonese1234/Trackmania-Leaderboard"},"jonese1234/Trackmania-Leaderboard")))},ue=t(65),se=t.n(ue),de=t(88),fe=t(93),pe=t(255),Ee=t(246),be=t(247),he=t(257),ge=t(265),ye={numeric:!0},ve=function(e,a,t){var n=function(e,a){var n=we(e,t).toString();return we(a,t).toString().localeCompare(n,void 0,ye)},r="desc"===a?function(e,a){return n(e,a)}:function(e,a){return-n(e,a)};return e.map((function(e,a){return[e,a]})).sort((function(e,a){var t=r(e[0],a[0]);return 0!==t?t:e[1]-a[1]})).map((function(e){return e[0]}))},ke=function(e,a,t,n){if(t===n)return ve(e,a,t);var r=function(e,a){var r=we(e,t).toString(),l=we(a,t).toString(),o=l.localeCompare(r,void 0,ye);return 0!==o?o:(r=we(e,n).toString(),(l=we(a,n).toString()).localeCompare(r,void 0,ye))},l="desc"===a?function(e,a){return r(e,a)}:function(e,a){return-r(e,a)};return e.map((function(e,a){return[e,a]})).sort((function(e,a){var t=l(e[0],a[0]);return 0!==t?t:e[1]-a[1]})).map((function(e){return e[0]}))},we=function(e,a){return-1!==a.indexOf(".")?a.split(".").filter((function(e){return e})).reduce((function(e,a){return e&&e[a]}),e):e[a]},xe=function(e){return["nations","sunrise","original"].includes(e)?"http":"https"},De=function(e){return"tm2"===e?{trackUrl:function(e){return"https://tm.mania-exchange.com/tracks/".concat(e)},imageUrl:function(e){return"https://tm.mania-exchange.com/tracks/screenshot/normal/".concat(e)},replayUrl:function(e){return"https://tm.mania-exchange.com/replays/download/".concat(e)},userUrl:function(e){return"https://tm.mania-exchange.com/user/profile/".concat(e)}}:"tmwii"===e?{trackUrl:function(e){return"https://speedrun.com/tmwii/".concat(e)},imageUrl:function(e){},replayUrl:function(e){},userUrl:function(e){return"https://www.speedrun.com/user/".concat(e)}}:{trackUrl:function(a){return"".concat(xe(e),"://").concat(e,".tm-exchange.com/main.aspx?action=trackshow&id=").concat(a)},imageUrl:function(a){return"".concat(xe(e),"://").concat(e,".tm-exchange.com/getclean.aspx?action=trackscreenscreens&id=").concat(a)},replayUrl:function(a){return"".concat(xe(e),"://").concat(e,".tm-exchange.com/get.aspx?action=recordgbx&id=").concat(a)},userUrl:function(a){return"".concat(xe(e),"://").concat(e,".tm-exchange.com/main.aspx?action=usershow&id=").concat(a)}}},Oe=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],je=function(e){var a=e.order,t=e.orderBy,n=e.onRequestSort;return r.a.createElement(G.a,null,r.a.createElement(X.a,null,Oe.map((function(e){return r.a.createElement(A.a,{key:e.id,align:e.align,padding:"default",sortDirection:t===e.id&&a},!0===e.sortable&&r.a.createElement(Z.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},r.a.createElement(ge.a,{active:t===e.id,direction:a,onClick:(l=e.id,o=e.id2,function(e){n(e,l,o)})},e.label)),!1===e.sortable&&e.label);var l,o}))))},Se=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Te={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},Ce={whiteSpace:"nowrap"},Be={padding:"7px 0px 7px 16px"},ze=function(e){return r.a.createElement(A.a,Object.assign({style:Be},e))},Re=function(e){var a=e.data,t=e.game,n=r.a.useState(Te),l=Object(i.a)(n,2),o=l[0],c=o.order,m=o.orderBy,u=o.thenBy,s=o.rowsPerPage,d=o.page,f=l[1],p=Se();return r.a.createElement("div",{className:p.root},r.a.createElement(F.a,{size:"small"},r.a.createElement(je,{order:c,orderBy:m,onRequestSort:function(e,a,t){var n=a,r=t;f((function(e){return Object(J.a)({},e,{order:e.orderBy===n&&"desc"===e.order?"asc":"desc",orderBy:n,thenBy:r})}))}}),r.a.createElement(_.a,null,ke(a,c,m,u).slice(d*s,d*s+s).map((function(e){return r.a.createElement(X.a,{tabIndex:-1,key:e.user.id},r.a.createElement(ze,{align:"left"},r.a.createElement(w.a,{style:Ce,color:"inherit",href:De(t).userUrl(e.user.id),rel:"noreferrer",target:"_blank"},e.user.name)),r.a.createElement(ze,{align:"left"},e.wrs),r.a.createElement(ze,{align:"left"},e.duration," day",1===e.duration?"":"s"))})))))},Ne=t(25),Le=t.n(Ne),Pe=t(91),qe=t.n(Pe),Me=t(254);function Ue(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0===e||null===e)return e;if("Stunts"===t)return e+" pts.";if("tm2"!==a){var n=(e/=10)%100,r=Math.floor(e/100),l=r%60,o=Math.floor(r/60);return(o>0?o+":":"")+(l<10&&o>0?"0"+l:l)+"."+(n<10?"0"+n:n)}var c=e%1e3,i=Math.floor(e/1e3),m=i%60,u=Math.floor(i/60);return(u>0?u+":":"")+(m<10&&u>0?"0"+m:m)+"."+(c<100?c<10?"00"+c:"0"+c:c)}var We=Object(Me.a)().domain([0,24,336,1440]).range(["#2eb82e","#258e25","#cca300","#e67300"]);function Ie(e){var a=q()().diff(q()(e),"hours");return a<=1440?We(a):void 0}var Ye=Object(Me.a)().domain([0,480,960,1440]).range(["#2eb82e","#cca300","#e67300","#e63200"]);for(var Fe=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],_e=function(e){var a=e.order,t=e.orderBy,n=e.onRequestSort;return r.a.createElement(G.a,null,r.a.createElement(X.a,null,Fe.map((function(e){return r.a.createElement(A.a,{key:e.id,align:e.align,padding:"default",sortDirection:t===e.id&&a},!0===e.sortable&&r.a.createElement(Z.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},r.a.createElement(ge.a,{active:t===e.id,direction:a,onClick:(l=e.id,function(e){n(e,l)})},e.label)),!1===e.sortable&&e.label);var l}))))},Ae=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Ge={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},Xe={whiteSpace:"nowrap"},Ze={padding:"7px 0px 7px 16px"},He=function(e){return r.a.createElement(A.a,Object.assign({style:Ze},e))},Ke=function(e){var a=e.data,t=e.game,n=e.stats,l=e.useLiveDuration,o=r.a.useState(Ge),c=Object(i.a)(o,2),m=c[0],u=m.order,s=m.orderBy,d=m.rowsPerPage,f=m.page,p=c[1],E=De(t),b=Ae();return r.a.createElement("div",{className:b.root},r.a.createElement(F.a,{size:"small"},r.a.createElement(_e,{order:u,orderBy:s,onRequestSort:function(e,a){var t=a;p((function(e){return Object(J.a)({},e,{order:e.orderBy===t&&"desc"===e.order?"asc":"desc",orderBy:t})}))}}),r.a.createElement(_.a,null,ve(a,u,s).slice(f*d,f*d+d).map((function(e){var a=Ue(e.score,t,e.track.type);return r.a.createElement(X.a,{tabIndex:-1,key:"".concat(e.track.name,"-").concat(e.user.id)},(e.track.isFirst||"track.name"!==s)&&r.a.createElement(He,{style:Xe,rowSpan:"track.name"!==s?1:e.track.records,align:"left"},r.a.createElement(w.a,{color:"inherit",href:E.trackUrl(e.track.id),rel:"noreferrer",target:"_blank"},e.track.name)),r.a.createElement(He,{align:"left"},r.a.createElement(Z.a,{title:"Download Replay",placement:"bottom-end",enterDelay:300},r.a.createElement(w.a,{style:Xe,color:"inherit",href:E.replayUrl(e.replay),rel:"noreferrer",target:"_blank"},a)),"tm2"===t&&q()(e.date).isBefore("2017-05-09")&&r.a.createElement(Z.a,{title:"This run was done on an older game version.",placement:"bottom-end",enterDelay:300},r.a.createElement("span",null,r.a.createElement(k.a,{size:"small",disabled:!0},r.a.createElement(qe.a,{fontSize:"inherit"}))))),r.a.createElement(He,{align:"left"},r.a.createElement(w.a,{style:Xe,color:"inherit",href:E.userUrl(e.user.id),rel:"noreferrer",target:"_blank"},e.user.name)),r.a.createElement(He,{align:"left"},r.a.createElement(Z.a,{title:r.a.createElement(Le.a,{fromNow:!0},e.date),placement:"bottom-end",enterDelay:300},r.a.createElement(Le.a,{style:Object(J.a)({color:Ie(e.date)},Xe),format:"YYYY-MM-DD"},e.date))),r.a.createElement(He,{align:"left"},r.a.createElement(Z.a,{title:"in days",placement:"bottom-end",enterDelay:300},l?r.a.createElement(Le.a,{style:Xe,diff:e.date,unit:"days"}):r.a.createElement("span",null,e.duration))))}))),r.a.createElement(_.a,null,n.totalTime>0&&r.a.createElement(X.a,null,r.a.createElement(He,{align:"right"},"Total Time"),r.a.createElement(He,null,r.a.createElement(Z.a,{title:q.a.duration(n.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300},r.a.createElement("span",null,Ue(n.totalTime,t)))),r.a.createElement(He,{colSpan:3})),n.totalPoints>0&&r.a.createElement(X.a,null,r.a.createElement(He,{align:"right"},"Total Points"),r.a.createElement(He,null,r.a.createElement("span",null,Ue(n.totalPoints,t,"Stunts"))),r.a.createElement(He,{colSpan:3})))))},Je=t(129),$e=t.n(Je),Ve=function(e,a){return"https://speedrun.com/tmwii/".concat(e,"#").concat(a)},Qe=function(e){return"https://www.speedrun.com/user/".concat(e)},ea=function(e){return"https://www.speedrun.com/tmwii/run/".concat(e)},aa=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"},{id:"replay",sortable:!1,label:"Video",align:"left"}],ta=function(e){var a=e.order,t=e.orderBy,n=e.onRequestSort;return r.a.createElement(G.a,null,r.a.createElement(X.a,null,aa.map((function(e){return r.a.createElement(A.a,{key:e.id,align:e.align,padding:"default",sortDirection:t===e.id&&a},!0===e.sortable&&r.a.createElement(Z.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},r.a.createElement(ge.a,{active:t===e.id,direction:a,onClick:(l=e.id,function(e){n(e,l)})},e.label)),!1===e.sortable&&e.label);var l}))))},na=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),ra={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},la={whiteSpace:"nowrap"},oa={padding:"7px 0px 7px 16px"},ca=function(e){return r.a.createElement(A.a,Object.assign({style:oa},e))},ia=function(e){var a=e.data,t=e.game,n=e.stats,l=e.useLiveDuration,o=e.category,c=r.a.useState(ra),m=Object(i.a)(c,2),u=m[0],s=u.order,d=u.orderBy,f=u.rowsPerPage,p=u.page,E=m[1],b=na();return r.a.createElement("div",{className:b.root},r.a.createElement(F.a,{size:"small"},r.a.createElement(ta,{order:s,orderBy:d,onRequestSort:function(e,a){var t=a;E((function(e){return Object(J.a)({},e,{order:e.orderBy===t&&"desc"===e.order?"asc":"desc",orderBy:t})}))}}),r.a.createElement(_.a,null,ve(a,s,d).slice(p*f,p*f+f).map((function(e){return r.a.createElement(X.a,{tabIndex:-1,key:"".concat(e.track.name,"-").concat(e.user.id)},(e.track.isFirst||"track.name"!==d)&&r.a.createElement(ca,{style:la,rowSpan:"track.name"!==d?1:e.track.records,align:"left"},r.a.createElement(w.a,{color:"inherit",href:Ve(e.track.name,o),rel:"noreferrer",target:"_blank"},e.track.name)),r.a.createElement(ca,{align:"left"},r.a.createElement(w.a,{style:la,color:"inherit",href:ea(e.id),rel:"noreferrer",target:"_blank"},Ue(e.score,t))),r.a.createElement(ca,{align:"left"},r.a.createElement(w.a,{style:la,color:"inherit",href:Qe(e.user.name),rel:"noreferrer",target:"_blank"},e.user.name)),r.a.createElement(ca,{align:"left"},r.a.createElement(Z.a,{title:r.a.createElement(Le.a,{fromNow:!0},e.date),placement:"bottom-end",enterDelay:300},r.a.createElement(Le.a,{style:Object(J.a)({color:Ie(e.date)},la),format:"YYYY-MM-DD"},e.date))),r.a.createElement(ca,{align:"left"},r.a.createElement(Z.a,{title:"in days",placement:"bottom-end",enterDelay:300},l?r.a.createElement(Le.a,{style:la,diff:e.date,unit:"days"}):r.a.createElement("span",null,e.duration))),r.a.createElement(ca,{align:"left"},r.a.createElement(Z.a,{title:"Watch Run",placement:"bottom-end",enterDelay:300},r.a.createElement(k.a,{size:"small",href:e.media,target:"_blank"},r.a.createElement($e.a,{fontSize:"inherit"})))))}))),r.a.createElement(_.a,null,n.totalTime>0&&r.a.createElement(X.a,null,r.a.createElement(ca,{align:"right"},"Total Time"),r.a.createElement(ca,null,r.a.createElement(Z.a,{title:q.a.duration(n.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300},r.a.createElement("span",null,Ue(n.totalTime,t)))),r.a.createElement(ca,{colSpan:4})))))},ma=function(e){var a=e.data,t=e.props;return r.a.createElement(T.a,Object.assign({variant:"h5",gutterBottom:!0,style:{padding:"50px 0px 50px 50px"}},t),a)},ua=t(92),sa=t.n(ua),da=t(243),fa=Object(da.a)((function(e){var a=e.labels,t=e.series,n=e.title,l=e.theme,o=e.rest,c=void 0===o||o,i="dark"===l.palette.type;if(c){var m=t.slice(30).reduce((function(e,a){return e+a}),0);t=t.slice(0,30),a=a.slice(0,30),t.push(m),a.push("Rest")}var u=new Array(t.length).fill(0).map((function(){return"#"+(16777215*Math.random()<<0).toString(16).padStart(6,"0")}));return r.a.createElement(sa.a,{options:{labels:a,legend:{show:!1},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0},value:{show:!0,color:i?"white":"black"},total:{show:!0,label:n,color:i?"white":"black"}}}}},colors:u},series:t,type:"donut",height:"400"})})),pa=t(245),Ea=t(244),ba=t(130),ha=t.n(ba),ga=Object(d.a)((function(e){return{fab:{margin:0,top:"auto",right:30,bottom:30,left:"auto",position:"fixed"}}})),ya=function(){!function e(){var a=document.documentElement.scrollTop;a>0&&(window.requestAnimationFrame(e),window.scrollTo(0,a-a/5))}()},va=function(){var e=function(){var e=r.a.useRef(void 0),a=r.a.useState({x:0,y:0}),t=Object(i.a)(a,2),n=t[0],l=t[1],o=r.a.useCallback((function(){clearTimeout(e.current),e.current=setTimeout((function(){l({x:window.scrollX,y:window.scrollY})}),100)}),[l]);return r.a.useEffect((function(){return window.addEventListener("scroll",o),function(){clearTimeout(e.current),window.removeEventListener("scroll",o)}}),[o]),n}().y,a=ga();return r.a.createElement(Ea.a,{in:0!==e,timeout:1e3},r.a.createElement(pa.a,{title:"Jump to top",color:"primary",className:a.fab,onClick:ya},r.a.createElement(ha.a,null)))},ka=new(function(){function e(){Object($.a)(this,e),this.baseApi="https://raw.githubusercontent.com/NeKzBot/tmx-records/api"}return Object(V.a)(e,[{key:"request",value:function(){var e=Object(de.a)(se.a.mark((function e(a,t){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseApi,"/").concat(a,"/").concat(t||"latest",".json"));case 2:if(n=e.sent,console.log("GET ".concat(n.url," (").concat(n.status,")")),n.ok){e.next=6;break}throw n;case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(a,t){return e.apply(this,arguments)}}()}]),e}()),wa=Object(d.a)((function(e){return{padTop:{paddingTop:"70px"}}})),xa=Object(fe.a)((function(e){var a=e.match,t=z(),n=r.a.useState(void 0),l=Object(i.a)(n,2),o=l[0],c=l[1],m=r.a.useState("tm2"),u=Object(i.a)(m,2),s=u[0],d=u[1],f=r.a.useState(0),p=Object(i.a)(f,2),E=p[0],b=p[1],h=a.params[0],g=a.params.date,y=void 0===g||"latest"===g;r.a.useEffect((function(){b(0),c(void 0)}),[h]),r.a.useEffect((function(){Object(de.a)(se.a.mark((function e(){var a,n,r,l,o,i,m;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka.request(h,g);case 2:if(!(a=e.sent)[0]||!a[0].tracks[0].wrs){e.next=24;break}for(n=!0,r=!1,l=void 0,e.prev=7,o=function(){var e=m.value;void 0===e.stats.totalPoints&&(e.stats.totalTime=e.tracks.filter((function(e){return"Stunts"!==e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,a){return e+a}),0),e.stats.totalPoints=e.tracks.filter((function(e){return"Stunts"===e.type})).map((function(e){return e.wrs[0].score})).reduce((function(e,a){return e+a}),0));var a=[],t=!0,n=!1,r=void 0;try{for(var l,o=e.tracks[Symbol.iterator]();!(t=(l=o.next()).done);t=!0){var c=l.value,i=!0,u=!1,s=void 0;try{for(var d,f=c.wrs[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p=d.value,E=y?q()().diff(q()(p.date),"d"):p.duration;a.push(Object(J.a)({track:{id:c.id,name:c.name,type:c.type,isFirst:p===c.wrs[0],records:c.wrs.length}},p,{duration:E}))}}catch(b){u=!0,s=b}finally{try{i||null==f.return||f.return()}finally{if(u)throw s}}}}catch(b){n=!0,r=b}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}e.tracks=a,y&&e.leaderboard.forEach((function(a,t){e.leaderboard[t].duration=e.tracks.filter((function(e){return e.user.id===a.user.id})).map((function(e){return e.duration})).reduce((function(e,a){return e+a}),0)}))},i=a[Symbol.iterator]();!(n=(m=i.next()).done);n=!0)o();e.next=16;break;case 12:e.prev=12,e.t0=e.catch(7),r=!0,l=e.t0;case 16:e.prev=16,e.prev=17,n||null==i.return||i.return();case 19:if(e.prev=19,!r){e.next=22;break}throw l;case 22:return e.finish(19);case 23:return e.finish(16);case 24:if(t.current){e.next=26;break}return e.abrupt("return");case 26:d(h),c(a);case 28:case"end":return e.stop()}}),e,null,[[7,12,16,24],[17,,19,23]])})))()}),[t,h,g,y]);var v="tmwii"===s?ia:Ke,k=wa();return r.a.createElement(K,null,r.a.createElement(I.a,null,void 0===o?r.a.createElement(Ee.a,null):0===o.length?r.a.createElement(ma,{data:"No data."}):r.a.createElement(r.a.Fragment,null,o.length>1&&r.a.createElement(he.a,{value:E,onChange:function(e,a){b(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},o.map((function(e){return r.a.createElement(be.a,{label:e.name,key:e.name})}))),r.a.createElement(T.a,{component:"div",role:"tabpanel"},r.a.createElement(pe.a,{p:3},r.a.createElement(H.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(v,{data:o[E].tracks,game:s,stats:o[E].stats,useLiveDuration:y,category:o[E].name})),r.a.createElement(H.a,{item:!0,xs:12,className:k.padTop},r.a.createElement(H.a,{container:!0,direction:"row",justify:"center",alignContent:"center"},r.a.createElement(H.a,{item:!0,xs:12,md:6},r.a.createElement(Re,{data:o[E].leaderboard,game:h})),r.a.createElement(H.a,{item:!0,xs:12,md:6,className:k.padTop},r.a.createElement(H.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(fa,{title:"WRs",labels:o[E].leaderboard.map((function(e){return e.user.name})),series:o[E].leaderboard.map((function(e){return e.wrs}))})),r.a.createElement(H.a,{item:!0,xs:12,className:k.padTop},r.a.createElement(fa,{title:"Duration",labels:o[E].leaderboard.map((function(e){return e.user.name})),series:o[E].leaderboard.map((function(e){return e.duration}))}))))))))))),r.a.createElement(va,null))})),Da=t(131),Oa=t.n(Da),ja=t(248),Sa=t(260),Ta=t(262),Ca=t(258),Ba=t(13),za=function(e){return r.a.createElement(Ca.a,Object.assign({elevation:6,variant:"filled"},e))},Ra={info:"drag & drop replay here :)",magic:"GBX",version:6,settings:"BUCR",classId:50933760,headerSize:331,headerChunks:2,chunkOffset:348},Na=function(){var e=z(),a=Object(Ba.a)(),t=r.a.useState(Ra),n=Object(i.a)(t,2),l=n[0],o=n[1],c=r.a.useState(!0),m=Object(i.a)(c,2),u=m[0],s=m[1],d=r.a.useState(!1),f=Object(i.a)(d,2),p=f[0],E=f[1],b=function(e,a){"clickaway"!==a&&E(!1)},h=r.a.useCallback((function(a){if(a){var t=new FileReader;t.onload=function(a){var t=a.target.result;try{if(!e.current)return;o(Ra),E(!1);var n=window,r=n.Buffer,l=n.Replay,c=window.replay=l.default().read(r.from(t),{parseGhost:u});if(!e.current)return;c.ghost&&delete c.ghost.restData,function e(a){Object.keys(a).forEach((function(t){"_view"===t?delete a._view:"object"===typeof a[t]&&e(a[t])}))}(c),o(c)}catch(i){e.current&&E(i.message)}},t.readAsArrayBuffer(a)}}),[e,u,o,E]),g=r.a.useCallback((function(e){return h(e.target.files[0])}),[h]),y=function(e){e.dataTransfer.items?e.dataTransfer.items.clear():e.dataTransfer.clearData()};r.a.useEffect((function(){return document.querySelector("#file").addEventListener("change",g),function(){return document.querySelector("#file").removeEventListener("change",g)}}),[g]);return r.a.createElement(K,null,r.a.createElement(I.a,{style:{padding:"20px 20px 20px 20px"}},r.a.createElement(ja.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){document.querySelector("#file").click()}},"Open file"),r.a.createElement("input",{type:"file",id:"file",style:{display:"none"}}),r.a.createElement(U.a,{style:{marginLeft:"20px"},control:r.a.createElement(Sa.a,{color:"primary",checked:u,onChange:function(e){s(e.target.checked)}}),label:"Parse Ghost"}),r.a.createElement("div",{style:{paddingBottom:"20px"}}),r.a.createElement("div",{onDrop:function(e){e.preventDefault();var a=[];if(e.dataTransfer.items)for(var t=0;t<e.dataTransfer.items.length;++t)"file"===e.dataTransfer.items[t].kind&&a.push(e.dataTransfer.items[t].getAsFile());h(a[0]),y(e)},onDragOver:function(e){e.preventDefault()}},r.a.createElement(Oa.a,{name:"replay",style:{fontSize:"14px"},src:l,theme:"light"===a.palette.type?"bright:inverted":"solarized",displayDataTypes:!1,displayObjectSize:!1,enableClipboard:!1})),r.a.createElement(Ta.a,{open:!1!==p,autoHideDuration:6e3,onClose:b},r.a.createElement(za,{onClose:b,severity:"error"},p))))},La=function(){return r.a.createElement(K,null,r.a.createElement(I.a,null,r.a.createElement(ma,{data:"Page not found :("})))},Pa=t(266),qa=t(251),Ma=t(256),Ua=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",id2:"duration",sortable:!0,label:"World Records",align:"left"},{id:"duration",id2:"wrs",sortable:!0,label:"Total Duration",align:"left"}],Wa=[{id:"user.name",sortable:!1,label:"Player",align:"left"},{id:"wrs",sortable:!0,label:"World Records",align:"left"}],Ia=function(e){var a=e.order,t=e.orderBy,n=e.onRequestSort,l=e.hasDuration,o=l?Ua:Wa;return r.a.createElement(G.a,null,r.a.createElement(X.a,null,o.map((function(e){return r.a.createElement(A.a,{key:e.id,align:e.align,padding:"default",sortDirection:t===e.id&&a},!0===e.sortable&&r.a.createElement(Z.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},r.a.createElement(ge.a,{active:t===e.id,direction:a,onClick:(l=e.id,o=e.id2,function(e){n(e,l,o)})},e.label)),!1===e.sortable&&e.label);var l,o}))))},Ya=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),Fa={order:"desc",orderBy:"wrs",thenBy:"duration",page:0,rowsPerPage:50},_a={padding:"7px 0px 7px 16px"},Aa=function(e){return r.a.createElement(A.a,Object.assign({style:_a},e))},Ga=function(e){var a=e.data,t=e.hasDuration,n=r.a.useState(Fa),l=Object(i.a)(n,2),o=l[0],c=o.order,m=o.orderBy,u=o.thenBy,s=l[1],d=Ya();return r.a.createElement("div",{className:d.root},r.a.createElement(F.a,{size:"small"},r.a.createElement(Ia,{order:c,orderBy:m,onRequestSort:function(e,a,t){var n=a,r=t;s((function(e){return Object(J.a)({},e,{order:e.orderBy===n&&"desc"===e.order?"asc":"desc",orderBy:n,thenBy:r})}))},hasDuration:t}),r.a.createElement(_.a,null,(t?ke:ve)(a,c,m,u).map((function(e){return r.a.createElement(X.a,{tabIndex:-1,key:e.user.name},r.a.createElement(Aa,{align:"left"},e.user.name),r.a.createElement(Aa,{align:"left"},e.wrs),t&&r.a.createElement(Aa,{align:"left"},e.duration))})))))},Xa=t(3),Za=t(249),Ha=t(105),Ka=t.n(Ha),Ja=t(132),$a=t.n(Ja),Va=[{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"user.zone",sortable:!0,label:"Zone",align:"left"},{id:"date",sortable:!0,label:"Date",align:"left"},{id:"duration",sortable:!0,label:"Duration",align:"left"}],Qa=[{id:"track.monthDay",sortable:!0,label:"Day",align:"left"},{id:"track.name",sortable:!0,label:"Track",align:"left"},{id:"score",sortable:!0,label:"Record",align:"left"},{id:"user.name",sortable:!0,label:"Player",align:"left"},{id:"user.zone",sortable:!0,label:"Zone",align:"left"}],et=function(e){var a=e.order,t=e.orderBy,n=e.onRequestSort,l=e.official,o=l?Va:Qa;return r.a.createElement(G.a,null,r.a.createElement(X.a,null,o.map((function(e,l){return r.a.createElement(A.a,{key:l,align:e.align,padding:"default",sortDirection:t===e.id&&a,colSpan:l===o.length-1?2:1},!0===e.sortable&&r.a.createElement(Z.a,{title:"Sort by "+e.label,placement:"bottom-start",enterDelay:300},r.a.createElement(ge.a,{active:t===e.id,direction:a,onClick:(c=e.id,function(e){n(e,c)})},e.label)),!1===e.sortable&&e.label);var c}))))},at=Object(d.a)((function(e){return{root:{overflowX:"auto"}}})),tt={order:"asc",orderBy:"track.name",page:0,rowsPerPage:250},nt={whiteSpace:"nowrap"},rt={padding:"7px 0px 7px 16px"},lt=function(e){return r.a.createElement(A.a,Object.assign({style:rt},e))},ot=function(e,a){var t=a?"&authorId=21":"";return"https://trackmania.exchange/mapsearch2?trackname=".concat(encodeURIComponent(e.name)).concat(t)},ct=function(e){var a=e.name.split(" - "),t=Object(i.a)(a,2),n=t[0],r=t[1];return"https://nekz.me/trackmania/#/".concat(n.replace(" ","").toLowerCase(),"/").concat(parseInt(r,10))},it=Object(d.a)({root:{"& > *":{borderBottom:"unset"}}}),mt=function(e){var a,t=e.wr,n=e.official,l=Ue(t.score,"tm2"),o=0!==t.delta?Ue(t.delta,"tm2"):null;return r.a.createElement(X.a,{tabIndex:-1},n&&r.a.createElement(lt,{align:"left"},r.a.createElement(Z.a,{title:r.a.createElement(Le.a,{fromNow:!0},t.date),placement:"bottom-end",enterDelay:300},r.a.createElement(Le.a,{style:Object(J.a)({color:Ie(t.date)},nt),format:"YYYY-MM-DD"},t.date))),!n&&r.a.createElement(lt,{align:"left"},r.a.createElement(Z.a,{title:t.setAfter,placement:"bottom-end",enterDelay:300},r.a.createElement(Le.a,{style:Object(J.a)({color:(a=t.pastMinutes,a>=0&&a<=1440?Ye(a):void 0)},nt),format:"HH:mm"},t.date))),r.a.createElement(lt,{align:"left"},l,t.note&&r.a.createElement(Z.a,{title:t.note,placement:"bottom-end",enterDelay:300},r.a.createElement("span",null,r.a.createElement(k.a,{size:"small",disabled:!0},r.a.createElement(qe.a,{fontSize:"inherit"}))))),r.a.createElement(lt,{align:"left"},o?"-"+o:""),r.a.createElement(lt,{align:"left"},t.user.name),r.a.createElement(lt,{align:"left"},r.a.createElement(Z.a,{title:t.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300},r.a.createElement("span",null,t.user.zone[2].name))),r.a.createElement(lt,{align:"left"},r.a.createElement(Z.a,{title:"Download Ghost",placement:"bottom",enterDelay:300},r.a.createElement(k.a,{size:"small",style:nt,color:"inherit",href:"https://prod.trackmania.core.nadeo.online/storageObjects/"+t.replay,rel:"noreferrer",target:"_blank"},r.a.createElement(Ka.a,{fontSize:"inherit"})))))},ut=function(e){var a=e.wr,t=e.official,n=e.orderBy,l=e.useLiveDuration,o=e.history,c=e.onClickHistory,i=Ue(a.score,"tm2"),m=0!==a.delta?Ue(a.delta,"tm2"):null,u=it(),s=o===a.track.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,{tabIndex:-1},!t&&(a.track.isFirst||"track.monthDay"!==n)&&r.a.createElement(lt,{align:"left",rowSpan:"track.monthDay"!==n?1:a.track.records},a.track.monthDay),(a.track.isFirst||"track.monthDay"!==n)&&r.a.createElement(lt,{style:nt,rowSpan:"track.monthDay"!==n?1:a.track.records,align:"left"},r.a.createElement(w.a,{color:"inherit",href:ot(a.track,t),rel:"noreferrer",target:"_blank"},a.track.name)),r.a.createElement(lt,{align:"left"},t&&m&&r.a.createElement(Z.a,{title:r.a.createElement("span",null,"-",m," to former record"),placement:"bottom",enterDelay:300},r.a.createElement(w.a,{color:"inherit",href:ct(a.track),rel:"noreferrer",target:"_blank"},r.a.createElement("span",null,i))),t&&!m&&r.a.createElement(w.a,{color:"inherit",href:ct(a.track),rel:"noreferrer",target:"_blank"},r.a.createElement("span",null,i)),!t&&m&&r.a.createElement(Z.a,{title:r.a.createElement("span",null,"-",m," to former record"),placement:"bottom",enterDelay:300},r.a.createElement("span",null,i)),!t&&!m&&r.a.createElement("span",null,i)),r.a.createElement(lt,{align:"left"},a.user.name),r.a.createElement(lt,{align:"left"},r.a.createElement(Z.a,{title:a.user.zone.map((function(e){return e.name})).join(" | "),placement:"bottom",enterDelay:300},r.a.createElement("span",null,a.user.zone[2].name))),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{align:"left"},r.a.createElement(Z.a,{title:r.a.createElement(Le.a,{fromNow:!0},a.date),placement:"bottom-end",enterDelay:300},r.a.createElement(Le.a,{style:Object(J.a)({color:Ie(a.date)},nt),format:"YYYY-MM-DD"},a.date))),r.a.createElement(lt,{align:"left"},r.a.createElement(Z.a,{title:"in days",placement:"bottom-end",enterDelay:300},l?r.a.createElement(Le.a,{style:nt,diff:a.date,unit:"days"}):r.a.createElement("span",null,a.duration)))),r.a.createElement(lt,{align:"left"},r.a.createElement(Z.a,{title:"Download Ghost",placement:"bottom",enterDelay:300},r.a.createElement(k.a,{size:"small",style:nt,color:"inherit",href:"https://prod.trackmania.core.nadeo.online/storageObjects/"+a.replay,rel:"noreferrer",target:"_blank"},r.a.createElement(Ka.a,{fontSize:"inherit"}))),a.track.isLast&&a.track.history&&r.a.createElement(k.a,{color:"inherit",size:"small",style:nt,onClick:function(){return c(a.track.id)}},r.a.createElement($a.a,{fontSize:"inherit"})))),a.track.isLast&&a.track.history&&r.a.createElement(X.a,{className:u.root},r.a.createElement(lt,{style:{paddingBottom:0,paddingTop:0},colSpan:7},r.a.createElement(Za.a,{in:s,timeout:"auto",unmountOnExit:!0},r.a.createElement(pe.a,{margin:1},r.a.createElement(T.a,{variant:"h6",gutterBottom:!0,component:"div"},"History"),r.a.createElement(F.a,{size:"small","aria-label":"purchases"},r.a.createElement(G.a,null,r.a.createElement(X.a,null,r.a.createElement(lt,null,t?"Date":"Time"),r.a.createElement(lt,null,"Record"),r.a.createElement(lt,null,"Timesave"),r.a.createElement(lt,null,"Player"),r.a.createElement(lt,{colSpan:2},"Zone"))),r.a.createElement(_.a,null,a.track.history.map((function(e,a){return r.a.createElement(mt,{wr:e,official:t,key:a})})))))))))},st=function(e){var a=e.data,t=e.stats,n=e.official,l=e.useLiveDuration,o=r.a.useState(tt),c=Object(i.a)(o,2),m=c[0],u=m.order,s=m.rowsPerPage,d=m.page,f=Object(Xa.a)(m,["order","rowsPerPage","page"]),p=c[1],E=r.a.useState(null),b=Object(i.a)(E,2),h=b[0],g=b[1],y=f.orderBy;y=n&&"track.monthDay"===y?"track.name":y;r.a.useEffect((function(){p((function(e){return Object(J.a)({},e,{orderBy:n?"track.name":"track.monthDay"})}))}),[a,n]);var v=r.a.useCallback((function(e){g(h!==e?e:null)}),[h,g]),k=at();return r.a.createElement("div",{className:k.root},r.a.createElement(F.a,{size:"small"},r.a.createElement(et,{order:u,orderBy:y,onRequestSort:function(e,a){var t=a;p((function(e){return Object(J.a)({},e,{order:e.orderBy===t&&"desc"===e.order?"asc":"desc",orderBy:t})}))},official:n}),r.a.createElement(_.a,null,ve(a,u,y).slice(d*s,d*s+s).map((function(e,a){return r.a.createElement(ut,{wr:e,official:n,orderBy:y,useLiveDuration:l,history:h,onClickHistory:v,key:a})}))),r.a.createElement(_.a,null,t.totalTime>0&&r.a.createElement(X.a,null,r.a.createElement(lt,{align:"right",colSpan:n?1:2},"Total Time"),r.a.createElement(lt,null,r.a.createElement(Z.a,{title:q.a.duration(t.totalTime,"ms").humanize(),placement:"bottom-end",enterDelay:300},r.a.createElement("span",null,Ue(t.totalTime,"tm2")))),r.a.createElement(lt,{colSpan:n?5:3})))))},dt=Object(da.a)((function(e){var a=e.labels,t=e.series,n=(e.title,"dark"===e.theme.palette.type);return r.a.createElement(sa.a,{options:{xaxis:{categories:a},legend:{show:!1},dataLabels:{enabled:!1},chart:{toolbar:{show:!1},foreColor:n?"white":"black"},tooltip:{theme:n?"dark":"light"},responsive:[{breakpoint:380,options:{chart:{height:"300px"}}}],plotOptions:{bar:{horizontal:!0}}},series:t,type:"bar",height:"800"})})),ft=t(250),pt=[],Et=[],bt=q()(),ht=q()("2020-07-01"),gt={7:"Summer",10:"Fall",1:"Winter",4:"Spring"};ht.diff(bt)<0;){var yt=gt[ht.month()+1],vt=ht.format("YYYY");pt.push(r.a.createElement(ft.a,{value:"campaign/".concat(yt,"-").concat(vt).toLowerCase(),key:pt.length},yt," ",vt));for(var kt=ht.clone(),wt=0;wt<3&&kt.month()<=bt.month();++wt){var xt=kt.format("MMMM");Et.push(r.a.createElement(ft.a,{value:"totd/".concat(xt,"-").concat(vt).toLowerCase(),key:Et.length},xt," ",vt)),kt.add(1,"month")}ht.add(3,"months")}pt.reverse(),Et.reverse(),pt.push(r.a.createElement(ft.a,{value:"campaign/training",key:pt.length},"Training"));var Dt=function(e){return 1===e?"":"s"},Ot=function(e,a){var t=a.diff(e,"seconds"),n=a.diff(e,"hours");if(t>0){var r=a.diff(e,"minutes")-60*n;return"set after ".concat(n," hour").concat(Dt(n)," and ").concat(r," minute").concat(Dt(r))}var l=-n,o=-a.diff(e,"minutes")-60*l;return"set before ".concat(l," hour").concat(Dt(l)," and ").concat(o," minute").concat(Dt(o))},jt=Object(d.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),St=function(e){var a=e.campaign,t=e.onChangeCampaign,n=e.useLiveDuration,l=e.isOfficial,o=z(),c=r.a.useState(void 0),m=Object(i.a)(c,2),u=m[0],s=m[1],d=r.a.useState("leaderboard"),f=Object(i.a)(d,2),p=f[0],E=f[1],b=r.a.useCallback((function(e){E(e.target.value)}),[E]);r.a.useEffect((function(){s(void 0),ka.request("trackmania",a).then((function(e){void 0===e.stats.totalPoints&&(e.stats.totalTime=e.tracks.map((function(e){return e.wrs[0].score})).reduce((function(e,a){return e+a}),0));var a=[],t=!0,r=!1,l=void 0;try{for(var c,i=e.tracks[Symbol.iterator]();!(t=(c=i.next()).done);t=!0){var m=c.value,u=!0,d=!1,f=void 0;try{for(var p,E=function(){var t=p.value,r=q()(t.date),l=n?q()().diff(r,"d"):t.duration,o=e.isOfficial?void 0:q()([e.year,e.month]).utc().set({date:m.monthDay,hour:17,minute:0,second:0}),c=e.isOfficial?void 0:Ot(o,r),i=t===m.wrs[m.wrs.length-1],u=i&&(m.history||[]).length>1?m.history:void 0;u&&!e.isOfficial&&u.forEach((function(e){var a=q()(e.date);e.setAfter=Ot(o,a),e.pastMinutes=a.diff(o,"minutes")})),a.push(Object(J.a)({track:{id:m.id,name:m.name.replace(/(\$[0-9a-fA-F]{3}|\$[WNOITSGZBEMwnoitsgzbem]{1})/g,""),monthDay:m.monthDay,isFirst:t===m.wrs[0],isLast:i,records:m.wrs.length,history:u}},t,{duration:l,setAfter:c}))},b=m.wrs[Symbol.iterator]();!(u=(p=b.next()).done);u=!0)E()}catch(h){d=!0,f=h}finally{try{u||null==b.return||b.return()}finally{if(d)throw f}}}}catch(h){r=!0,l=h}finally{try{t||null==i.return||i.return()}finally{if(r)throw l}}e.tracks=a,n&&e.leaderboard.forEach((function(a,t){e.leaderboard[t].duration=e.tracks.filter((function(e){return e.user.id===a.user.id})).map((function(e){return e.duration})).reduce((function(e,a){return e+a}),0)})),o.current&&s(e)})).catch((function(e){console.log(e),o.current&&s(null)}))}),[o,n,a]);var h=p.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard"),g=jt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(qa.a,{className:g.formControl},r.a.createElement(Pa.a,null,"Campaign"),r.a.createElement(Ma.a,{value:a,onChange:t},l?pt:Et)),null===u&&r.a.createElement(ma,{data:"No data."}),void 0===u&&r.a.createElement(Ee.a,null),r.a.createElement(H.a,{container:!0,direction:"column",justify:"center"},void 0!==u&&null!==u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{item:!0,xs:12},r.a.createElement(st,{data:u.tracks,stats:u.stats,official:u.isOfficial,useLiveDuration:n})),r.a.createElement(H.a,{item:!0,xs:12,className:g.padTop},r.a.createElement(qa.a,{className:g.formControl},r.a.createElement(Pa.a,null,"Rankings Type"),r.a.createElement(Ma.a,{value:p,onChange:b},r.a.createElement(ft.a,{value:"leaderboard"},"Live"),r.a.createElement(ft.a,{value:"uniqueLeaderboard"},"Unique"),r.a.createElement(ft.a,{value:"historyLeaderboard"},"Total"))),r.a.createElement(H.a,{container:!0,direction:"row",justify:"center",alignContent:"center"},r.a.createElement(H.a,{item:!0,xs:12,md:6},r.a.createElement(Ga,{data:u[p],hasDuration:!1})),r.a.createElement(H.a,{item:!0,xs:12,md:6,className:g.padTop},r.a.createElement(H.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(H.a,{item:!0,xs:12},"uniqueLeaderboard"===p?r.a.createElement(dt,{title:"WRs",labels:u[p].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:u[p].slice(0,20).map((function(e){return e.wrs}))}]}):r.a.createElement(fa,{title:"WRs",labels:u[p].map((function(e){return e.user.name})),series:u[p].map((function(e){return e.wrs}))})),r.a.createElement(H.a,{item:!0,xs:12,className:g.padTop},"uniqueLeaderboard"===p?r.a.createElement(dt,{title:"WRs",labels:u[h].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})).slice(0,20),series:[{name:"Unique WRs by Zone",data:u[h].slice(0,20).map((function(e){return e.wrs}))}]}):r.a.createElement(fa,{title:"WRs by Zone",labels:u[h].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:u[h].map((function(e){return e.wrs}))})))))))))},Tt=Object(d.a)((function(e){return{padTop:{paddingTop:"70px"},formControl:{margin:e.spacing(1),minWidth:120}}})),Ct=function(){var e=z(),a=r.a.useState(void 0),t=Object(i.a)(a,2),n=t[0],l=t[1],o=r.a.useState("rankings/campaign"),c=Object(i.a)(o,2),m=c[0],u=c[1],s=r.a.useState("leaderboard"),d=Object(i.a)(s,2),f=d[0],p=d[1],E=r.a.useCallback((function(e){u(e.target.value)}),[u]),b=r.a.useCallback((function(e){p(e.target.value)}),[p]);r.a.useEffect((function(){l(void 0),ka.request("trackmania",m).then((function(a){e.current&&l(a)})).catch((function(a){console.error(a),e.current&&l(null)}))}),[l,m,e]);var h=f.replace("Leaderboard","CountryLeaderboard").replace("leaderboard","countryLeaderboard"),g=Tt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(qa.a,{className:g.formControl},r.a.createElement(Pa.a,null,"Campaign"),r.a.createElement(Ma.a,{value:m,onChange:E},r.a.createElement(ft.a,{value:"rankings/campaign"},"Official"),r.a.createElement(ft.a,{value:"rankings/totd"},"TOTD"),r.a.createElement(ft.a,{value:"rankings/combined"},"Combined"))),r.a.createElement(qa.a,{className:g.formControl},r.a.createElement(Pa.a,null,"Rankings Type"),r.a.createElement(Ma.a,{value:f,onChange:b},r.a.createElement(ft.a,{value:"leaderboard"},"Live"),r.a.createElement(ft.a,{value:"uniqueLeaderboard"},"Unique"),r.a.createElement(ft.a,{value:"historyLeaderboard"},"Total"))),null===n&&r.a.createElement(ma,{data:"No data."}),void 0===n&&r.a.createElement(Ee.a,null),null!==n&&void 0!==n&&r.a.createElement(H.a,{container:!0,direction:"row",justify:"center",alignContent:"center"},r.a.createElement(H.a,{item:!0,xs:12,md:6},r.a.createElement(Ga,{data:n[f],hasDuration:"uniqueLeaderboard"!==f})),r.a.createElement(H.a,{item:!0,xs:12,md:6},r.a.createElement(H.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(H.a,{item:!0,xs:12,className:g.padTop},"uniqueLeaderboard"===f?r.a.createElement(dt,{title:"WRs",labels:n[f].map((function(e){return e.user.name})).slice(0,20),series:[{name:"Unique WRs",data:n[f].slice(0,20).map((function(e){return e.wrs}))}]}):r.a.createElement(fa,{title:"WRs",labels:n[f].map((function(e){return e.user.name})),series:n[f].map((function(e){return e.wrs}))})),r.a.createElement(H.a,{item:!0,xs:12,className:g.padTop},"uniqueLeaderboard"===f?r.a.createElement(dt,{title:"WRs",labels:n[h].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})).slice(0,20),series:[{name:"Unique WRs by Zone",data:n[h].slice(0,20).map((function(e){return e.wrs}))}]}):r.a.createElement(fa,{title:"WRs by Zone",labels:n[h].map((function(e){return(e.zone[2]?e.zone[2]:e.zone[0]).name})),series:n[h].map((function(e){return e.wrs}))}))))))},Bt=Object(fe.a)((function(e){var a=e.match,t=r.a.useState(0),n=Object(i.a)(t,2),l=n[0],o=n[1],c=r.a.useState((0===l?pt:Et)[0].props.value),m=Object(i.a)(c,2),u=m[0],s=m[1],d=a.params[0],f=a.params.date,p=void 0===f||"latest"===f;r.a.useEffect((function(){o(0)}),[d]);var E=r.a.useCallback((function(e){s(e.target.value)}),[s]);return r.a.createElement(K,null,r.a.createElement(I.a,null,r.a.createElement(he.a,{value:l,onChange:function(e,a){o(a),s((0===a?pt:Et)[0].props.value)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},r.a.createElement(be.a,{label:"Campaign"}),r.a.createElement(be.a,{label:"Track of the Day"}),r.a.createElement(be.a,{label:"Rankings"})),r.a.createElement(T.a,{component:"div",role:"tabpanel"},r.a.createElement(pe.a,{p:3},(0===l||1===l)&&r.a.createElement(St,{campaign:u,onChangeCampaign:E,useLiveDuration:p,isOfficial:0===l}),2===l&&r.a.createElement(Ct,null)))),r.a.createElement(va,null))})),zt=Object(d.a)((function(e){return{views:{marginTop:e.spacing(5)}}})),Rt=function(){var e=r.a.useReducer.apply(r.a,Object(c.a)(ee)),a=Object(i.a)(e,2),t=a[0],n=a[1],l=r.a.useMemo((function(){return Object(b.a)({palette:{primary:{light:p.a[300],main:p.a[500],dark:p.a[700]},secondary:{light:E.a[300],main:E.a[500],dark:E.a[700]},error:{main:p.a.A400},type:t.darkMode.enabled?"dark":"light"}})}),[t.darkMode.enabled]),o=zt(),d=r.a.useMemo((function(){return{state:t,dispatch:n}}),[t,n]);return r.a.createElement(f.a,{theme:l},r.a.createElement(s.a,null),r.a.createElement(ae.Provider,{value:d},r.a.createElement(m.a,{basename:"/trackmania-records"},r.a.createElement(L,null),r.a.createElement("div",{className:o.views},r.a.createElement(u.d,null,r.a.createElement(u.a,{exact:!0,from:"/",to:"/trackmania"}),r.a.createElement(u.a,{exact:!0,from:"/tm",to:"/trackmania"}),r.a.createElement(u.a,{exact:!0,from:"/wii",to:"/tmwii"}),r.a.createElement(u.a,{exact:!0,from:"/tmo",to:"/original"}),r.a.createElement(u.a,{exact:!0,from:"/tmn",to:"/nations"}),r.a.createElement(u.a,{exact:!0,from:"/tms",to:"/sunrise"}),r.a.createElement(u.a,{exact:!0,from:"/tmnf",to:"/tmnforever"}),r.a.createElement(u.b,{exact:!0,path:"/trackmania/:date?",component:Bt}),r.a.createElement(u.b,{exact:!0,path:"/(nations|original|sunrise|tm2|tmnforever|tmwii|united)/:date?",component:xa}),r.a.createElement(u.b,{exact:!0,path:"/about",component:me}),r.a.createElement(u.b,{exact:!0,path:"/replay",component:Na}),r.a.createElement(u.b,{component:La}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Rt,null),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[148,1,2]]]);
//# sourceMappingURL=main.6774063c.chunk.js.map